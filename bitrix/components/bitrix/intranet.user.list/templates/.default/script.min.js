(function(){var e=BX.namespace("BX.Intranet.UserList");if(e.Manager){return}e.Manager=function(e){this.init(e)};e.Manager.prototype={init:function(e){this.gridId=e.gridId;this.invitationLink=e.invitationLink;BX.addCustomEvent("SidePanel.Slider:onMessage",function(e){if(e.getEventId()==="userProfileSlider::reloadList"){BX.Main.gridManager.reload(this.gridId)}}.bind(this));BX.addCustomEvent("onPullEvent-intranet",this.onPullEvent.bind(this))},onPullEvent:function(e,t){if(t.userId&&e){const n=BX.Main.gridManager.getById(this.gridId)?.instance;const i=n?.getRows().getById(t.userId);switch(e){case"userInitialized":case"userDeleted":i?.update();break;case"userRegister":n?.addRow(t.userId);break;default:break}}},showInvitation:function(){BX.SidePanel.Instance.open(this.invitationLink,{cacheable:false,allowChangeHistory:false})}};e.Toolbar=function(e){this.id="";this.menuItems=null;this.menuId=null;this.menu=null;this.menuOpened=false;this.menuPopup=null;this.componentName=null;this.initialize(e)};e.Toolbar.prototype={initialize:function(e){this.id=e.id;this.menuItems=e.menuItems;this.componentName=e.componentName;if(BX.type.isNotEmptyString(e.menuButtonId)&&BX(e.menuButtonId)){BX.bind(BX(e.menuButtonId),"click",function(e){this.menuButtonClick(e.currentTarget)}.bind(this))}},getId:function(){return this._id},getSetting:function(e,t){return this._settings.getParam(e,t)},_onMenuClose:function(){var e={menu:this._menu};BX.onCustomEvent(window,"CrmInterfaceToolbarMenuClose",[this,e])},menuButtonClick:function(e){this.openMenu(e)},openMenu:function(e){if(this.menuOpened){this.closeMenu();return}if(!BX.type.isArray(this.menuItems)){return}var t=[];var n="";for(var i=0;i<this.menuItems.length;i++){var o=this.menuItems[i];if(typeof o.SEPARATOR!=="undefined"&&o.SEPARATOR){t.push({SEPARATOR:true});continue}if(!BX.type.isNotEmptyString(o.TYPE)){continue}if(BX.type.isNotEmptyString(o.LINK)){n='window.location.href = "'+o.LINK+'"; return false;'}t.push({text:BX.type.isNotEmptyString(o.TITLE)?o.TITLE:"",onclick:n})}this.menuId=this.id.toLowerCase()+"_menu";BX.PopupMenu.show(this.menuId,e,t,{autoHide:true,closeByEsc:true,offsetTop:0,offsetLeft:0,events:{onPopupShow:BX.delegate(this.onPopupShow,this),onPopupClose:BX.delegate(this.onPopupClose,this),onPopupDestroy:BX.delegate(this.onPopupDestroy,this)}});this.menuPopup=BX.PopupMenu.currentItem},closeMenu:function(){if(this.menuPopup){if(this.menuPopup.popupWindow){this.menuPopup.popupWindow.destroy()}}},onPopupShow:function(){this.menuOpened=true},onPopupClose:function(){this.closeMenu()},onPopupDestroy:function(){this.menuOpened=false;this.menuPopup=null;if(typeof BX.PopupMenu.Data[this.menuId]!=="undefined"){delete BX.PopupMenu.Data[this.menuId]}}}})();
//# sourceMappingURL=script.map.js