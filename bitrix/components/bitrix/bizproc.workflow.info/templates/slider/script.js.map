{"version":3,"file":"script.js","sources":["src/index.js"],"sourcesContent":["import { Event, Dom, ajax, Loc, Runtime } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Button, ButtonIcon, ButtonSize, ButtonColor } from 'ui.buttons';\nimport { UserStatus } from 'bizproc.task';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nimport './style.css';\nimport 'sidepanel';\n\ntype TaskButton = {\n\tTARGET_USER_STATUS: number,\n\tNAME: string,\n\tVALUE: string,\n\tTEXT: string,\n};\n\nexport class WorkflowInfo\n{\n\tcurrentUserId: number;\n\tworkflowId: string;\n\ttaskId: number;\n\ttaskUserId: number;\n\ttaskButtons: ?Array<TaskButton>;\n\ttaskForm: ?HTMLFormElement;\n\tbuttonsPanel: ?HTMLElement;\n\tcanDelegateTask: boolean;\n\n\tconstructor(options: {\n\t\tcurrentUserId: number,\n\t\tworkflowId: string,\n\t\ttaskId: number,\n\t\ttaskUserId: number,\n\t\ttaskButtons?: Array<TaskButton>,\n\t\ttaskForm?: HTMLFormElement,\n\t\tbuttonsPanel: HTMLElement,\n\t\tcanDelegateTask: boolean,\n\t})\n\t{\n\t\tthis.currentUserId = options.currentUserId;\n\t\tthis.workflowId = options.workflowId;\n\t\tthis.taskId = options.taskId;\n\t\tthis.taskUserId = options.taskUserId;\n\t\tthis.taskButtons = options.taskButtons;\n\t\tthis.taskForm = options.taskForm;\n\t\tthis.buttonsPanel = options.buttonsPanel;\n\t\tthis.canDelegateTask = options.canDelegateTask;\n\n\t\tthis.handleMarkAsRead = Runtime.debounce(this.#sendMarkAsRead, 100, this);\n\t}\n\n\tinit(): void\n\t{\n\t\tif (this.buttonsPanel)\n\t\t{\n\t\t\tthis.#renderButtons();\n\t\t}\n\n\t\tthis.handleMarkAsRead();\n\n\t\tEventEmitter.subscribe('OnUCCommentWasRead', (event) => {\n\t\t\tconst [xmlId] = event.getData();\n\t\t\tif (xmlId === `WF_${this.workflowId}`)\n\t\t\t{\n\t\t\t\tthis.handleMarkAsRead();\n\t\t\t}\n\t\t});\n\t\tif (this.taskForm)\n\t\t{\n\t\t\tEvent.bind(this.taskForm, 'input', (event) => {\n\t\t\t\tconst target = event.target;\n\t\t\t\tif (target.matches('input, textarea, select'))\n\t\t\t\t{\n\t\t\t\t\tconst formRow = target.closest('.ui-form-content');\n\t\t\t\t\tif (formRow)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#clearError(formRow);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.taskForm.querySelectorAll('.ui-form-content').forEach((row) => {\n\t\t\t\tEvent.bind(row, 'click', (event) => {\n\t\t\t\t\tconst target = event.currentTarget;\n\t\t\t\t\tthis.#clearError(target);\n\t\t\t\t});\n\t\t\t});\n\t\t\tEventEmitter.subscribe('BX.UI.Selector:onChange', (event) => {\n\t\t\t\tconst box = BX(`crm-${event.data[0].selectorId}-box`);\n\t\t\t\tconst formRow = box.closest('.ui-form-content');\n\t\t\t\tif (formRow)\n\t\t\t\t{\n\t\t\t\t\tthis.#clearError(formRow);\n\t\t\t\t}\n\t\t\t});\n\t\t\tEventEmitter.subscribe('OnIframeKeyup', (event) => {\n\t\t\t\tconst box = event.target.dom.cont;\n\t\t\t\tconst formRow = box.closest('.ui-form-content');\n\t\t\t\tif (formRow)\n\t\t\t\t{\n\t\t\t\t\tthis.#clearError(formRow);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t#renderButtons(): void\n\t{\n\t\tif (this.taskButtons)\n\t\t{\n\t\t\tthis.taskButtons.forEach((taskButton: TaskButton) => {\n\t\t\t\tconst targetStatus = new UserStatus(taskButton.TARGET_USER_STATUS);\n\t\t\t\tconst isDecline = targetStatus.isNo() || targetStatus.isCancel();\n\n\t\t\t\tconst button = new Button({\n\t\t\t\t\tcolor: isDecline ? ButtonColor.LIGHT_BORDER : ButtonColor.SUCCESS,\n\t\t\t\t\t// icon: isDecline ? ButtonIcon.CANCEL : ButtonIcon.DONE,\n\t\t\t\t\tround: true,\n\t\t\t\t\tsize: ButtonSize.MEDIUM,\n\t\t\t\t\t// noCaps: true,\n\t\t\t\t\ttext: taskButton.TEXT,\n\t\t\t\t\tonclick: (btn) => this.#handleTaskButtonClick(taskButton, btn),\n\t\t\t\t});\n\n\t\t\t\tDom.style(button.getContainer(), 'minWidth', '160px');\n\t\t\t\tDom.style(button.getContainer(), 'maxWidth', '200px');\n\t\t\t\tDom.attr(button.getContainer(), 'title', taskButton.TEXT);\n\t\t\t\tDom.append(button.getContainer(), this.buttonsPanel);\n\t\t\t});\n\t\t}\n\n\t\tif (this.canDelegateTask)\n\t\t{\n\t\t\tconst button = new Button({\n\t\t\t\tcolor: ButtonColor.LINK,\n\t\t\t\tsize: ButtonSize.MEDIUM,\n\t\t\t\t// noCaps: true,\n\t\t\t\ttext: Loc.getMessage('BPWFI_SLIDER_BUTTON_DELEGATE'),\n\t\t\t\tonclick: (btn) => this.#handleDelegateButtonClick(btn),\n\t\t\t});\n\n\t\t\tDom.style(button.getContainer(), 'minWidth', '160px');\n\t\t\tDom.style(button.getContainer(), 'maxWidth', '200px');\n\t\t\tDom.append(button.getContainer(), this.buttonsPanel);\n\t\t}\n\t}\n\n\t#handleTaskButtonClick(taskButton: TaskButton, uiButton: Button): void\n\t{\n\t\tconst formData = new FormData(this.taskForm);\n\t\tformData.append('taskId', this.taskId);\n\t\tformData.append(taskButton.NAME, taskButton.VALUE);\n\n\t\tuiButton.setDisabled(true);\n\n\t\tajax.runAction('bizproc.task.do', {\n\t\t\tdata: formData,\n\t\t}).then(() => {\n\t\t\tuiButton.setDisabled(false);\n\t\t\tBX.SidePanel.Instance.getSliderByWindow(window)?.close();\n\t\t}).catch((response) => {\n\t\t\tif (BX.type.isArray(response.errors))\n\t\t\t{\n\t\t\t\tconst popupErrors = [];\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tconst fieldName = error.customData;\n\t\t\t\t\tif (this.taskForm && fieldName)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst field = this.taskForm.querySelector(`[data-cid=\"${fieldName}\"]`);\n\t\t\t\t\t\tif (field)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#showError(error, field);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tpopupErrors.push(error.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (popupErrors.length > 0)\n\t\t\t\t{\n\t\t\t\t\tMessageBox.alert(popupErrors.join(', '));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tuiButton.setDisabled(false);\n\t\t});\n\t}\n\n\t#handleDelegateButtonClick(uiButton: Button): void\n\t{\n\t\tuiButton.setDisabled(true);\n\n\t\tRuntime.loadExtension('ui.entity-selector').then((exports) => {\n\t\t\tconst { Dialog } = exports;\n\t\t\tuiButton.setDisabled(false);\n\n\t\t\tconst dialog = new Dialog({\n\t\t\t\ttargetNode: uiButton.getContainer(),\n\t\t\t\tcontext: 'bp-task-delegation',\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tintranetUsersOnly: true,\n\t\t\t\t\t\t\temailUsers: false,\n\t\t\t\t\t\t\tinviteEmployeeLink: false,\n\t\t\t\t\t\t\tinviteGuestLink: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselectMode: 'usersOnly',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tbindOptions: { forceBindPosition: true },\n\t\t\t\t},\n\t\t\t\tenableSearch: true,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\tconst item = event.getData().item;\n\t\t\t\t\t\tthis.#delegateTask(item.getId());\n\t\t\t\t\t},\n\t\t\t\t\tonHide: (event) => {\n\t\t\t\t\t\tevent.getTarget().destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\thideOnSelect: true,\n\t\t\t\toffsetTop: 3,\n\t\t\t\tclearUnavailableItems: true,\n\t\t\t\tmultiple: false,\n\t\t\t});\n\n\t\t\tdialog.show();\n\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tconsole.error(e);\n\t\t\t\tuiButton.setDisabled(false);\n\t\t\t});\n\t}\n\n\t#delegateTask(toUserId: number): void\n\t{\n\t\tconst actionData = {\n\t\t\ttaskIds: [this.taskId],\n\t\t\tfromUserId: this.taskUserId || this.currentUserId,\n\t\t\ttoUserId,\n\t\t};\n\n\t\tajax.runAction('bizproc.task.delegate', { data: actionData })\n\t\t\t.then((response) => {\n\t\t\t\tBX.SidePanel.Instance.getSliderByWindow(window)?.close();\n\t\t\t}).catch((response) => {\n\t\t\t\tMessageBox.alert(response.errors.pop().message);\n\t\t\t});\n\t}\n\n\t#sendMarkAsRead(): void\n\t{\n\t\tajax.runAction('bizproc.workflow.comment.markAsRead', {\n\t\t\tdata: {\n\t\t\t\tworkflowId: this.workflowId,\n\t\t\t\tuserId: this.currentUserId,\n\t\t\t},\n\t\t});\n\t}\n\n\t#clearError(target: HTMLElement): void\n\t{\n\t\tconst errorContainer = target.querySelector('.ui-form-notice');\n\t\tif (errorContainer)\n\t\t{\n\t\t\tBX.Dom.remove(errorContainer);\n\t\t}\n\t}\n\n\t#showError(error: string, field: HTMLElement): void\n\t{\n\t\tconst parentContainer = field.querySelector('.ui-form-content');\n\t\tlet errorContainer = field.querySelector('.ui-form-notice');\n\t\tif (!errorContainer)\n\t\t{\n\t\t\terrorContainer = BX.Dom.create(\n\t\t\t\t'div',\n\t\t\t\t{ attrs: { className: 'ui-form-notice' } },\n\t\t\t);\n\n\t\t\terrorContainer.innerText = error.message;\n\t\t\tif (parentContainer)\n\t\t\t{\n\t\t\t\tBX.Dom.append(errorContainer, parentContainer);\n\t\t\t}\n\t\t}\n\t}\n}\n"],"names":["WorkflowInfo","constructor","options","currentUserId","workflowId","taskId","taskUserId","taskButtons","taskForm","buttonsPanel","canDelegateTask","handleMarkAsRead","Runtime","debounce","init","EventEmitter","subscribe","event","xmlId","getData","Event","bind","target","matches","formRow","closest","querySelectorAll","forEach","row","currentTarget","box","BX","data","selectorId","dom","cont","taskButton","targetStatus","UserStatus","TARGET_USER_STATUS","isDecline","isNo","isCancel","button","Button","color","ButtonColor","LIGHT_BORDER","SUCCESS","round","size","ButtonSize","MEDIUM","text","TEXT","onclick","btn","Dom","style","getContainer","attr","append","LINK","Loc","getMessage","uiButton","formData","FormData","NAME","VALUE","setDisabled","ajax","runAction","then","SidePanel","Instance","getSliderByWindow","window","close","catch","response","type","isArray","errors","popupErrors","error","fieldName","customData","field","querySelector","push","message","length","MessageBox","alert","join","loadExtension","exports","Dialog","dialog","targetNode","context","entities","id","intranetUsersOnly","emailUsers","inviteEmployeeLink","inviteGuestLink","selectMode","popupOptions","bindOptions","forceBindPosition","enableSearch","events","item","getId","onHide","getTarget","destroy","hideOnSelect","offsetTop","clearUnavailableItems","multiple","show","e","console","toUserId","actionData","taskIds","fromUserId","pop","userId","errorContainer","remove","parentContainer","create","attrs","className","innerText"],"mappings":"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"}