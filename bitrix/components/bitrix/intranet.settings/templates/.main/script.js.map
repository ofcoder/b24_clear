{"version":3,"file":"script.js","sources":["src/analytic.js","src/fields/site-title-24-field.js","src/fields/site-title-field.js","src/navigation.js","src/pages/tools-page.js","src/pages/employee-page.js","src/requisite/button-bar.js","src/requisite/landing-button.js","src/requisite/landing-card.js","src/requisite/landing-button-factory.js","src/requisite/card.js","src/pages/requisite-page.js","src/pages/communication-page.js","src/fields/site-domain-field.js","src/fields/site-utils.js","src/fields/site-theme-picker-field.js","src/fields/site-logo-field.js","src/fields/site-title-preview-widget.js","src/pages/portal-page.js","src/configuration/portal-delete-form.js","src/configuration/portal-delete-form-employee.js","src/configuration/portal-delete-form-checkword.js","src/configuration/portal-delete-form-mail.js","src/configuration/portal-delete-form-not-admin.js","src/configuration/portal-delete-section.js","src/pages/configuration-page.js","src/pages/schedule-page.js","src/pages/gdpr-page.js","src/pages/security-page.js","src/pages/external-temporary-page.js","src/page-manager.js","src/search-engine/data-source.js","src/search-engine/searcher.js","src/search-engine/renderer.js","src/search-engine/server-data-source.js","src/permission.js","src/settings.js"],"sourcesContent":["import { ajax, Http } from 'main.core';\nimport { sendData } from 'ui.analytics';\nimport type { AnalyticsOptions } from 'ui.analytics';\n\nexport type AnalyticContext = {\n\tisAdmin: ?boolean,\n\tlocationName: ?string,\n\tisBitrix24: boolean,\n\tanalyticContext: ?string,\n}\n\nexport class Analytic\n{\n\t#eventList: Array = [];\n\t#tool: string = 'settings';\n\t#context: ?AnalyticContext = null;\n\n\tconstructor(context: ?AnalyticContext = null)\n\t{\n\t\tthis.#context = context;\n\t}\n\n\taddEvent(eventType: string, eventData: AnalyticsOptions): void\n\t{\n\t\tif (this.#context.isBitrix24)\n\t\t{\n\t\t\tthis.#eventList[eventType] = eventData;\n\t\t}\n\t}\n\n\tsend(): void\n\t{\n\t\tif (!this.#context.isBitrix24)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Object.keys(this.#eventList).length > 0)\n\t\t{\n\t\t\tajax.runComponentAction(\n\t\t\t\t'bitrix:intranet.settings',\n\t\t\t\t'analytic',\n\t\t\t\t{\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {data: this.#eventList},\n\t\t\t\t},\n\t\t\t).then(()=>{});\n\t\t}\n\n\t\tthis.#eventList = [];\n\t}\n\n\taddEventOpenSettings(): void\n\t{\n\t\tconst options = {\n\t\t\tevent: AnalyticSettingsEvent.OPEN,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'slider',\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tc_section: this.#context?.analyticContext ?? '',\n\t\t\tc_element: this.#context?.locationName,\n\t\t};\n\n\t\tsendData(options);\n\t\t//this.addEvent(AnalyticSettingsEvent.OPEN, options);\n\t}\n\n\taddEventOpenTariffSelector(fieldName: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: 'open_tariff',\n\t\t\ttool: this.#tool,\n\t\t\tcategory: fieldName,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tthis.addEvent(fieldName + '_open_tariff', options);\n\t}\n\n\taddEventOpenHint(fieldName: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: 'open_hint',\n\t\t\ttool: this.#tool,\n\t\t\tcategory: fieldName,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tthis.addEvent(fieldName + '_open_hint', options);\n\t}\n\n\taddEventStartPagePage(page: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: AnalyticSettingsEvent.START_PAGE,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: page,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tsendData(options);\n\t}\n\n\taddEventChangePage(page: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: AnalyticSettingsEvent.VIEW,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: page,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tsendData(options);\n\t}\n\n\taddEventToggleTools(toolName: string, state: boolean): void\n\t{\n\t\tconst event = 'onoff_tools';\n\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'tools',\n\t\t\ttype: toolName,\n\t\t\tc_element: this.#context?.locationName,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tp2: state ? AnalyticSettingsTurnState.ON : AnalyticSettingsTurnState.OFF,\n\t\t};\n\n\t\tthis.addEvent('tools' + toolName + '_' + event, options);\n\t}\n\n\taddEventToggle2fa(state: boolean): void\n\t{\n\t\tconst event = '2fa_onoff';\n\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'security',\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tp2: state ? AnalyticSettingsTurnState.ON : AnalyticSettingsTurnState.OFF,\n\t\t};\n\n\t\tthis.addEvent('security_' + event, options);\n\t}\n\n\taddEventConfigPortal(event: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'portal'\n\t\t};\n\n\t\tthis.addEvent('portal_' + event, options);\n\t}\n\n\taddEventConfigEmployee(event: string, state: boolean): void\n\t{\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'employee',\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tp2: state ? AnalyticSettingsTurnState.ON : AnalyticSettingsTurnState.OFF,\n\t\t};\n\n\t\tthis.addEvent('employee_' + event, options);\n\t}\n\n\taddEventConfigConfiguration(event: string, state: boolean): void\n\t{\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'configuration',\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t\tp2: state ? AnalyticSettingsTurnState.ON : AnalyticSettingsTurnState.OFF,\n\t\t};\n\n\t\tthis.addEvent('configuration_' + event, options);\n\t}\n\n\taddEventConfigRequisite(event: string): void\n\t{\n\t\tconst options = {\n\t\t\tevent: event,\n\t\t\ttool: this.#tool,\n\t\t\tcategory: 'requisite',\n\t\t\tc_element: this.#context?.locationName,\n\t\t\tp1: this.#context?.isAdmin !== false ? AnalyticSettingsUserRole.ADMIN : AnalyticSettingsUserRole.NOT_ADMIN,\n\t\t};\n\n\t\tsendData(options);\n\t}\n}\n\nexport class AnalyticSettingsCategory\n{\n\tstatic TOOLS = 'tools';\n\tstatic SECURITY = 'security';\n\tstatic AI = 'ai';\n\tstatic PORTAL = 'portal';\n\tstatic EMPLOYEE = 'employee';\n\tstatic COMMUNICATION = 'communication';\n\tstatic REQUISITE = 'requisite';\n\tstatic SCHEDULE = 'schedule';\n\tstatic CONFIGURATION = 'configuration';\n}\n\nexport class AnalyticSettingsEvent\n{\n\tstatic OPEN = 'open_setting';\n\tstatic START_PAGE = 'start_page';\n\tstatic VIEW = 'view';\n\tstatic TFA = '2fa_onoff';\n\tstatic CHANGE_PORTAL_NAME = 'change_portal_name';\n\tstatic CHANGE_PORTAL_LOGO = 'change_portal_logo';\n\tstatic CHANGE_PORTAL_SITE = 'change_portal_site';\n\tstatic CHANGE_PORTAL_THEME = 'change_portal_theme';\n\tstatic CHANGE_MARKET = 'change_market';\n\tstatic CHANGE_PAY_TARIFF = 'change_pay_tariff';\n\tstatic CREATE_CARD = 'create_vizitka';\n\tstatic EDIT_CARD = 'edit_vizitka';\n\tstatic COPY_LINK_CARD = 'copylink_vizitka';\n\tstatic OPEN_ADD_COMPANY = 'open_add_company';\n\tstatic CHANGE_QUICK_REG = 'change_quick_reg';\n\tstatic CHANGE_REG_ALL = 'change_reg_all';\n\tstatic CHANGE_EXTRANET_INVITE = 'change_extranet_invite';\n}\n\nexport class AnalyticSettingsUserRole\n{\n\tstatic ADMIN = 'isAdmin_Y';\n\tstatic NOT_ADMIN = 'isAdmin_N';\n}\n\nexport class AnalyticSettingsTurnState\n{\n\tstatic ON = 'turn_on';\n\tstatic OFF = 'turn_off';\n}","import {BaseSettingsElement} from \"ui.form-elements.field\";\nimport {Checker} from \"ui.form-elements.view\";\nimport {Loc, Tag} from \"main.core\";\n\nexport class SiteTitle24Field extends BaseSettingsElement\n{\n\t#checker: Checker;\n\t#content: HTMLElement;\n\tconstructor(params)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\n\t\tthis.#checker = new Checker({\n\t\t\tid: 'siteLogo24',\n\t\t\tinputName: 'logo24',\n\t\t\ttitle: params.title ?? Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_LOGO24'),\n\t\t\tsize: 'extra-small',\n\t\t\t// hintOn: '',\n\t\t\t// hintOff: '',\n\t\t\tisEnable: params.isEnable,\n\t\t\tchecked: params.checked !== '',\n\t\t\tvalue: 'Y',\n\t\t\tbannerCode: 'limit_admin_logo24',\n\t\t\thideSeparator: true,\n\t\t});\n\t}\n\n\tgetFieldView()\n\t{\n\t\treturn this.#checker;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tthis.#content = Tag.render`\n\t\t\t<div class=\"ui-section__field-selector --align-center\">\n\t\t\t\t<div class=\"ui-section__hint\">\n\t\t\t\t\t${this.#checker.render()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#content;\n\t}\n}","import { Event, Loc, Tag } from 'main.core';\nimport { BaseSettingsElement } from \"ui.form-elements.field\";\nimport { HelpMessage } from 'ui.section';\nimport { Checker, TextInput } from 'ui.form-elements.view';\nimport { EventEmitter, BaseEvent } from \"main.core.events\";\nimport { SiteTitle24Field } from './site-title-24-field';\n\nexport type SiteTitleFieldType = {\n\tparent: BaseSettingsElement,\n\tsiteTitleOptions: SiteTitleInputType,\n\tsiteTitleLabels: SiteTitleLabelType,\n};\nexport type SiteTitleInputType = {\n\tname: string,\n\tcanUserEditName: boolean,\n\ttitle: string,\n\tcanUserEditTitle: boolean,\n\tlogo24: string,\n\tcanUserEditLogo24: boolean,\n\tlogo: ?Array\n};\nexport type SiteTitleLabelType = {\n\ttitle: ?string,\n\tlogo24: ?string,\n}\n\nexport class SiteTitleField extends BaseSettingsElement\n{\n\toptions: SiteTitleInputType;\n\tlabels: SiteTitleLabelType;\n\n\t#content: HTMLElement;\n\t#contentLogo24: HTMLElement;\n\t#title: TextInput;\n\t#logo24: SiteTitle24Field;\n\n\t#inputMonitoringIntervalId: ?number;\n\t#inputMonitoringCountdown: number = 10;\n\t#inputMonitoringPrevState: ?string;\n\n\tconstructor(params: SiteTitleFieldType)\n\t{\n\t\tsuper(params);\n\t\tthis.setParentElement(params.parent);\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\n\t\tconst options = params.siteTitleOptions;\n\t\tthis.options = {\n\t\t\ttitle: options.title,\n\t\t\tcanUserEditTitle: options.canUserEditTitle,\n\t\t\tlogo24: options.logo24,\n\t\t\tcanUserEditLogo24: options.canUserEditLogo24,\n\t\t};\n\t\tconst labels = params.siteTitleLabels;\n\t\tthis.labels = {\n\t\t\ttitle: labels.title,\n\t\t\tlogo24: labels.logo24,\n\t\t}\n\n\t\tthis.#initTitle(options, labels);\n\t\tthis.#initLogo24(options, labels);\n\t}\n\n\t#initTitle(options: SiteTitleInputType, labels: SiteTitleLabelType)\n\t{\n\t\tthis.#title = new TextInput({\n\t\t\tvalue: options.title,\n\t\t\tplaceholder: options.title,\n\t\t\tlabel: labels.title ?? Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_INPUT_LABEL'),\n\t\t\tid: 'siteTitle',\n\t\t\tinputName: 'title',\n\t\t\tisEnable: true,\n\t\t\t// bannerCode: '123',\n\t\t\t// helpDeskCode: '234',\n\t\t\t// helpMessageProvider: () => {}\n\t\t});\n\n\t\tthis.#title.setEventNamespace(\n\t\t\tthis.getEventNamespace()\n\t\t);\n\t}\n\n\t#initLogo24(options: SiteTitleInputType, labels: SiteTitleLabelType)\n\t{\n\t\tthis.#logo24 = new SiteTitle24Field({\n\t\t\ttitle: labels.logo24,\n\t\t\tisEnable: options.canUserEditLogo24,\n\t\t\tchecked: options.logo24,\n\t\t});\n\t}\n\n\tgetFieldView()\n\t{\n\t\treturn this.#title;\n\t}\n\n\tcancel(): void\n\t{\n\t}\n\n\tstartInputMonitoring(): void\n\t{\n\t\tif (this.#inputMonitoringIntervalId > 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.#inputMonitoringIntervalId = setInterval(this.monitorInput.bind(this), 500);\n\t}\n\n\tstopInputMonitoring()\n\t{\n\t\tif (this.#inputMonitoringIntervalId > 0)\n\t\t{\n\t\t\tclearInterval(this.#inputMonitoringIntervalId);\n\t\t\tthis.#inputMonitoringIntervalId = null;\n\t\t}\n\t}\n\n\tmonitorInput()\n\t{\n\t\tconst value = this.#title.getInputNode().value;\n\t\tif (this.#inputMonitoringPrevState !== value)\n\t\t{\n\t\t\tthis.#inputMonitoringCountdown = 10;\n\t\t\tthis.#inputMonitoringPrevState = value;\n\t\t\tEventEmitter.emit(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\t\tnew BaseEvent({data: { title:  value } } )\n\t\t\t);\n\t\t}\n\t\telse if (--this.#inputMonitoringCountdown <= 0)\n\t\t{\n\t\t\tthis.stopInputMonitoring();\n\t\t}\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tEvent.bind(this.#title.getInputNode(), 'focus', this.startInputMonitoring.bind(this));\n\t\tEvent.bind(this.#title.getInputNode(), 'keydown', this.startInputMonitoring.bind(this));\n\t\tEvent.bind(this.#title.getInputNode(), 'click', this.startInputMonitoring.bind(this));\n\t\tEvent.bind(this.#title.getInputNode(), 'blur', this.stopInputMonitoring.bind(this));\n\t\tEvent.bind(this.#title.getInputNode(), 'blur', this.stopInputMonitoring.bind(this));\n\n\t\tthis.#logo24.getFieldView().subscribe('change', (event: BaseEvent) => {\n\t\t\tEventEmitter.emit(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\t\tnew BaseEvent({ data: { logo24:  event.getData() === true ? '24' : '' } })\n\t\t\t);\n\t\t});\n\n\t\tthis.#content = Tag.render`\n\t\t<div id=\"${this.#title.getId()}\" class=\"ui-section__field-selector --no-border --no-margin --align-center\">\n\t\t\t<div class=\"ui-section__field-container\">\n\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t<label class=\"ui-section__field-label\" for=\"${this.#title.getName()}\">\n\t\t\t\t\t\t${this.#title.getLabel()}\n\t\t\t\t\t</label> \n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-section__field-inner\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-block\">\n\t\t\t\t\t\t${this.#title.getInputNode()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t`;\n\n\t\treturn this.#content;\n\t}\n\n\tgetLogo24Field()\n\t{\n\t\treturn this.#logo24;\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport {Dom, Type} from 'main.core';\nimport {\n\tAscendingOpeningVisitor,\n\tBaseSettingsElement,\n\tBaseSettingsPage,\n\tRecursiveFilteringVisitor,\n\tSettingsField,\n\tSettingsRow,\n\tSettingsSection,\n\tTabField,\n\tTabsField,\n} from 'ui.form-elements.field';\nimport { SiteTitleField } from './fields/site-title-field';\nimport { Settings } from './settings';\nimport {SiteTitle24Field} from \"./fields/site-title-24-field\";\n\nexport class Navigation\n{\n\t#settings: Settings;\n\t#currentPage: ?BaseSettingsPage;\n\t#prevPage: ?BaseSettingsPage;\n\n\tconstructor(settings: Settings)\n\t{\n\t\tthis.#settings = settings;\n\t\tEventEmitter.subscribe('BX.Intranet.SettingsNavigation:onMove', (event) => {\n\t\t\tconst {page, fieldName} = event.data;\n\t\t\tif (this.getCurrentPage()?.getType() === page)\n\t\t\t{\n\t\t\t\tthis.moveTo(this.getCurrentPage(), fieldName);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst pageObj = this.getPageByType(page);\n\n\t\t\tif (!pageObj?.hasData())\n\t\t\t{\n\t\t\t\tEventEmitter.subscribeOnce('BX.Intranet.Settings:onPageComplete',(event) => {\n\t\t\t\t\tif (event.data.page.hasContent())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.moveTo(event.data.page, fieldName);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\n\t\t\tEventEmitter.subscribeOnce('BX.Intranet.Settings:onAfterShowPage',(event) => {\n\t\t\t\tif (event.data.page.hasContent())\n\t\t\t\t{\n\t\t\t\t\tthis.moveTo(event.data.page, fieldName);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.#settings.show(page);\n\t\t});\n\t}\n\n\tgetPageByType(type: string): ?BaseSettingsPage\n\t{\n\t\treturn this.getPages().find((page: BaseSettingsPage) => {\n\t\t\treturn page.getType() === type;\n\t\t});\n\t}\n\n\tgetCurrentPage(): ?BaseSettingsPage\n\t{\n\t\treturn this.#currentPage;\n\t}\n\n\tgetPrevPage(): ?BaseSettingsPage\n\t{\n\t\treturn this.#prevPage;\n\t}\n\n\tchangePage(page: BaseSettingsPage)\n\t{\n\t\tif (!(page instanceof BaseSettingsPage))\n\t\t{\n\t\t\tconsole.log('Not found \"' + type + '\" page');\n\t\t\treturn;\n\t\t}\n\n\t\tif (page === this.#currentPage)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#prevPage = this.#currentPage;\n\t\tthis.#currentPage = page;\n\t}\n\n\tgetPages(): [BaseSettingsPage]\n\t{\n\t\treturn this.#settings.getChildrenElements();\n\t}\n\n\tupdateAddressBar()\n\t{\n\t\tlet url = new URL(window.location.href);\n\t\turl.searchParams.set('page', this.getCurrentPage()?.getType());\n\t\turl.searchParams.delete('IFRAME');\n\t\turl.searchParams.delete('IFRAME_TYPE');\n\t\ttop.window.history.replaceState(null, '', url.toString());\n\t}\n\n\n\tfindByFieldName(rootNode: BaseSettingsElement, fieldName: string): ?SettingsField\n\t{\n\t\tconst node = RecursiveFilteringVisitor.startFrom(rootNode, (node) => {\n\t\t\tif (\n\t\t\t\tnode instanceof SettingsSection\n\t\t\t\t&& node.getSectionView().getId() === fieldName\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tnode instanceof TabField\n\t\t\t\t&& node.getFieldView().getId() === fieldName\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn ((node instanceof SettingsField\n\t\t\t\t|| node instanceof SiteTitleField\n\t\t\t\t\t|| node instanceof SiteTitle24Field)\n\t\t\t&& (node.getFieldView().getName() === fieldName || node.getFieldView().getId() === fieldName))\n\t\t});\n\n\t\treturn node.shift() ?? null;\n\t}\n\n\tscrollToNode(node: SettingsField): void\n\t{\n\t\tconst element = node.render();\n\t\tconst headerOffset = 45;\n\t\tconst elementPosition = element.getBoundingClientRect().top;\n\t\tconst offsetPosition = elementPosition + window.pageYOffset - headerOffset;\n\n\t\tscrollTo({\n\t\t\ttop: offsetPosition,\n\t\t\tbehavior: \"smooth\"\n\t\t});\n\t}\n\n\tmoveTo(element: BaseSettingsPage, fieldName: string): void\n\t{\n\t\tconst fieldNode = this.findByFieldName(element, fieldName);\n\t\tif (Type.isNil(fieldNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet isColored = false;\n\t\tAscendingOpeningVisitor.startFrom(fieldNode, (element) => {\n\t\t\tif (element instanceof SettingsRow)\n\t\t\t{\n\t\t\t\telement.getRowView().show();\n\t\t\t}\n\t\t\telse if (element instanceof SettingsSection)\n\t\t\t{\n\t\t\t\telement.getSectionView().toggle(true, false);\n\t\t\t}\n\t\t\telse if (element instanceof TabField)\n\t\t\t{\n\t\t\t\tconst tabs = element.getParentElement();\n\n\t\t\t\tif (tabs instanceof TabsField)\n\t\t\t\t{\n\t\t\t\t\ttabs.activateTab(element, false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!isColored)\n\t\t\t{\n\t\t\t\tisColored = element.highlight();\n\t\t\t}\n\t\t});\n\t\tthis.scrollToNode(fieldNode);\n\t}\n}","import { EventEmitter } from 'main.core.events';\nimport { Draggable } from 'ui.draganddrop.draggable';\nimport { Section, Row } from 'ui.section';\nimport { SwitcherNestedItem, SwitcherNested } from 'ui.switcher-nested';\nimport { Loc, Type, Event as EventBX, Dom, Tag } from 'main.core';\nimport { SettingsSection, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\n\nexport class ToolsPage extends BaseSettingsPage\n{\n\t#inputForSaveSortTools: HTMLElement;\n\t#toolsWrapperRow: Row;\n\t#draggable: Draggable;\n\t#mainSection: Section;\n\t#settingsSection: SettingsSection;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_TOOLS');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_TOOLS');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'tools';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tconst description = new Row({\n\t\t\tcontent: this.getDescription().getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: description,\n\t\t\tparent: this.#getSettingsSection(),\n\t\t});\n\n\t\tif (this.hasValue('tools'))\n\t\t{\n\t\t\tthis.#renderToolsSelectors();\n\t\t}\n\n\t\tthis.#getSettingsSection().renderTo(contentNode);\n\t}\n\n\t#renderToolsSelectors(): void\n\t{\n\t\tconst tools = this.getValue('tools');\n\t\tconst startSort = [];\n\t\tconst toolSelectors = [];\n\n\t\tObject.keys(tools).forEach((item) => {\n\t\t\tstartSort.push(tools[item].menuId)\n\t\t\tconst tool = tools[item];\n\t\t\tconst subgroups = tool.subgroups;\n\t\t\tlet toolSelectorItems = [];\n\n\t\t\tif (Object.keys(subgroups).length > 0)\n\t\t\t{\n\t\t\t\ttoolSelectorItems = this.#getToolsSelectorsItems(subgroups, tool);\n\t\t\t}\n\n\t\t\tconst toolSelector = new SwitcherNested({\n\t\t\t\tid: tool.code,\n\t\t\t\ttitle: tool.name,\n\t\t\t\tlink: this.getPermission().canEdit() ? tool['settings-path'] : null,\n\t\t\t\tinfoHelperCode: this.getPermission().canEdit() ? tool['infohelper-slider'] : null,\n\t\t\t\tlinkTitle: tool['settings-title'] ?? Loc.getMessage('INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS'),\n\t\t\t\tisChecked: tool.enabled,\n\t\t\t\tmainInputName: tool.code,\n\t\t\t\tisOpen: false,\n\t\t\t\titems: toolSelectorItems,\n\t\t\t\tisDisabled: !this.getPermission().canEdit(),\n\t\t\t\tisDefault: tool.default,\n\t\t\t\thelpMessage: !this.getPermission().canEdit()\n\t\t\t\t\t? Loc.getMessage('INTRANET_SETTINGS_ELEMENT_PERMISSION_MSG')\n\t\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED', {'#TOOL#': tool.name}),\n\t\t\t});\n\t\t\ttoolSelectors.push(toolSelector);\n\n\t\t\tconst toolSelectorSection = new SettingsSection({\n\t\t\t\tsection: toolSelector,\n\t\t\t});\n\n\t\t\tDom.style(toolSelectorSection.getSectionView().render(), 'margin-bottom', '8px');\n\t\t\tDom.attr(toolSelectorSection.getSectionView().render(), 'data-menu-id', tool.menuId);\n\t\t\tthis.#getToolsWrapperRow().append(toolSelectorSection.getSectionView().render());\n\t\t\tnew SettingsRow({\n\t\t\t\trow: this.#getToolsWrapperRow(),\n\t\t\t\tparent: this.#getSettingsSection(),\n\t\t\t\tchild: toolSelectorSection\n\t\t\t});\n\t\t});\n\t}\n\n\t#getSubToolHelpMessage(tool: Object, parentToolName: ?string): string\n\t{\n\t\tif (!this.getPermission().canEdit())\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_SETTINGS_ELEMENT_PERMISSION_MSG');\n\t\t}\n\n\t\tif (tool.disabled)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED', {'#TOOL#': tool.name});\n\t\t}\n\n\t\tif (tool.default)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_MAIN_TOOL', {'#TOOL#': parentToolName ?? ''});\n\t\t}\n\n\t\treturn '';\n\t}\n\n\t#getToolsSelectorsItems(subgroups: Object, tool: Object): Array<SwitcherNestedItem>\n\t{\n\t\tconst toolSelectorItems = [];\n\n\t\tObject.keys(subgroups).forEach((item) => {\n\t\t\tconst subgroupConfig = subgroups[item];\n\n\t\t\tif (\n\t\t\t\tType.isNull(subgroupConfig.name)\n\t\t\t\t|| Type.isNull(subgroupConfig.code)\n\t\t\t\t|| Type.isNull(subgroupConfig.enabled)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst toolSelectorItem = new SwitcherNestedItem({\n\t\t\t\ttitle: subgroupConfig.name,\n\t\t\t\tid: subgroupConfig.code,\n\t\t\t\tinputName: subgroupConfig.code,\n\t\t\t\tisChecked: subgroupConfig.enabled,\n\t\t\t\tsettingsPath: this.getPermission().canEdit() ? subgroupConfig['settings_path'] : null,\n\t\t\t\tsettingsTitle: subgroupConfig['settings_title'] ?? Loc.getMessage('INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS'),\n\t\t\t\tinfoHelperCode: this.getPermission().canEdit() ? subgroupConfig['infohelper-slider'] : null,\n\t\t\t\tisDisabled: !this.getPermission().canEdit(),\n\t\t\t\tisDefault: subgroupConfig.default ?? subgroupConfig.disabled ?? false,\n\t\t\t\thelpMessage: this.#getSubToolHelpMessage(subgroupConfig, tool.name),\n\t\t\t});\n\n\t\t\tif (subgroupConfig.disabled)\n\t\t\t{\n\t\t\t\tDom.style(toolSelectorItem.getSwitcher().getNode(), {opacity: '0.4'});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\ttoolSelectorItem.getSwitcher(),\n\t\t\t\t\t'toggled',\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis.getAnalytic()?.addEventToggleTools(\n\t\t\t\t\t\t\tsubgroupConfig.code,\n\t\t\t\t\t\t\ttoolSelectorItem.getSwitcher().isChecked()\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (subgroupConfig.code === 'tool_subgroup_team_work_instant_messenger')\n\t\t\t{\n\t\t\t\tEventBX.bind(\n\t\t\t\t\ttoolSelectorItem.getSwitcher().getNode(),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => {\n\t\t\t\t\t\tif (!toolSelectorItem.getSwitcher().isChecked())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#getWarningMessage(subgroupConfig.code, toolSelectorItem.getSwitcher().getNode(), Loc.getMessage('INTRANET_SETTINGS_WARNING_TOOL_INSTANT_MESSENGER')).show();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\ttoolSelectorItems.push(toolSelectorItem);\n\t\t});\n\n\t\treturn toolSelectorItems;\n\t}\n\n\t#getMainSection(): Section\n\t{\n\t\tif (this.#mainSection)\n\t\t{\n\t\t\treturn this.#mainSection;\n\t\t}\n\n\t\tthis.#mainSection = new Section(this.getValue('sectionTools'));\n\n\t\treturn this.#mainSection;\n\t}\n\n\t#getSettingsSection(): SettingsSection\n\t{\n\t\tif (this.#settingsSection)\n\t\t{\n\t\t\treturn this.#settingsSection;\n\t\t}\n\n\t\tthis.#settingsSection = new SettingsSection({\n\t\t\tsection: this.#getMainSection(),\n\t\t\tparent: this,\n\t\t});\n\n\t\treturn this.#settingsSection;\n\t}\n\n\tgetDescription(): BX.UI.Alert\n\t{\n\t\tconst descriptionText = `\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_TOOLS_DESCRIPTION')}\n\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=18213196')\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t</a>\n\t\t`;\n\n\t\treturn new BX.UI.Alert({\n\t\t\ttext: descriptionText,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\t}\n\n\t#getInputForSaveSortTools(): HTMLElement\n\t{\n\t\tif (this.#inputForSaveSortTools)\n\t\t{\n\t\t\treturn this.#inputForSaveSortTools;\n\t\t}\n\n\t\tthis.#inputForSaveSortTools = Tag.render`\n\t\t\t<input type=\"hidden\" name=\"tools-sort\">\n\t\t`;\n\n\t\treturn this.#inputForSaveSortTools;\n\t}\n\n\t#getDraggable(): Draggable\n\t{\n\t\tif (this.#draggable)\n\t\t{\n\t\t\treturn this.#draggable;\n\t\t}\n\n\t\tthis.#draggable = new Draggable({\n\t\t\tcontainer: [this.#getToolsWrapperRow().render()],\n\t\t\tdraggable: '.--tool-selector',\n\t\t\tdragElement: '.ui-section__dragdrop-icon-wrapper',\n\t\t\ttype: Draggable.CLONE,\n\t\t});\n\n\t\treturn this.#draggable;\n\t}\n\n\t#getToolsWrapperRow(): Row\n\t{\n\t\tif (this.#toolsWrapperRow)\n\t\t{\n\t\t\treturn this.#toolsWrapperRow;\n\t\t}\n\n\t\tthis.#toolsWrapperRow = new Row({});\n\n\t\treturn this.#toolsWrapperRow;\n\t}\n\n\t#getWarningMessage(toolId, bindElement, message)\n\t{\n\t\treturn BX.PopupWindowManager.create(\n\t\t\ttoolId,\n\t\t\tbindElement,\n\t\t\t{\n\t\t\t\tcontent: message,\n\t\t\t\tdarkMode: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 14,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t},\n\t\t\t\tcloseByEsc: true,\n\t\t\t}\n\t\t);\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { AnalyticSettingsEvent } from '../analytic';\nimport { Checker, Selector, TextInput, InlineChecker } from 'ui.form-elements.view';\nimport { Loc } from 'main.core';\nimport 'ui.icon-set.main';\nimport 'ui.icon-set.actions';\nimport {Section, Row, SeparatorRow} from 'ui.section';\nimport 'ui.forms';\nimport { SettingsSection, SettingsField, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\n\nexport class EmployeePage extends BaseSettingsPage\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_EMPLOYEE');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE_BOX');\n\t}\n\n\tonSuccessDataFetched(response): void\n\t{\n\t\tsuper.onSuccessDataFetched(response);\n\n\t\tif (this.hasValue('IS_BITRIX_24') && this.getValue('IS_BITRIX_24'))\n\t\t{\n\t\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE');\n\t\t\tthis.render().querySelector('.intranet-settings__page-header_desc').innerText = this.descriptionPage;\n\t\t}\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'employee';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tlet profileSection = this.#buildProfileSection();\n\t\tprofileSection?.renderTo(contentNode);\n\n\t\tlet inviteSection = this.#buildInviteSection();\n\t\tinviteSection?.renderTo(contentNode);\n\n\t\tlet additionalSection = this.#buildAdditionalSection();\n\t\tadditionalSection?.renderTo(contentNode);\n\t}\n\n\t#buildAdditionalSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('SECTION_ADDITIONAL'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet additionalSection = new Section(this.getValue('SECTION_ADDITIONAL'));\n\n\t\tlet sectionSettings = new SettingsSection({\n\t\t\tsection: additionalSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('allow_company_pulse'))\n\t\t{\n\t\t\tlet companyPulseField = new Checker(this.getValue('allow_company_pulse'));\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tcompanyPulseField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigEmployee(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_QUICK_REG,\n\t\t\t\t\t\tcompanyPulseField.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tEmployeePage.addToSectionHelper(companyPulseField, sectionSettings);\n\t\t}\n\n\t\treturn sectionSettings;\n\t}\n\t#buildProfileSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('SECTION_PROFILE'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet profileSection = new Section(this.getValue('SECTION_PROFILE'));\n\n\t\tlet sectionSettings = new SettingsSection({\n\t\t\tsection: profileSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('fieldFormatName'))\n\t\t{\n\t\t\tlet hasSelectValue = false;\n\t\t\tlet currentValue = this.getValue('fieldFormatName').current;\n\t\t\tfor (let value of this.getValue('fieldFormatName').values)\n\t\t\t{\n\t\t\t\tif (value.selected === true)\n\t\t\t\t{\n\t\t\t\t\thasSelectValue = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.getValue('fieldFormatName').values.push({\n\t\t\t\tvalue: 'other',\n\t\t\t\tname: Loc.getMessage('INTRANET_SETTINGS_FIELD_OPTION_OTHER'),\n\t\t\t\tselected: !hasSelectValue,\n\t\t\t});\n\n\t\t\tlet nameFormatField = new Selector({\n\t\t\t\tlabel: this.getValue('fieldFormatName').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_NAME_FORMAT'),\n\t\t\t\tname: this.getValue('fieldFormatName').name + '_selector',\n\t\t\t\titems: this.getValue('fieldFormatName').values,\n\t\t\t\thints: this.getValue('fieldFormatName').hints,\n\t\t\t\tcurrent: this.getValue('fieldFormatName').current,\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: nameFormatField\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\tchild: settingsField,\n\t\t\t\tparent: sectionSettings\n\t\t\t});\n\n\t\t\tlet customFormatNameField = new TextInput({\n\t\t\t\tinputName: this.getValue('fieldFormatName').name,\n\t\t\t\tlabel: '',\n\t\t\t\tvalue: currentValue,\n\t\t\t});\n\n\t\t\tsettingsField = new SettingsField({\n\t\t\t\tfieldView: customFormatNameField,\n\t\t\t});\n\n\t\t\tlet customFormatNameRow = new Row({\n\t\t\t\tisHidden: true,\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\trow: customFormatNameRow,\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tif (!hasSelectValue)\n\t\t\t{\n\t\t\t\tcustomFormatNameRow.show();\n\t\t\t}\n\n\t\t\tnameFormatField.getInputNode()\n\t\t\t\t.addEventListener('change', (event) => {\n\t\t\t\t\tif (event.target.value === 'other')\n\t\t\t\t\t{\n\t\t\t\t\t\tcustomFormatNameRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcustomFormatNameField.getInputNode().value = nameFormatField.getInputNode().value;\n\t\t\t\t\t\tcustomFormatNameRow.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('fieldFormatPhoneNumber'))\n\t\t{\n\t\t\tlet formatNumberField = new Selector(this.getValue('fieldFormatPhoneNumber'));\n\n\t\t\tEmployeePage.addToSectionHelper(formatNumberField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('fieldFormatAddress'))\n\t\t{\n\t\t\tlet addressFormatField = new Selector(this.getValue('fieldFormatAddress'));\n\n\t\t\tlet addressFormatRow = new Row({\n\t\t\t\tseparator: this.hasValue('show_year_for_female') ? 'bottom' : null,\n\t\t\t\tclassName: '--block',\n\t\t\t});\n\n\t\t\tEmployeePage.addToSectionHelper(addressFormatField, sectionSettings, addressFormatRow);\n\t\t}\n\n\t\tif (this.hasValue('show_year_for_female'))\n\t\t{\n\t\t\tlet showBirthYearField = new InlineChecker(this.getValue('show_year_for_female'));\n\n\t\t\tEmployeePage.addToSectionHelper(showBirthYearField, sectionSettings);\n\t\t}\n\n\t\treturn sectionSettings;\n\t}\n\n\t#buildInviteSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('SECTION_INVITE'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet inviteSection = new Section(this.getValue('SECTION_INVITE'));\n\n\t\tlet sectionSettings = new SettingsSection({\n\t\t\tsection: inviteSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('allow_register'))\n\t\t{\n\t\t\tlet fastReqField = new Checker(this.getValue('allow_register'));\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tfastReqField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigEmployee(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_QUICK_REG,\n\t\t\t\t\t\tfastReqField.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tEmployeePage.addToSectionHelper(fastReqField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('allow_invite_users'))\n\t\t{\n\t\t\tlet inviteToUserField = new Checker(this.getValue('allow_invite_users'));\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tinviteToUserField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigEmployee(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_REG_ALL,\n\t\t\t\t\t\tinviteToUserField.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t\tEmployeePage.addToSectionHelper(inviteToUserField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('show_fired_employees'))\n\t\t{\n\t\t\tlet showQuitField = new Checker(this.getValue('show_fired_employees'));\n\t\t\tEmployeePage.addToSectionHelper(showQuitField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('general_chat_message_join'))\n\t\t{\n\t\t\tlet newUserField = new Checker(this.getValue('general_chat_message_join'));\n\n\t\t\tEmployeePage.addToSectionHelper(newUserField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('allow_new_user_lf'))\n\t\t{\n\t\t\tlet newUserLfField = new Checker(this.getValue('allow_new_user_lf'));\n\t\t\tEmployeePage.addToSectionHelper(newUserLfField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('feature_extranet'))\n\t\t{\n\t\t\tlet extranetField = new Checker(this.getValue('feature_extranet'));\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\textranetField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigEmployee(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_EXTRANET_INVITE,\n\t\t\t\t\t\textranetField.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tEmployeePage.addToSectionHelper(extranetField, sectionSettings);\n\t\t}\n\n\t\treturn sectionSettings;\n\t}\n\n\n}\n","import { Tag, Dom } from 'main.core';\nimport { Button } from 'ui.buttons';\n\nexport class ButtonBar\n{\n\t#buttonBarElement: HTMLElement;\n\t#buttons: [Button];\n\n\tconstructor(buttons: [Button] = [])\n\t{\n\t\tthis.#buttons = buttons;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#buttonBarElement)\n\t\t{\n\t\t\treturn this.#buttonBarElement;\n\t\t}\n\n\t\tthis.#buttonBarElement = Tag.render`<div class=\"intranet-settings__button_bar\"></div>`;\n\n\t\tfor (const button of this.#buttons)\n\t\t{\n\t\t\tDom.append(button.getContainer(), this.#buttonBarElement);\n\t\t}\n\n\t\treturn this.#buttonBarElement;\n\t}\n\n\tgetButtons(): [Button]\n\t{\n\t\treturn this.#buttons;\n\t}\n\n\taddButton(button: Button)\n\t{\n\t\tthis.#buttons.push(button);\n\t\tDom.append(button.getContainer(), this.render());\n\t}\n}","import { Loc } from 'main.core';\nimport { Button, ButtonState } from 'ui.buttons';\nimport { ErrorCollection } from 'ui.form-elements.field';\n\nexport class LandingButton\n{\n\t#button: Button\n\n\tconstructor()\n\t{\n\t\tthis.#button = new Button({\n\t\t\tclassName: 'landing-button-trigger',\n\t\t\tround: true,\n\t\t\tnoCaps: true,\n\t\t\tsize: BX.UI.Button.Size.MEDIUM,\n\t\t\tcolor: BX.UI.Button.Color.LIGHT_BORDER,\n\t\t});\n\t}\n\n\tsetState(state: LandingButtonState): void\n\t{\n\t\tstate.apply(this.#button);\n\t}\n\n\tgetButton(): Button\n\t{\n\t\treturn this.#button;\n\t}\n}\n\nexport class LandingButtonState\n{\n\tapply(button: Button)\n\t{\n\n\t}\n}\n\nexport type LandingOptions = {\n\tis_connected: boolean,\n\tis_public: boolean,\n\tpublic_url: string,\n\tedit_url: string\n}\n\nexport class EditState extends LandingButtonState\n{\n\t#landing: LandingOptions\n\n\tconstructor(landing: LandingOptions)\n\t{\n\t\tsuper();\n\t\tthis.#landing = landing;\n\t}\n\n\tapply(button: Button): void\n\t{\n\t\tbutton.setText(Loc.getMessage('INTRANET_SETTINGS_BUTTON_EDIT'));\n\t\tbutton.setDropdown(false);\n\t\tbutton.bindEvent('click', () => {\n\t\t\tthis.openNewTab(this.#landing.edit_url);\n\t\t});\n\t}\n\n\topenNewTab(url: string)\n\t{\n\t\twindow.open(url, '_blank').focus();\n\t}\n}\n\nexport class ShowState extends LandingButtonState\n{\n\t#landing: LandingOptions\n\t#menuRenderer: function\n\n\tconstructor(landing: LandingOptions, menuRenderer: function)\n\t{\n\t\tsuper();\n\t\tthis.#landing = landing;\n\t\tthis.#menuRenderer = menuRenderer;\n\t}\n\n\tapply(button: Button): void\n\t{\n\t\tbutton.setText(Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_SITE'));\n\t\tbutton.setDropdown(true);\n\t\tbutton.unbindEvent('click');\n\t\tbutton.setColor(BX.UI.Button.Color.PRIMARY);\n\t\tbutton.setMenu(this.#menuRenderer(this.#landing));\n\t}\n}\n\nexport class CreateState extends LandingButtonState\n{\n\t#requestBuilder: function;\n\t#menuRenderer: function\n\n\tconstructor(request: function, menuRenderer: function)\n\t{\n\t\tsuper();\n\t\tthis.#requestBuilder = request;\n\t\tthis.#menuRenderer = menuRenderer;\n\t}\n\n\tapply(button: Button): void\n\t{\n\t\tbutton.setText(Loc.getMessage('INTRANET_SETTINGS_BUTTON_CREATE'));\n\t\tbutton.setDropdown(false);\n\t\tbutton.bindEvent('click', (event) => {\n\n\t\t\tif (button.getState() === ButtonState.WAITING)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbutton.setState(ButtonState.WAITING);\n\n\t\t\tthis.#requestBuilder().then((response) => {\n\t\t\t\tconst landing: LandingOptions = response.data;\n\t\t\t\tbutton.setState(null);\n\t\t\t\tbutton.unbindEvent('click');\n\t\t\t\tif (landing.is_public)\n\t\t\t\t{\n\t\t\t\t\t(new ShowState(landing, this.#menuRenderer)).apply(button);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst state = new EditState(landing);\n\t\t\t\t\tstate.apply(button);\n\t\t\t\t\tstate.openNewTab(landing.edit_url);\n\t\t\t\t}\n\n\t\t\t}, (response) => {\n\t\t\t\tbutton.setState(null);\n\t\t\t\tErrorCollection.showSystemError(response.errors[0].message)\n\t\t\t});\n\t\t});\n\t}\n\n}","import { Loc, Tag } from 'main.core';\nimport type { LandingOptions }  from './landing-button';\nimport { Button } from 'ui.buttons';\n\nexport class LandingCard\n{\n\t#landing: LandingOptions;\n\t#copyBtn: ?Button;\n\t#landingCardElement: ?HTMLElement;\n\n\tconstructor(landingOptions: LandingOptions)\n\t{\n\t\tthis.#landing = landingOptions;\n\t}\n\n\tqrRender()\n\t{\n\t\tlet qrContainer = Tag.render`<div class=\"intranet-settings__qr_image-container\"></div>`;\n\t\tnew QRCode(qrContainer, {\n\t\t\ttext: this.#landing.public_url,\n\t\t\twidth: 106,\n\t\t\theight: 106,\n\t\t});\n\n\t\treturn qrContainer;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#landingCardElement)\n\t\t{\n\t\t\treturn this.#landingCardElement;\n\t\t}\n\n\t\tconst onclickOpenEdit = () => {\n\t\t\twindow.open(this.#landing.edit_url, '_blank').focus();\n\t\t};\n\n\t\tthis.#landingCardElement = Tag.render`\n\t\t<div class=\"intranet-settings__req-info-container\">\n\t\t\t<div class=\"intranet-settings__req-info-inner\">\n\t\t\t\t<div class=\"intranet-settings__qr_container\">${this.qrRender()}</div>\n\t\t\t\t<div class=\"intranet-settings__qr_description-block\">\n\t\t\t\t\t<div class=\"intranet-settings__qr_help-text\">\n\t\t\t\t\t\t<h4 class=\"intranet-settings__qr_title\">${Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_SITE')}</h4>\n\t\t\t\t\t\t<p class=\"intranet-settings__qr_text\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_HELP_TEXT', { '#SITE_URL#': this.#landing.public_url })}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-settings__qr_button\">\n\t\t\t\t\t\t${this.getCopyButton().getContainer()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"intranet-settings__qr_editor_box\" onclick=\"${onclickOpenEdit}\">\n\t\t\t\t<div class=\"intranet-settings__qr_editor_icon\">\n\t\t\t\t\t<div class=\"ui-icon-set --paint-1\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-settings__qr_editor_name\">${Loc.getMessage('INTRANET_SETTINGS_BUTTON_EDIT_LANDING')}</div>\n\t\t\t\t<div class=\"ui-icon-set --expand intranet-settings__qr_editor_btn\"></div>\n\t\t\t</div>\n\t\t</div>`;\n\n\t\treturn this.#landingCardElement;\n\t}\n\n\tgetCopyButton():Button\n\t{\n\t\tif (this.#copyBtn)\n\t\t{\n\t\t\treturn this.#copyBtn;\n\t\t}\n\n\t\tthis.#copyBtn = new Button({\n\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_COPY_LINK'),\n\t\t\tround: true,\n\t\t\tnoCaps: true,\n\t\t\tclassName: 'landing-copy-button',\n\t\t\tsize: BX.UI.Button.Size.EXTRA_SMALL,\n\t\t\tcolor: BX.UI.Button.Color.SUCCESS,\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tif (BX.clipboard.copy(this.#landing.public_url))\n\t\t\t\t\t{\n\t\t\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('INTRANET_SETTINGS_BUTTON_LINK_WAS_COPIED'),\n\t\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\treturn this.#copyBtn;\n\t}\n}","import { ajax } from 'main.core';\nimport { Button } from 'ui.buttons';\nimport type { LandingOptions } from './landing-button';\nimport { CreateState, EditState, LandingButton, LandingButtonState, ShowState } from './landing-button';\nimport { LandingCard } from './landing-card';\n\nexport class LandingButtonFactory\n{\n\t#options: LandingOptions;\n\tlandingData: Object;\n\t#menuRenderer: function;\n\n\tconstructor(options: LandingOptions, landingData)\n\t{\n\t\tthis.#options = options;\n\t\tthis.landingData = landingData;\n\t\tthis.#menuRenderer = this.#defaultMenuRenderer;\n\t}\n\n\tsetMenuRenderer(renderer: function): void\n\t{\n\t\tthis.#menuRenderer = renderer;\n\t}\n\n\tcreate(): Button\n\t{\n\t\tconst btn = new LandingButton();\n\t\tlet state: LandingButtonState;\n\t\tif (this.#options.is_connected && !this.#options.is_public)\n\t\t{\n\t\t\tstate = new EditState(this.#options);\n\t\t}\n\t\telse if (this.#options.is_connected && this.#options.is_public)\n\t\t{\n\t\t\tstate = new ShowState(this.#options, this.#menuRenderer.bind(this));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstate = new CreateState(() => {\n\t\t\t\treturn this.#getRequestCreateLanding()\n\t\t\t}, this.#menuRenderer.bind(this));\n\t\t}\n\t\tbtn.setState(state);\n\n\t\treturn btn.getButton();\n\t}\n\n\t#defaultMenuRenderer(landingData: LandingOptions): Object\n\t{\n\t\treturn {\n\t\t\tangle: true,\n\t\t\tmaxWidth: 396,\n\t\t\tcloseByEsc: true,\n\t\t\tclassName: 'intranet-settings__qr_popup',\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\thtml: (new LandingCard(landingData)).render(),\n\t\t\t\t\tclassName: 'intranet-settings__qr_popup_item',\n\t\t\t\t},\n\t\t\t],\n\t\t}\n\t}\n\n\t#getRequestCreateLanding(): Promise\n\t{\n\t\treturn ajax.runComponentAction(\n\t\t\t'bitrix:intranet.settings',\n\t\t\t'getLanding',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tcompanyId: this.landingData.company_id,\n\t\t\t\t\trequisiteId: this.landingData.requisite_id,\n\t\t\t\t\tbankRequisiteId: this.landingData.bank_requisite_id,\n\t\t\t\t}\n\t\t\t},\n\t\t)\n\t}\n}","import { Dom, Loc, Tag, Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Button } from 'ui.buttons';\nimport { ButtonBar } from './button-bar';\nimport { LandingButtonFactory } from './landing-button-factory';\n\ntype CardOptions = {\n\tcompany: Object,\n\tfields: Array,\n\tphone: Array,\n\temail: Array,\n\tsite: Array,\n\tlanding: Array,\n\tlandingData: Array,\n};\n\nexport class Card\n{\n\t#options: CardOptions;\n\t#cardElement: ?HTMLElement;\n\t#requisiteFieldsElement: ?HTMLElement;\n\t#buttonBar: ?ButtonBar;\n\n\tconstructor(options: CardOptions)\n\t{\n\t\tthis.#options = options;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#cardElement)\n\t\t{\n\t\t\treturn this.#cardElement;\n\t\t}\n\n\t\tthis.#cardElement = Tag.render`\n\t\t<div class=\"intranet-settings__req_background\">\n\t\t\t<div class=\"intranet-settings__req-card_wrapper\">\n\t\t\t\t<div class=\"intranet-settings__header\">\n\t\t\t\t\t<div class=\"intranet-settings__title\"> <span class=\"ui-section__title-icon ui-icon-set --city\"></span> <span>${this.#options.company.TITLE}</span></div>\n\t\t\t\t\t<div class=\"intranet-settings__contact_bar\"> \n\t\t\t\t\t\t<span class=\"intranet-settings__contact_bar_item\">\n\t\t\t\t\t\t\t${\n\t\t\tthis.#buildCompanyField(\n\t\t\t\tType.isStringFilled(this.#options.phone)\n\t\t\t\t\t? this.#options.phone\n\t\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_PHONE')\n\t\t\t)\n\t\t}\n\t\t\t\t\t\t</span> \n\t\t\t\t\t\t<span class=\"intranet-settings__contact_bar_item\">\n\t\t\t\t\t\t\t${\n\t\t\tthis.#buildCompanyField(\n\t\t\t\tType.isStringFilled(this.#options.email)\n\t\t\t\t\t? this.#options.email\n\t\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_EMAIL')\n\t\t\t)\n\t\t}\n\t\t\t\t\t\t</span> \n\t\t\t\t\t\t<span class=\"intranet-settings__contact_bar_item\">\n\t\t\t\t\t\t\t${\n\t\t\tthis.#buildCompanyField(\n\t\t\t\tType.isStringFilled(this.#options.site)\n\t\t\t\t\t? this.#options.site\n\t\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_SITE')\n\t\t\t)\n\t\t}\n\t\t\t\t\t\t</span> \n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.requisiteFieldsRender()}\n\t\t\t\t${this.getButtonsBar().render()}\n\t\t\t</div>\n\t\t</div>\n\t\t`;\n\n\t\treturn this.#cardElement;\n\t}\n\n\t#buildCompanyField(label: string): HTMLElement\n\t{\n\t\treturn Dom.create('a', {\n\t\t\ttext: label,\n\t\t\tattrs: {\n\t\t\t\thref: this.getCompanyUrl(),\n\t\t\t}\n\t\t});\n\t}\n\n\t#buildField(label: string): HTMLElement\n\t{\n\t\treturn Dom.create('a', {\n\t\t\ttext: label,\n\t\t\tattrs: {\n\t\t\t\thref: this.getRequisiteUrl(),\n\t\t\t}\n\t\t});\n\t}\n\n\tgetRequisiteUrl(): string\n\t{\n\t\tconst requisiteId = this.#options.landingData.requisite_id;\n\n\t\tif (requisiteId)\n\t\t{\n\t\t\treturn '/crm/company/requisite/' + requisiteId + '/';\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '/crm/company/requisite/0/?itemId=' + this.#options.company.ID;\n\t\t}\n\t}\n\n\tgetCompanyUrl(): string\n\t{\n\t\tif (this.#options.company.ID === 0)\n\t\t{\n\t\t\treturn '/crm/company/details/0/?mycompany=y&TITLE=' + this.#options.company.TITLE;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '/crm/company/details/' + this.#options.company.ID + '/';\n\t\t}\n\t}\n\n\trequisiteFieldsRender(): HTMLElement\n\t{\n\t\tif (this.#requisiteFieldsElement)\n\t\t{\n\t\t\treturn this.#requisiteFieldsElement;\n\t\t}\n\t\tconst fields = this.#options.fields;\n\t\tthis.#requisiteFieldsElement = Tag.render`<div class=\"intranet-settings__req-table_wrap\"></div>`;\n\t\tfor (let field of fields)\n\t\t{\n\t\t\tconst renderField = Tag.render`\n\t\t\t\t<div class=\"intranet-settings__req-table_row\">\n\t\t\t\t\t<div class=\"intranet-settings__table-cell\">${field.TITLE}</div>\n\t\t\t\t\t<div class=\"intranet-settings__table-cell\">\n\t\t\t\t\t\t${!this.#options.company.ID\n\t\t\t\t? this.#buildCompanyField(Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB'))\n\t\t\t\t: Type.isStringFilled(field.VALUE)\n\t\t\t\t\t? this.#buildField(\n\t\t\t\t\t\tfield.VALUE\n\t\t\t\t\t)\n\t\t\t\t\t: this.#buildField(\n\t\t\t\t\t\tLoc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB')\n\t\t\t\t\t)\n\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tDom.append(renderField, this.#requisiteFieldsElement);\n\t\t}\n\n\t\treturn this.#requisiteFieldsElement;\n\t}\n\n\tgetButtonsBar(): ButtonBar\n\t{\n\t\tif (this.#buttonBar)\n\t\t{\n\t\t\treturn this.#buttonBar;\n\t\t}\n\n\t\tthis.#buttonBar = new ButtonBar();\n\n\t\treturn this.#buttonBar;\n\t}\n\n\tsetButtonBar(buttonBar: ButtonBar)\n\t{\n\t\tthis.#buttonBar = buttonBar;\n\t}\n}","import { AnalyticSettingsEvent } from '../analytic';\nimport { ButtonBar } from '../requisite/button-bar';\nimport { Card } from '../requisite/card';\nimport { LandingButtonFactory } from '../requisite/landing-button-factory';\nimport { LandingCard } from '../requisite/landing-card';\nimport { Event, Dom, Loc, Tag, Type } from 'main.core';\nimport { Section, Row } from 'ui.section';\nimport {BaseSettingsPage, SettingsRow, SettingsSection} from 'ui.form-elements.field';\nimport 'ui.icon-set.crm';\n\nexport class RequisitePage extends BaseSettingsPage\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_REQUISITE');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_REQUISITE');\n\n\t\ttop.BX.addCustomEvent('onLocalStorageSet', (params) => {\n\t\t\tlet eventName = params?.key ?? null;\n\t\t\tif (eventName === 'onCrmEntityUpdate' || eventName === 'onCrmEntityCreate' || eventName === 'BX.Crm.RequisiteSliderDetails:onSave')\n\t\t\t{\n\t\t\t\tthis.reload();\n\t\t\t}\n\t\t});\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'requisite';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tif (!this.hasValue('sectionRequisite'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet reqSection = new Section(this.getValue('sectionRequisite'));\n\t\tconst sectionField = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: reqSection,\n\t\t});\n\n\t\tconst description = new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_REQUISITE_DESCRIPTION')}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=18213326')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: description.getContainer(),\n\t\t});\n\n\t\treqSection.append(descriptionRow.render());\n\n\t\tif (this.hasValue('COMPANY'))\n\t\t{\n\t\t\tlet companies = this.getValue('COMPANY');\n\t\t\tconst requisites = this.getValue('REQUISITES');\n\t\t\tconst phones = this.getValue('PHONES');\n\t\t\tconst sites = this.getValue('SITES');\n\t\t\tconst emails = this.getValue('EMAILS');\n\t\t\tconst landings = this.getValue('LANDINGS');\n\t\t\tconst landingsData = this.getValue('LANDINGS_DATA');\n\n\t\t\tif (!Type.isArray(companies) || companies.length <= 0)\n\t\t\t{\n\t\t\t\tconst defaultCompanyRow = new Row({\n\t\t\t\t\tcontent: this.cardRender({\n\t\t\t\t\t\tcompany: { ID: 0, TITLE: this.getValue('BITRIX_TITLE') },\n\t\t\t\t\t\tfields: this.getValue('EMPTY_REQUISITE'),\n\t\t\t\t\t\tphone: [],\n\t\t\t\t\t\temail: [],\n\t\t\t\t\t\tsite: [],\n\t\t\t\t\t}),\n\t\t\t\t});\n\n\t\t\t\treqSection.append(defaultCompanyRow.render());\n\t\t\t}\n\n\t\t\tfor (let company of companies)\n\t\t\t{\n\t\t\t\tconst fields = !Type.isNil(requisites[company.ID])\n\t\t\t\t\t? requisites[company.ID]\n\t\t\t\t\t: this.getValue('EMPTY_REQUISITE');\n\t\t\t\tconst cardRow = new Row({\n\t\t\t\t\tcontent: this.cardRender({\n\t\t\t\t\t\tcompany: company,\n\t\t\t\t\t\tfields: fields,\n\t\t\t\t\t\tphone: !Type.isNil(phones[company.ID]) ? phones[company.ID] : [],\n\t\t\t\t\t\temail: !Type.isNil(emails[company.ID]) ? emails[company.ID] : [],\n\t\t\t\t\t\tsite: !Type.isNil(sites[company.ID]) ? sites[company.ID] : [],\n\t\t\t\t\t\tlanding: !Type.isNil(landings[company.ID]) ? landings[company.ID] : [],\n\t\t\t\t\t\tlandingData: !Type.isNil(landingsData[company.ID]) ? landingsData[company.ID] : [],\n\t\t\t\t\t}),\n\t\t\t\t});\n\n\t\t\t\treqSection.append(cardRow.render());\n\t\t\t}\n\t\t}\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: this.addCompanyLinkRender(),\n\t\t\t}),\n\t\t\tparent: sectionField,\n\t\t});\n\n\t\tsectionField.renderTo(contentNode);\n\t}\n\n\taddCompanyLinkRender(): HTMLElement\n\t{\n\t\tconst link = Tag.render`\n\t\t\t\t<a class=\"ui-section__link\" \n\t\t\t\t\thref=\"/crm/company/details/0/?mycompany=y\" target=\"_blank\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_REQ_ADD_COMPANY')}\n\t\t\t\t</a>\n\t\t`;\n\n\t\tEvent.bind(link, 'click', (event) => {\n\t\t\tthis.getAnalytic()?.addEventConfigRequisite(AnalyticSettingsEvent.OPEN_ADD_COMPANY);\n\t\t});\n\n\t\treturn Tag.render`<div class=\"ui-section__link_box\">${link}</div>`;\n\t}\n\n\tcardRender(params): HTMLElement\n\t{\n\t\tconst card = new Card(params);\n\n\t\tconst buttonBar = new ButtonBar();\n\t\tif (params.company.ID > 0)\n\t\t{\n\t\t\tconst factory = new LandingButtonFactory(params.landing, params.landingData);\n\n\t\t\tfactory.setMenuRenderer((landingData) => {\n\t\t\t\tconst landingCard = new LandingCard(landingData);\n\t\t\t\tEvent.bind(landingCard.getCopyButton().getContainer(), 'click', (event) => {\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigRequisite(AnalyticSettingsEvent.COPY_LINK_CARD);\n\t\t\t\t});\n\n\t\t\t\treturn {\n\t\t\t\t\tangle: true,\n\t\t\t\t\tmaxWidth: 396,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tclassName: 'intranet-settings__qr_popup',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: landingCard.render(),\n\t\t\t\t\t\t\tclassName: 'intranet-settings__qr_popup_item',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst landingBtn = factory.create();\n\n\t\t\tif (Dom.hasClass(landingBtn.getContainer(), 'landing-button-trigger'))\n\t\t\t{\n\t\t\t\tEvent.bind(landingBtn.getContainer(), 'click', (event) => {\n\t\t\t\t\tif (params.landing.is_connected && !params.landing.is_public)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventConfigRequisite(AnalyticSettingsEvent.EDIT_CARD);\n\t\t\t\t\t}\n\t\t\t\t\telse if (!params.landing.is_connected && !params.landing.is_public)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventConfigRequisite(AnalyticSettingsEvent.CREATE_CARD);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tbuttonBar.addButton(landingBtn);\n\t\t}\n\n\t\tcard.setButtonBar(buttonBar);\n\n\t\treturn card.render();\n\t}\n}\n","import {TextInputInline, Checker, Selector, UserSelector} from 'ui.form-elements.view';\nimport {Loc, Event, Tag, Type} from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport 'ui.icon-set.main';\nimport 'ui.icon-set.actions';\nimport {Section, Row, SeparatorRow} from 'ui.section';\nimport 'ui.forms';\nimport { SettingsSection, SettingsField, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\nimport { AnalyticSettingsEvent } from '../analytic';\n\nexport class CommunicationPage extends BaseSettingsPage\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_COMMUNICATION');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_COMMUNICATION');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'communication';\n\t}\n\n\tappendSections(contentNode: HTMLElement)\n\t{\n\t\tlet profileSection = this.#buildNewsFeedSection();\n\t\tprofileSection.renderTo(contentNode);\n\n\t\tlet chatSection = this.#buildChatSection();\n\t\tchatSection.renderTo(contentNode);\n\n\t\tif (this.hasValue('availableGeneralChannel'))\n\t\t{\n\t\t\tlet channelSection = this.#buildChannelSection();\n\t\t\tchannelSection.renderTo(contentNode);\n\t\t}\n\n\t\tlet diskSection = this.#buildDiskSection();\n\t\tdiskSection.renderTo(contentNode);\n\t}\n\n\t#buildNewsFeedSection(): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionFeed'))\n\t\t{\n\t\t\treturn ;\n\t\t}\n\t\tlet newsFeedSection = new Section(this.getValue('sectionFeed'));\n\n\t\tlet settingsSection = new SettingsSection({\n\t\t\tsection: newsFeedSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tif (this.hasValue('allow_livefeed_toall'))\n\t\t{\n\t\t\tlet allowPostFeedField = new Checker(this.getValue('allow_livefeed_toall'));\n\t\t\tallowPostFeedField.hideSeparator = true;\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: allowPostFeedField,\n\t\t\t});\n\t\t\tconst settingsRow = new SettingsRow({\n\t\t\t\tparent: settingsSection,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tlet userSelectorField = new UserSelector({\n\t\t\t\tinputName: 'livefeed_toall_rights[]',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS'),\n\t\t\t\tvalues: Object.values(this.getValue('arToAllRights')),\n\t\t\t\tenableDepartments: true,\n\t\t\t\tencodeValue: (value) => {\n\t\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : value.type + value.id.toString().split(':')[0];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\t\t\t\tdecodeValue: (value: string) => {\n\t\t\t\t\tif (value === 'UA')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: 'AU',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst arr = value.match(/^(U|DR|D)(\\d+)/);\n\n\t\t\t\t\tif (!Type.isArray(arr))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: arr[1],\n\t\t\t\t\t\tid: arr[2],\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t\tsettingsField = new SettingsField({\n\t\t\t\tfieldView: userSelectorField,\n\t\t\t});\n\n\t\t\tconst userSelectorRow = new Row({\n\t\t\t\tisHidden: !allowPostFeedField.isChecked(),\n\t\t\t\tclassName: 'ui-section__subrow',\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\trow: userSelectorRow,\n\t\t\t\tparent: settingsRow,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tallowPostFeedField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() => {\n\t\t\t\t\tif (allowPostFeedField.isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tuserSelectorRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tuserSelectorRow.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tif (this.hasValue('default_livefeed_toall'))\n\t\t{\n\t\t\tlet allowPostToAllField = new Checker(this.getValue('default_livefeed_toall'));\n\n\t\t\tCommunicationPage.addToSectionHelper(allowPostToAllField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('ratingTextLikeY'))\n\t\t{\n\t\t\tconst likeBtnNameField = new TextInputInline({\n\t\t\t\tinputName: this.getValue('ratingTextLikeY')?.name,\n\t\t\t\tlabel: this.getValue('ratingTextLikeY').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_LIKE_INPUT'),\n\t\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_TITLE_LIKE'),\n\t\t\t\tvalue: this.getValue('ratingTextLikeY')?.current,\n\t\t\t\tvalueColor: this.hasValue('ratingTextLikeY'),\n\t\t\t\thintDesc: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_DESC_LIKE'),\n\t\t\t});\n\t\t\tCommunicationPage.addToSectionHelper(likeBtnNameField, settingsSection);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildChatSection(): Section\n\t{\n\t\tif (!this.hasValue('sectionChats'))\n\t\t{\n\t\t\treturn ;\n\t\t}\n\n\t\tlet chatSection = new Section(this.getValue('sectionChats'));\n\n\t\tlet settingsSection = new SettingsSection({\n\t\t\tsection: chatSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tif (this.hasValue('general_chat_can_post'))\n\t\t{\n\t\t\tlet canPostGeneralChatField = new Checker(this.getValue('allow_post_general_chat'));\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: canPostGeneralChatField,\n\t\t\t});\n\t\t\tlet settingsRow = new SettingsRow({\n\t\t\t\tparent: settingsSection,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tlet canPostGeneralChatListField = new Selector(this.getValue('general_chat_can_post'));\n\t\t\tsettingsField = new SettingsField({\n\t\t\t\tfieldView: canPostGeneralChatListField,\n\t\t\t});\n\n\t\t\tlet canPostGeneralChatListRow = new Row({\n\t\t\t\tisHidden: !canPostGeneralChatField.isChecked(),\n\t\t\t\tclassName: 'ui-section__subrow --no-border',\n\t\t\t});\n\n\t\t\tCommunicationPage.addToSectionHelper(canPostGeneralChatListField, settingsRow, canPostGeneralChatListRow);\n\n\t\t\tlet managerSelectorField = new UserSelector({\n\t\t\t\tinputName: 'imchat_toall_rights[]',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS'),\n\t\t\t\tenableAll: false,\n\t\t\t\tvalues: Object.values(this.getValue('generalChatManagersList') ?? []),\n\t\t\t\tencodeValue: (value) => {\n\t\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : 'U' + value.id;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\t\t\t\tdecodeValue: (value) => {\n\t\t\t\t\tif (value === 'UA')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: 'AU',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst arr = value.match(/^(U)(\\d+)/);\n\n\t\t\t\t\tif (!Type.isArray(arr))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: arr[1],\n\t\t\t\t\t\tid: arr[2],\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tlet managerSelectorRow = new Row({\n\t\t\t\tcontent: managerSelectorField.render(),\n\t\t\t\tisHidden: this.getValue('general_chat_can_post').current !== 'MANAGER',\n\t\t\t\tclassName: 'ui-section__subrow --no-border',\n\t\t\t});\n\n\t\t\tCommunicationPage.addToSectionHelper(managerSelectorField, settingsRow, managerSelectorRow);\n\n\t\t\tconst separatorRow = new SeparatorRow({\n\t\t\t\tisHidden: this.getValue('general_chat_can_post').current !== 'MANAGER',\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: separatorRow,\n\t\t\t\tparent: settingsRow,\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tcanPostGeneralChatField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() => {\n\t\t\t\t\tif (canPostGeneralChatField.isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tcanPostGeneralChatListRow.show();\n\t\t\t\t\t\tif (canPostGeneralChatListField.getInputNode().value === 'MANAGER')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmanagerSelectorRow.show();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tseparatorRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcanPostGeneralChatListRow.hide();\n\t\t\t\t\t\tmanagerSelectorRow.hide();\n\t\t\t\t\t\tseparatorRow.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tcanPostGeneralChatListField.getInputNode()\n\t\t\t\t.addEventListener('change', (event) => {\n\t\t\t\t\tif (event.target.value === 'MANAGER')\n\t\t\t\t\t{\n\t\t\t\t\t\tmanagerSelectorRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tmanagerSelectorRow.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('general_chat_message_leave'))\n\t\t{\n\t\t\tlet leaveMessageField = new Checker(this.getValue('general_chat_message_leave'));\n\t\t\tCommunicationPage.addToSectionHelper(leaveMessageField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('general_chat_message_admin_rights'))\n\t\t{\n\t\t\tlet adminMessageField = new Checker(this.getValue('general_chat_message_admin_rights'));\n\t\t\tCommunicationPage.addToSectionHelper(adminMessageField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('url_preview_enable'))\n\t\t{\n\t\t\tlet allowUrlPreviewField = new Checker(this.getValue('url_preview_enable'));\n\t\t\tCommunicationPage.addToSectionHelper(allowUrlPreviewField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('create_overdue_chats'))\n\t\t{\n\t\t\tlet overdueChatsField = new Checker(this.getValue('create_overdue_chats'));\n\t\t\tCommunicationPage.addToSectionHelper(overdueChatsField, settingsSection);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildChannelSection(): Section\n\t{\n\t\tif (!this.hasValue('sectionChannels'))\n\t\t{\n\t\t\treturn ;\n\t\t}\n\n\t\tlet chatSection = new Section(this.getValue('sectionChannels'));\n\n\t\tlet settingsSection = new SettingsSection({\n\t\t\tsection: chatSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tif (this.hasValue('general_channel_can_post'))\n\t\t{\n\t\t\tlet canPostGeneralChannelField = new Checker(this.getValue('allow_post_general_channel'));\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: canPostGeneralChannelField,\n\t\t\t});\n\t\t\tlet settingsRow = new SettingsRow({\n\t\t\t\tparent: settingsSection,\n\t\t\t\tchild: settingsField,\n\t\t\t});\n\n\t\t\tlet canPostGeneralChannelListField = new Selector(this.getValue('general_channel_can_post'));\n\t\t\tsettingsField = new SettingsField({\n\t\t\t\tfieldView: canPostGeneralChannelListField,\n\t\t\t});\n\n\t\t\tlet canPostGeneralChannelListRow = new Row({\n\t\t\t\tisHidden: !canPostGeneralChannelField.isChecked(),\n\t\t\t\tclassName: 'ui-section__subrow --no-border',\n\t\t\t});\n\n\t\t\tCommunicationPage.addToSectionHelper(canPostGeneralChannelListField, settingsRow, canPostGeneralChannelListRow);\n\n\t\t\tlet managerSelectorField = new UserSelector({\n\t\t\t\tinputName: 'imchannel_toall_rights[]',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS_CHANNEL') ?? '',\n\t\t\t\tenableAll: false,\n\t\t\t\tvalues: Object.values(this.getValue('generalChannelManagersList') ?? []),\n\t\t\t\tencodeValue: (value) => {\n\t\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : 'U' + value.id;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\t\t\t\tdecodeValue: (value) => {\n\t\t\t\t\tif (value === 'UA')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: 'AU',\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst arr = value.match(/^(U)(\\d+)/);\n\n\t\t\t\t\tif (!Type.isArray(arr))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\tid: null,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: arr[1],\n\t\t\t\t\t\tid: arr[2],\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tlet managerSelectorRow = new Row({\n\t\t\t\tcontent: managerSelectorField.render(),\n\t\t\t\tisHidden: this.getValue('general_channel_can_post').current !== 'MANAGER',\n\t\t\t\tclassName: 'ui-section__subrow --no-border',\n\t\t\t});\n\n\t\t\tCommunicationPage.addToSectionHelper(managerSelectorField, settingsRow, managerSelectorRow);\n\n\t\t\tconst separatorRow = new SeparatorRow({\n\t\t\t\tisHidden: this.getValue('general_channel_can_post').current !== 'MANAGER',\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: separatorRow,\n\t\t\t\tparent: settingsRow,\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tcanPostGeneralChannelField.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() => {\n\t\t\t\t\tif (canPostGeneralChannelField.isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tcanPostGeneralChannelListRow.show();\n\t\t\t\t\t\tif (canPostGeneralChannelListField.getInputNode().value === 'MANAGER')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmanagerSelectorRow.show();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tseparatorRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcanPostGeneralChannelListRow.hide();\n\t\t\t\t\t\tmanagerSelectorRow.hide();\n\t\t\t\t\t\tseparatorRow.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tcanPostGeneralChannelListField.getInputNode()\n\t\t\t\t.addEventListener('change', (event) => {\n\t\t\t\t\tif (event.target.value === 'MANAGER')\n\t\t\t\t\t{\n\t\t\t\t\t\tmanagerSelectorRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tmanagerSelectorRow.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildDiskSection(): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionDisk'))\n\t\t{\n\t\t\treturn ;\n\t\t}\n\n\t\tlet diskSection = new Section(this.getValue('sectionDisk'));\n\n\t\tlet settingsSection = new SettingsSection({\n\t\t\tsection: diskSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tif (this.hasValue('DISK_VIEWER_SERVICE'))\n\t\t{\n\t\t\tlet fileViewerField = new Selector(this.getValue('DISK_VIEWER_SERVICE'));\n\t\t\tCommunicationPage.addToSectionHelper(fileViewerField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('DISK_LIMIT_PER_FILE'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE'\n\t\t\t)}</span>`;\n\t\t\tlet fileLimitField = new Selector({\n\t\t\t\tlabel: this.getValue('DISK_LIMIT_PER_FILE').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_MAX_FILE_LIMIT'),\n\t\t\t\thintTitle: this.getValue('DISK_LIMIT_PER_FILE').hintTitle,\n\t\t\t\tname: this.getValue('DISK_LIMIT_PER_FILE').name,\n\t\t\t\titems: this.getValue('DISK_LIMIT_PER_FILE').values,\n\t\t\t\thints: this.getValue('DISK_LIMIT_PER_FILE').hints,\n\t\t\t\tcurrent: this.getValue('DISK_LIMIT_PER_FILE').current,\n\t\t\t\tisEnable: this.getValue('DISK_LIMIT_PER_FILE').isEnable,\n\t\t\t\tbannerCode: 'limit_max_entries_in_document_history',\n\t\t\t\thelpDesk: 'redirect=detail&code=18869612',\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\n\t\t\tlet fileLimitRow = new Row({\n\t\t\t\tseparator: 'bottom',\n\t\t\t\tclassName: '--block',\n\t\t\t});\n\t\t\tif (!this.getValue('DISK_LIMIT_PER_FILE').isEnable)\n\t\t\t{\n\t\t\t\tEvent.bind(\n\t\t\t\t\tfileLimitField.getInputNode(),\n\t\t\t\t\t'click',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint(this.getValue('DISK_LIMIT_PER_FILE').name);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector(this.getValue('DISK_LIMIT_PER_FILE').name)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tCommunicationPage.addToSectionHelper(fileLimitField, settingsSection, fileLimitRow);\n\t\t}\n\n\t\tnew SettingsRow({\n\t\t\trow: new SeparatorRow(),\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tif (this.hasValue('disk_allow_edit_object_in_uf'))\n\t\t{\n\t\t\tlet allowEditDocField = new Checker(this.getValue('disk_allow_edit_object_in_uf'));\n\t\t\tlet allowEditDocRow = new Row({\n\t\t\t\tseparator: 'top',\n\t\t\t\tclassName: '--block',\n\t\t\t});\n\t\t\tCommunicationPage.addToSectionHelper(allowEditDocField, settingsSection, allowEditDocRow);\n\t\t}\n\n\t\tif (this.hasValue('disk_allow_autoconnect_shared_objects'))\n\t\t{\n\t\t\tlet connectDiskField = new Checker(this.getValue('disk_allow_autoconnect_shared_objects'));\n\t\t\tCommunicationPage.addToSectionHelper(connectDiskField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('disk_allow_use_external_link'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE'\n\t\t\t)}</span>`;\n\t\t\tlet publicLinkField = new Checker({\n\t\t\t\tinputName: this.getValue('disk_allow_use_external_link').inputName,\n\t\t\t\ttitle: this.getValue('disk_allow_use_external_link').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_PUBLIC_LINK'),\n\t\t\t\thintOn: this.getValue('disk_allow_use_external_link').hintOn,\n\t\t\t\tchecked: this.getValue('disk_allow_use_external_link').checked,\n\t\t\t\tisEnable: this.getValue('disk_allow_use_external_link').isEnable,\n\t\t\t\tbannerCode: 'limit_admin_share_link',\n\t\t\t\thelpDesk: this.getValue('disk_allow_use_external_link').helpDesk,\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\t\t\tif (!this.getValue('disk_allow_use_external_link').isEnable)\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\tpublicLinkField.switcher,\n\t\t\t\t\t'toggled',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint('disk_allow_use_external_link');\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector('enable_pub_link')\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tCommunicationPage.addToSectionHelper(publicLinkField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('disk_object_lock_enabled'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE'\n\t\t\t)}</span>`;\n\t\t\tlet enableBlockDocField = new Checker({\n\t\t\t\tinputName: this.getValue('disk_object_lock_enabled').inputName,\n\t\t\t\ttitle: this.getValue('disk_object_lock_enabled').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_BLOCK_DOC'),\n\t\t\t\thintOn: this.getValue('disk_object_lock_enabled').hintOn,\n\t\t\t\tchecked: this.getValue('disk_object_lock_enabled').checked,\n\t\t\t\tisEnable: this.getValue('disk_object_lock_enabled').isEnable,\n\t\t\t\tbannerCode: 'limit_document_lock',\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t\thelpDesk: this.getValue('disk_object_lock_enabled').helpDesk,\n\t\t\t});\n\t\t\tif (!this.getValue('disk_object_lock_enabled').isEnable)\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\tenableBlockDocField.switcher,\n\t\t\t\t\t'toggled',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint('disk_object_lock_enabled');\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector('disk_object_lock_enabled')\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tCommunicationPage.addToSectionHelper(enableBlockDocField, settingsSection);\n\t\t}\n\n\t\tif (this.hasValue('disk_allow_use_extended_fulltext'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT',\n\t\t\t\t{ '#TARIFF#': 'ent250'},\n\t\t\t)}</span>`;\n\t\t\tlet enableFindField = new Checker({\n\t\t\t\tinputName: this.getValue('disk_allow_use_extended_fulltext').inputName,\n\t\t\t\ttitle: this.getValue('disk_allow_use_extended_fulltext').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALLOW_SEARCH_DOC'),\n\t\t\t\thintOn: this.getValue('disk_allow_use_extended_fulltext').hintOn,\n\t\t\t\tchecked: this.getValue('disk_allow_use_extended_fulltext').checked,\n\t\t\t\tisEnable: this.getValue('disk_allow_use_extended_fulltext').isEnable,\n\t\t\t\tbannerCode: 'limit_in_text_search',\n\t\t\t\thelpDesk: this.getValue('disk_allow_use_extended_fulltext').helpDesk,\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\t\t\tif (!this.getValue('disk_allow_use_extended_fulltext').isEnable)\n\t\t\t{\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\tenableFindField.switcher,\n\t\t\t\t\t'toggled',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint('disk_allow_use_extended_fulltext');\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector('disk_allow_use_extended_fulltext')\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tCommunicationPage.addToSectionHelper(enableFindField, settingsSection);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n}\n","import { Loc, Tag, Text, Event } from 'main.core';\nimport { BaseSettingsElement } from \"ui.form-elements.field\";\nimport { TextInput } from 'ui.form-elements.view';\nimport { SettingsField } from 'ui.form-elements.field';\n\nexport type SiteTitleFieldType = {\n\tparent: BaseSettingsElement,\n\tsiteDomainOptions: SiteDomainType,\n};\n\nexport type SiteDomainType = {\n\thostname: string,\n\tsubDomainName: string,\n\tmainDomainName: string,\n\tisRenameable: boolean,\n\toccupiedDomains: Object,\n\tlabel: ?string,\n};\n\nexport class SiteDomainField extends SettingsField\n{\n\toptions: SiteDomainType;\n\n\t#content: HTMLElement;\n\t#title: TextInput;\n\n\tconstructor(params: SiteTitleFieldType)\n\t{\n\t\tconst options = params.siteDomainOptions;\n\t\tparams.fieldView = new TextInput({\n\t\t\tvalue: options.subDomainName,\n\t\t\tplaceholder: options.subDomainName,\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_SECTION_DOMAIN_NAME3'),\n\t\t\tid: 'subDomainName',\n\t\t\tinputName: 'subDomainName',\n\t\t\tisEnable: true,\n\t\t});\n\n\t\tsuper(params);\n\t\tthis.setParentElement(params.parent);\n\n\t\tthis.getFieldView().setEventNamespace(\n\t\t\tthis.getEventNamespace()\n\t\t);\n\t\tthis.getFieldView().getInputNode().setAttribute('autocomplete', 'off');\n\n\t\tlet timeout = null;\n\n\t\tEvent.bind(this.getFieldView().getInputNode(), 'input', () => {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(() => {\n\t\t\t\tthis.validateInput();\n\t\t\t}, 1000);\n\t\t});\n\n\t\tthis.options = {\n\t\t\thostname: options.hostname,\n\t\t\tsubDomainName: options.subDomainName,\n\t\t\tmainDomainName: options.mainDomainName,\n\t\t\tisRenameable: options.isRenameable,\n\t\t\toccupiedDomains: options.occupiedDomains,\n\t\t};\n\t\tthis.options.mainDomainName = ['.', this.options.mainDomainName].join('').replace('..', '.');\n\t}\n\n\tvalidateInput()\n\t{\n\t\tlet newDomain = this.getFieldView().getInputNode().value;\n\t\tnewDomain = newDomain.trim();\n\n\t\tif (newDomain.length < 3 || newDomain.length > 60)\n\t\t{\n\t\t\tthis.getFieldView().setErrors([Loc.getMessage('INTRANET_SETTINGS_DOMAIN_RENAMING_LENGTH_ERROR')]);\n\t\t}\n\t\telse if (!/^([a-zA-Z0-9]([a-zA-Z0-9\\\\-]{0,58})[a-zA-Z0-9])$/.test(newDomain))\n\t\t{\n\t\t\tthis.getFieldView().setErrors([Loc.getMessage('INTRANET_SETTINGS_DOMAIN_RENAMING_FORMAT_ERROR')]);\n\t\t}\n\t\telse if (this.options.occupiedDomains.includes(newDomain))\n\t\t{\n\t\t\tthis.getFieldView().setErrors([Loc.getMessage('INTRANET_SETTINGS_DOMAIN_RENAMING_DOMAIN_EXISTS_ERROR')]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getFieldView().cleanError();\n\t\t}\n\t}\n\n\tcancel(): void\n\t{\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tif (this.options.isRenameable !== true)\n\t\t{\n\t\t\tconst copyButton = Tag.render`<div class=\"settings-tools-description-link\">${Loc.getMessage('INTRANET_SETTINGS_COPY')}</div>`;\n\t\t\tBX.clipboard.bindCopyClick(copyButton, {text: () => {\n\t\t\t\t\treturn this.options.hostname;\n\t\t\t\t}})\n\t\t\t;\n\t\t\tthis.#content = Tag.render`\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t\t<div class=\"ui-section__field-label\">${Loc.getMessage('INTRANET_SETTINGS_SECTION_DOMAIN_NAME4')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-settings__domain_box\">\n\t\t\t\t\t\t<div class=\"intranet-settings__domain_name\">${Text.encode(this.options.hostname)}</div>\n\t\t\t\t\t\t${copyButton}\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#content = Tag.render`<div id=\"${this.getFieldView().getId()}\" class=\"ui-section__field-selector --no-border\">\n\t\t\t\t<div class=\"ui-section__field-container\">\n\t\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t\t<label class=\"ui-section__field-label\" for=\"${this.getFieldView().getName()}\">\n\t\t\t\t\t\t\t${this.getFieldView().getLabel()}\n\t\t\t\t\t\t</label> \n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-section__field-inner\">\n\t\t\t\t\t\t<div class=\"intarnet-settings__domain_inline-field\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-block\">\n\t\t\t\t\t\t\t\t${this.getFieldView().getInputNode()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intarnet-settings__domain_name\">${Text.encode(this.options.mainDomainName)}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${this.getFieldView().renderErrors()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t\t}\n\n\t\treturn this.#content;\n\t}\n}\n","import { Event, Loc, Tag, Dom, Type, Text } from 'main.core';\nimport type { SiteThemeOptions } from './site-theme-picker-field';\nimport type { SiteTitleInputType } from './site-title-field';\n\nexport function setPortalSettings(container: HTMLElement, portalSettings: SiteTitleInputType): void\n{\n\tconst logoNode = container.querySelector('[data-role=\"logo\"]');\n\tconst titleNode =  container.querySelector('[data-role=\"title\"]');\n\tconst logo24Node = container.querySelector('[data-role=\"logo24\"]');\n\n\tif (!logoNode.hasAttribute('data-prev-display'))\n\t{\n\t\tlogoNode.dataset.prevDisplay = logoNode.style.display;\n\t\ttitleNode.dataset.prevDisplay = titleNode.style.display;\n\t\tlogo24Node.dataset.prevDisplay = logo24Node.style.display;\n\t}\n\n\tif (Type.isUndefined(portalSettings.title) !== true)\n\t{\n\t\ttitleNode.innerHTML = Text.encode(Type.isStringFilled(portalSettings.title) ?\n\t\t\tportalSettings.title : 'Bitrix')\n\t\t;\n\t}\n\n\tif (Type.isUndefined(portalSettings.logo24) !== true)\n\t{\n\t\tif (Type.isStringFilled(portalSettings.logo24))\n\t\t{\n\t\t\tdelete logo24Node.dataset.visibility;\n\t\t\tif (logoNode.style.display === 'none')\n\t\t\t{\n\t\t\t\tlogo24Node.style.removeProperty('display');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlogo24Node.dataset.visibility = 'hidden';\n\t\t\tlogo24Node.style.display = 'none';\n\t\t}\n\t}\n\n\tif (Type.isUndefined(portalSettings.logo) !== true)\n\t{\n\t\tif (Type.isPlainObject(portalSettings.logo))\n\t\t{\n\t\t\tlogoNode.style.backgroundImage = 'url(\"' + encodeURI(portalSettings.logo.src) + '\")';\n\t\t\tlogoNode.style.removeProperty('display');\n\t\t\ttitleNode.style.display = 'none';\n\t\t\tlogo24Node.style.display = 'none';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlogoNode.style.display = 'none';\n\t\t\ttitleNode.style.removeProperty('display');\n\n\t\t\tif (logo24Node.dataset.visibility !== 'hidden')\n\t\t\t{\n\t\t\t\tlogo24Node.style.removeProperty('display');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlogo24Node.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function setPortalThemeSettings(container: HTMLElement, themeSettings: SiteThemeOptions): void\n{\n\tconst theme = Type.isPlainObject(themeSettings) ? themeSettings : {};\n\n\tconst lightning = String(theme.id).indexOf('dark:') === 0 ? 'dark' : 'light';\n\n\tDom.removeClass(container, '--light --dark');\n\tDom.addClass(container, '--' + lightning);\n\n\tif (Type.isStringFilled(theme.previewImage))\n\t{\n\t\tcontainer.style.backgroundImage = 'url(\"' + theme.previewImage + '\")';\n\t\tcontainer.style.backgroundSize = 'cover';\n\t}\n\telse\n\t{\n\t\tcontainer.style.removeProperty('backgroundImage');\n\t\tcontainer.style.removeProperty('backgroundSize');\n\t\tcontainer.style.background = 'none';\n\t}\n\n\tif (Type.isStringFilled(theme.previewColor))\n\t{\n\t\tcontainer.style.backgroundColor = theme.previewColor;\n\t}\n}\n","import { Event, Loc, Tag, Dom, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { SettingsField } from \"ui.form-elements.field\";\nimport { BaseField } from 'ui.form-elements.view';\nimport { Ears } from 'ui.ears'\nimport { setPortalSettings, setPortalThemeSettings } from './site-utils';\n\n\nexport type SiteThemeOptions = {\n\tid: string, //light:custom_123,\n\tcss: ?Array,\n\tprefetchImages: ?Array,\n\tpreviewImage:  ?string,\n\twidth:  number,\n\theight:  number,\n\tpreviewColor: string, // \"#004982\",\n\tstyle: string,\n\n\tdefault: ?boolean,\n\tresizable: boolean,\n\tremovable: boolean,\n};\n\nexport type SiteThemePickerOptions = {\n\ttheme: SiteThemeOptions,\n\tthemes: SiteThemeOptions[],\n\tbaseThemes: Object,\n\tajaxHandlerPath: string,\n\tallowSetDefaultTheme: boolean,\n\tisVideo: boolean,\n\tlabel: ?string\n};\n\nclass ThemePickerElement extends BaseField\n{\n\t#themePicker: BX.Intranet.Bitrix24.ThemePicker;\n\n\tconstructor(themePickerSettings: SiteThemePickerOptions)\n\t{\n\t\tsuper({\n\t\t\tinputName: 'themeId',\n\t\t\tisEnable: themePickerSettings.allowSetDefaultTheme,\n\t\t\tbannerCode: 'limit_office_background_to_all',\n\t\t});\n\t\tthis.#initThemePicker(themePickerSettings);\n\n\t\tthis.applyTheme();\n\t}\n\n\t#initThemePicker(themePickerSettings: SiteThemePickerOptions)\n\t{\n\t\tthis.#themePicker = new BX.Intranet.Bitrix24.ThemePicker(themePickerSettings);\n\t\tthis.#themePicker.setThemes(themePickerSettings.themes);\n\t\tthis.#themePicker.setBaseThemes(themePickerSettings.baseThemes);\n\t\tthis.#themePicker.applyThemeAssets = () => {};\n\t\tthis.#themePicker.getContentContainer = () => {\n\t\t\treturn this.render().querySelector('div[data-role=\"theme-container\"]');\n\t\t};\n\n\t\tconst closure = this.#themePicker.handleRemoveBtnClick.bind(this.#themePicker);\n\t\tthis.#themePicker.handleRemoveBtnClick = (event: Event) => {\n\t\t\tconst item = this.#themePicker.getItemNode(event);\n\t\t\tif (!item)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tclosure(event);\n\t\t\tthis.applyPortalThemePreview(this.#themePicker.getTheme(this.#themePicker.getThemeId()));\n\t\t\tthis.showSaveButton();\n\t\t\t//TODO Shift all <td>\n\t\t};\n\n\t\tconst handleItemClick = this.#themePicker.handleItemClick.bind(this.#themePicker);\n\t\tthis.#themePicker.handleItemClick = (event: Event) => {\n\t\t\thandleItemClick(event);\n\t\t\tthis.applyTheme(event);\n\t\t};\n\n\t\tconst addItem = this.#themePicker.addItem.bind(this.#themePicker);\n\t\tthis.#themePicker.addItem = (theme) => {\n\t\t\taddItem(theme);\n\t\t\tthis.applyPortalThemePreview(theme);\n\t\t\tthis.showSaveButton();\n\t\t}\n\t}\n\n\tapplyTheme(event: ?Event)\n\t{\n\t\tconst themeNode = event ? this.#themePicker.getItemNode(event) : null;\n\t\tlet themeSettings = themeNode ?\n\t\t\tthis.#themePicker.getTheme(themeNode.dataset.themeId)\n\t\t\t: this.#themePicker.getAppliedTheme()\n\t\t;\n\t\tthis.applyPortalThemePreview(themeSettings);\n\n\t\tif (event)\n\t\t{\n\t\t\tEventEmitter.emit(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t'BX.Intranet.Settings:ThemePicker:Change',\n\t\t\t\tthemeSettings\n\t\t\t);\n\n\t\t\tthis.showSaveButton();\n\t\t}\n\t}\n\n\tapplyPortalThemePreview(theme)\n\t{\n\t\tconst container = this.render().querySelector('[data-role=\"preview\"]');\n\t\tsetPortalThemeSettings(container, theme);\n\t\tthis.getInputNode().value = Type.isPlainObject(theme) ? theme['id'] : '';\n\t}\n\n\tshowSaveButton()\n\t{\n\t\tthis.getInputNode().disabled = false;\n\t\tthis.getInputNode().form.dispatchEvent(new window.Event('change'));\n\t}\n\n\tgetValue(): string\n\t{\n\t\treturn this.getInputNode().value;\n\t}\n\n\tgetInputNode(): HTMLInputElement\n\t{\n\t\treturn this.render().querySelector('input[name=\"themeId\"]');\n\t}\n\n\tapplyPortalSettings()\n\t{\n\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\tdocument.querySelector('.ui-side-panel-content').style.overflow = 'hidden';\n\n\t\tconst container = Tag.render`\n\t\t<div class=\"intranet-theme-settings ui-section__row\">\n\t\t\t<div class=\"ui-section__row theme-dialog-preview\">\n\t\t\t\t<section data-role=\"preview\" style=\"background-color: #0a51ae;\" class=\"intranet-settings__main-widget_section --preview\">\n\t\t\t\t\t<div class=\"intranet-settings__main-widget__bang\"></div>\n\t\t\t\t\t<aside class=\"intranet-settings__main-widget__aside\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item --active\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t</aside>\n\t\t\t\t\t<main class=\"intranet-settings__main-widget_main\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_header --with-logo\">\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_header_left\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_logo\" data-role=\"logo\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_name\" data-role=\"title\">Bitrix</div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_logo24\" data-role=\"logo24\">24</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_header_right\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_box\">\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_inline --space-between\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --sm\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --square\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_inner\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</main>\n\t\t\t\t\t<aside class=\"intranet-settings__main-widget__aside --right-side\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item --active\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t</aside>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t\t<div class=\"ui-section__row theme-dialog-content\" data-role=\"theme-container\"></div>\n\t\t\t<input type=\"hidden\" name=\"themeId\" value=\"\" disabled>\n\t\t</div>\n\t\t`;\n\t\tconst uploadBtn = Tag.render`\n\t\t\t<div class=\"intranet-settings__theme-btn_box\">\n\t\t\t\t<div class=\"intranet-settings__theme-btn\" onclick=\"${this.handleNewThemeButtonClick.bind(this)}\">${Loc.getMessage('INTRANET_SETTINGS_THEME_UPLOAD_BTN')}</div>\n\t\t\t</div>\n\t\t`;\n\t\tconst themeContainer = container.querySelector('div[data-role=\"theme-container\"]');\n\t\tArray.from(this.#themePicker.getThemes()).forEach((theme) => {\n\t\t\tconst itemNode = this.#themePicker.createItem(theme);\n\t\t\tif (this.#themePicker.canSetDefaultTheme() !== true)\n\t\t\t{\n\t\t\t\tEvent.unbindAll(itemNode, 'click');\n\t\t\t\tif (theme['default'] !== true)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(itemNode, '--restricted');\n\t\t\t\t\titemNode.appendChild(\n\t\t\t\t\t\tTag.render `<div class=\"intranet-settings__theme_lock_box\">${this.renderLockElement()}</div>`\n\t\t\t\t\t);\n\t\t\t\t\tEvent.bind(itemNode, 'click', this.showBanner.bind(this));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (theme['default'] === true)\n\t\t\t{\n\t\t\t\titemNode.setAttribute('data-role', 'ui-ears-active');\n\t\t\t}\n\t\t\tthemeContainer.appendChild(itemNode);\n\t\t});\n\t\t(new Ears({\n\t\t\tcontainer: themeContainer,\n\t\t\tnoScrollbar: false\n\t\t})).init();\n\n\t\tcontainer.appendChild(uploadBtn);\n\n\t\treturn container;\n\t}\n\n\thandleNewThemeButtonClick(event)\n\t{\n\t\tif (this.#themePicker.canSetDefaultTheme() !== true)\n\t\t{\n\t\t\treturn this.showBanner();\n\t\t}\n\t\tthis.#themePicker.getNewThemeDialog().show();\n\t}\n\n\thandleLockButtonClick()\n\t{\n\t\tif (BX.getClass(\"BX.UI.InfoHelper\"))\n\t\t{\n\t\t\tBX.UI.InfoHelper.show(\"limit_office_background_to_all\");\n\t\t}\n\t}\n}\n\nexport class SiteThemePickerField extends SettingsField\n{\n\t#fieldView: ThemePickerElement;\n\n\tconstructor(params)\n\t{\n\t\tparams.fieldView = new ThemePickerElement(params.themePickerSettings);\n\t\tsuper(params);\n\n\t\tif (params.portalSettings)\n\t\t{\n\t\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\n\n\t\t\tsetPortalSettings(this.getFieldView().render(), params.portalSettings);\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\t\tsetPortalSettings(this.getFieldView().render(), baseEvent.getData());\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n}\n","import {Dom, Event, Loc, Runtime, Tag} from 'main.core';\nimport { SettingsField, BaseSettingsElement } from \"ui.form-elements.field\";\nimport { TextInput } from \"ui.form-elements.view\";\n\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { StackWidget } from 'ui.uploader.stack-widget';\nimport { SiteThemePickerOptions } from './site-theme-picker-field';\nimport {Loader} from \"main.loader\";\n\nexport type SiteLogoOptions = {\n\tid: string,\n\tsrc: string,\n\twidth: number,\n\theight: number\n};\n\nexport type SiteLogoFieldType = {\n\tparent: BaseSettingsElement,\n\tsiteLogoLabel: ?string,\n\tsiteLogoOptions: ?SiteLogoOptions,\n\tcanUserEditLogo: boolean\n};\n\n\nclass HiddenInput extends TextInput\n{\n\tconstructor(params)\n\t{\n\t\tsuper({\n\t\t\tinputName: 'logo',\n\t\t\tisEnable: params.isEnable,\n\t\t\tdefaultValue: 'default',\n\t\t\tbannerCode: 'limit_admin_logo',\n\t\t\thelpDeskCode: 123,\n\t\t\thelpMessageProvider: () => {}\n\t\t});\n\t\tthis.getInputNode().type = 'hidden';\n\t\tthis.getInputNode().disabled = true;\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\treturn this.getInputNode();\n\t}\n}\n\nexport class SiteLogoField extends SettingsField\n{\n\t#content: HTMLElement;\n\t#uploader: StackWidget;\n\t#siteLogo: ?SiteLogoOptions;\n\n\t#hiddenContainer: HTMLElement;\n\t#hiddenRemoveInput: HTMLElement;\n\n\t#loader: Loader;\n\n\tconstructor(params: SiteLogoFieldType)\n\t{\n\t\tparams.fieldView = new HiddenInput({\n\t\t\tisEnable: params.canUserEditLogo,\n\t\t});\n\t\tsuper(params);\n\t\tthis.#siteLogo = params.siteLogoOptions;\n\t\tthis.siteLogoLabel = params.siteLogoLabel;\n\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\t}\n\n\tinitUploader({TileWidget, StackWidget, StackWidgetSize}): this\n\t{\n\t\tconst defaultOptions = {\n\t\t\tmaxFileCount: 1,\n\t\t\tacceptOnlyImages: true,\n\t\t\tmultiple: false,\n\t\t\tacceptedFileTypes: ['image/png'],\n\t\t\tevents: {\n\t\t\t\t'onError': function(event) {\n\t\t\t\t\tconsole.error('File Uploader onError', event.getData().error);\n\t\t\t\t},\n\t\t\t\t'File:onError': this.onFileError.bind(this),\n\t\t\t\t'File:onAdd': this.onLogoAdd.bind(this),\n\t\t\t\t'File:onRemove': this.onLogoRemove.bind(this),\n\t\t\t\t'onBeforeFilesAdd': this.getFieldView().isEnable() ? () => {\n\t\t\t\t} : (event: BaseEvent) => {\n\t\t\t\t\tthis.getFieldView().showBanner();\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tallowReplaceSingle: true,\n\t\t\thiddenFieldName: 'logo_file',\n\t\t\thiddenFieldsContainer: this.#getFileContainer(),\n\t\t\tassignAsFile: true,\n\n\t\t\t// imageMaxWidth: 444,\n\t\t\t// imageMaxHeight: 110,\n\n\t\t\t// imageMaxFileSize?: number,\n\t\t\t// imageMinFileSize?: number,\n\n\t\t\timageResizeWidth: 444,\n\t\t\timageResizeHeight: 110,\n\t\t\timageResizeMode: 'contain',\n\t\t\timageResizeMimeType: 'image/png',\n\n\t\t\timagePreviewWidth: 444,\n\t\t\timagePreviewHeight: 110,\n\t\t\timagePreviewResizeMode: 'contain',\n\n\t\t\t// serverOptions: ServerOptions,\n\t\t\t// filters?: Array<{ type: FilterType, filter: Filter | Function | string, options: { [key: string]: any } }>,\n\t\t\tfiles: this.#siteLogo ? [\n\t\t\t\t[1, {\n\t\t\t\t\tserverFileId: this.#siteLogo.id,\n\t\t\t\t\tserverId: this.#siteLogo.id,\n\t\t\t\t\ttype: 'image/png',\n\n\t\t\t\t\twidth: this.#siteLogo.width,\n\t\t\t\t\theight: this.#siteLogo.height,\n\t\t\t\t\ttreatImageAsFile: true,\n\t\t\t\t\tdownloadUrl: this.#siteLogo.src,\n\n\t\t\t\t\tserverPreviewUrl: this.#siteLogo.src,\n\t\t\t\t\tserverPreviewWidth: this.#siteLogo.width,\n\t\t\t\t\tserverPreviewHeight: this.#siteLogo.height,\n\n\t\t\t\t\tsrc: this.#siteLogo.src,\n\t\t\t\t\tpreload: true\n\t\t\t\t}]\n\t\t\t] : null,\n\t\t};\n\t\tthis.#uploader = new StackWidget(defaultOptions, {size: StackWidgetSize.LARGE });\n\t\treturn this;\n\t}\n\n\tonFileError(event): void\n\t{\n\t\tconsole.error('File Error', event.getData().error);\n\t\tEventEmitter.subscribeOnce(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':onAfterShowPage',\n\t\t\tthis.removeFailedLogo.bind(this),\n\t\t);\n\n\t\tconst tabField = this.getParentElement();\n\n\t\tif (tabField)\n\t\t{\n\t\t\tEventEmitter.subscribeOnce(\n\t\t\t\ttabField.getFieldView(),\n\t\t\t\t'onActive',\n\t\t\t\tthis.removeFailedLogo.bind(this),\n\t\t\t);\n\t\t}\n\t}\n\n\tremoveFailedLogo(): void\n\t{\n\t\tconst logo = this.#uploader.getUploader().getFiles()[0];\n\n\t\tif (logo && logo.isLoadFailed())\n\t\t{\n\t\t\tthis.#uploader.getUploader().removeFiles();\n\t\t}\n\t}\n\n\tonLogoAdd(event: BaseEvent)\n\t{\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\tnew BaseEvent({ data: { logo: { src: event.getData().file.getClientPreviewUrl() } } })\n\t\t);\n\n\t\tthis.getFieldView().getInputNode().disabled = false;\n\t\tthis.getFieldView().getInputNode().value = 'add';\n\t\tthis.getFieldView().getInputNode().form.dispatchEvent(new window.Event('change'));\n\t}\n\n\tonLogoRemove(event: BaseEvent)\n\t{\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\tnew BaseEvent({ data: { logo: null } })\n\t\t);\n\t\tthis.getFieldView().getInputNode().disabled = false;\n\t\tthis.getFieldView().getInputNode().value = 'remove';\n\t\tthis.getFieldView().getInputNode().form.dispatchEvent(new window.Event('change'));\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn 'logo';\n\t}\n\n\tcancel(): void\n\t{\n\t}\n\n\t#getFileContainer(): HTMLElement\n\t{\n\t\tif (!this.#hiddenContainer)\n\t\t{\n\t\t\tthis.#hiddenContainer = document.createElement('div');\n\t\t}\n\t\treturn this.#hiddenContainer;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tthis.#content = Tag.render`<div></div>`;\n\t\tthis.#showLoader();\n\n\t\tRuntime\n\t\t\t.loadExtension('ui.uploader.stack-widget')\n\t\t\t.then((exports) => {\n\t\t\t\tthis.initUploader(exports);\n\t\t\t\tthis.#renderAfterLoad();\n\t\t\t\tthis.#removeLoader();\n\t\t\t});\n\n\t\treturn this.#content;\n\t}\n\n\t#renderAfterLoad(): void\n\t{\n\t\tconst uploaderContent = Tag.render`<div></div>`;\n\t\tconst content = Tag.render`<div>\n\t\t\t\t<div class=\"ui-section__field-label\">${this.siteLogoLabel ?? Loc.getMessage('INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE1')}</div>\n\t\t\t\t${uploaderContent}\n\t\t\t\t<div class=\"ui-section__field-label\">${Loc.getMessage('INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE2')}</div>\n\t\t\t\t${this.getFieldView().getInputNode()}\n\t\t\t\t${this.#getFileContainer()}\n\t\t\t\t${this.getFieldView().renderErrors()}\n\t\t\t</div>`\n\t\t;\n\t\tthis.#uploader.renderTo(uploaderContent);\n\t\tDom.replace(this.#content, content);\n\t}\n\n\t#showLoader()\n\t{\n\t\tthis.#loader = new Loader({\n\t\t\ttarget: this.#content,\n\t\t\tcolor: 'rgba(82, 92, 105, 0.9)',\n\t\t\tmode: 'inline'\n\t\t});\n\t\tthis\n\t\t\t.#loader\n\t\t\t.show()\n\t\t\t.then(() => {\n\t\t\t\tconsole.log('The loader is shown')\n\t\t\t})\n\t\t;\n\t}\n\n\t#removeLoader()\n\t{\n\t\tif (this.#loader)\n\t\t{\n\t\t\tthis.#loader.destroy();\n\t\t\tthis.#loader = null;\n\t\t}\n\t}\n}\n","import { Tag } from 'main.core';\nimport {EventEmitter, BaseEvent} from \"main.core.events\";\nimport { setPortalSettings, setPortalThemeSettings } from './site-utils';\n\nexport class SiteTitlePreviewWidget extends EventEmitter\n{\n\t#container: HTMLElement\n\n\tconstructor(portalSettings, portalThemeSettings)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\n\t\tsetPortalSettings(this.render(), portalSettings);\n\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\tthis.onChange.bind(this)\n\t\t);\n\n\t\tif (portalThemeSettings)\n\t\t{\n\t\t\tsetPortalThemeSettings(this.render(), portalThemeSettings?.theme);\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\tthis.getEventNamespace() + ':ThemePicker:Change',\n\t\t\t\tthis.onSetTheme.bind(this)\n\t\t\t);\n\t\t}\n\t}\n\n\tonChange(event: BaseEvent)\n\t{\n\t\tsetPortalSettings(this.render(), event.getData());\n\t}\n\n\tonSetTheme(baseEvent: BaseEvent)\n\t{\n\t\tsetPortalThemeSettings(this.render(), baseEvent.getData())\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (!this.#container)\n\t\t{\n\t\t\tthis.#container = Tag.render`\n\t\t\t<section class=\"intranet-settings__main-widget_section\">\n\t\t\t\t<div class=\"intranet-settings__main-widget__bang\"></div>\n\t\t\t\t\t<div class=\"intranet-settings__main-widget_bg\"></div>\n\t\t\t\t\t<div class=\"intranet-settings__main-widget_pos-box\">\n\t\t\t\t\t\t<aside class=\"intranet-settings__main-widget__aside\">\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item --active\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget__aside_item\"></div>\n\t\t\t\t\t\t</aside>\n\t\t\t\t\t\t<main class=\"intranet-settings__main-widget_main\">\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_header\"> \n\t\t\t\t\t\t<!-- statement class. depends of content --with-logo -->\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_logo\" data-role=\"logo\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_name\" data-role=\"title\">Bitrix</div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_logo24\" data-role=\"logo24\">24</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_box\">\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_inline\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --sm\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_inner\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__main-widget_lane_item --bg-30\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</main>\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t</section>`;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n}\n","import { BaseEvent, EventEmitter } from 'main.core.events';\nimport { AnalyticSettingsEvent } from '../analytic';\nimport { SiteTitleField } from '../fields/site-title-field';\nimport { SiteDomainField } from '../fields/site-domain-field';\nimport { SiteLogoField } from '../fields/site-logo-field';\nimport { SettingsSection, SettingsRow, TabsField, TabField, SettingsField, BaseSettingsPage } from 'ui.form-elements.field';\nimport { TextInput } from 'ui.form-elements.view';\nimport { SiteTitlePreviewWidget } from '../fields/site-title-preview-widget';\nimport { SiteThemePickerField } from '../fields/site-theme-picker-field';\nimport { setPortalSettings, setPortalThemeSettings } from '../fields/site-utils';\n\nimport { Tag, Loc, Runtime, Text, Dom, Type, Event } from 'main.core';\nimport 'ui.icon-set.main';\nimport 'ui.icon-set.actions';\n\nimport 'ui.icon-set.social';\nimport {Section, Row, SeparatorRow} from 'ui.section';\nimport 'ui.forms';\nimport { Alert, AlertColor, AlertSize } from 'ui.alerts';\n\nimport type { SiteDomainType } from '../fields/site-domain-field';\nimport type {SiteTitleInputType, SiteTitleLabelType} from '../fields/site-title-field';\nimport type { SiteThemeOptions, SiteThemePickerOptions } from '../fields/site-theme-picker-field';\n\nexport class PortalPage extends BaseSettingsPage\n{\n\tconstructor() {\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_PORTAL');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_PORTAL');\n\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':Portal:Change',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tif (!Type.isNil(baseEvent.data.title))\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigPortal(AnalyticSettingsEvent.CHANGE_PORTAL_NAME);\n\t\t\t\t}\n\t\t\t\telse if (!Type.isNil(baseEvent.data.logo))\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigPortal(AnalyticSettingsEvent.CHANGE_PORTAL_LOGO);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\t//BX.Intranet.Settings:ThemePicker:Change\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\tthis.getEventNamespace() + ':ThemePicker:Change',\n\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\tthis.getAnalytic()?.addEventConfigPortal(AnalyticSettingsEvent.CHANGE_PORTAL_THEME);\n\t\t\t}\n\t\t);\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'portal';\n\t}\n\n\theaderWidgetRender()\n\t{\n\t\treturn '';\n\t\t// It is used to return #headerWidgetRenderAlternative;\n\t}\n\n\t//TODO delete after autumn 2023\n\t#headerWidgetRenderAlternative()\n\t{\n\t\tif (!this.hasValue('portalSettings'))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst portalSettings = this.getValue('portalSettings');\n\t\tconst portalThemeSettings = this.getValue('portalThemeSettings');\n\t\tconst portalDomainSettings = this.getValue('portalDomainSettings');\n\n\t\tconst container = Tag.render`\n\t\t<div class=\"intranet-settings__header-widget_box\">\n\t\t\t<div class=\"intranet-settings__header-widget_main\">\n\t\t\t\t<div class=\"intranet-settings__header-widget_icon\" data-role=\"logo\"></div>\n\t\t\t\t<div class=\"intranet-settings__header-widget_name\" data-role=\"title\">Bitrix</div>\n\t\t\t\t<div class=\"intranet-settings__header-widget_logo24\" data-role=\"logo24\">24</div>\n\t\t\t</div>\n\t\t\t<div class=\"intranet-settings__header-widget__link_box\">\n\t\t\t\t<div class=\"intranet-settings__header-widget__link_value\">${Text.encode(portalDomainSettings.hostname)}</div>\n\t\t\t\t<div data-role=\"copy\" class=\"ui-icon-set --link-3 intranet-settings__header-widget__link_btn\"></div>\n\t\t\t</div>\n\t\t</div>`;\n\n\t\tsetPortalSettings(container, portalSettings);\n\t\tsetPortalThemeSettings(container, portalThemeSettings?.theme);\n\n\t\tconst copyButton = container.querySelector('[data-role=\"copy\"]');\n\t\tBX.clipboard.bindCopyClick(copyButton, {text: () => {\n\t\t\t\treturn portalDomainSettings.hostname;\n\t\t\t}})\n\t\t;\n\n\t\treturn container;\n\t}\n\n\tgetSections(): SettingsSection[]\n\t{\n\t\treturn [\n\t\t\tthis.buildSiteTitleSection(\n\t\t\t\tthis.getValue('portalSettings'), this.getValue('portalThemeSettings'), this.getValue('portalSettingsLabels')\n\t\t\t),\n\t\t\tthis.getValue('portalDomainSettings') ?\n\t\t\t\tthis.buildDomainSection(this.getValue('portalDomainSettings')) : null,\n\t\t\tthis.buildThemeSection(this.getValue('portalThemeSettings'), this.getValue('portalSettings'))\n\t\t].filter((section) => section instanceof SettingsSection);\n\t}\n\n\tbuildSiteTitleSection(portalSettings: SiteTitleInputType, portalThemeSettings: SiteThemePickerOptions, portalSettingsLabels: SiteTitleLabelType): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionCompanyTitle'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst sectionView = new Section(this.getValue('sectionCompanyTitle'));\n\n\t\tconst sectionField = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: sectionView,\n\t\t});\n\t\t// 1. This is a description on blue box\n\t\tsectionView.append(\n\t\t\t(new Row({\n\t\t\t\tcontent: (new Alert({\n\t\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_DESCRIPTION'),\n\t\t\t\t\tinline: true,\n\t\t\t\t\tsize: AlertSize.SMALL,\n\t\t\t\t\tcolor: AlertColor.PRIMARY,\n\t\t\t\t})).getContainer(),\n\t\t\t})).render())\n\t\t;\n\n\t\t//region 2. Tabs\n\t\tconst siteLogoRow = new SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tclassName: 'intranet-settings__grid_box',\n\t\t\t}),\n\t\t\tparent: sectionField,\n\t\t});\n\n\t\tconst previewWidget = new SiteTitlePreviewWidget(portalSettings, portalThemeSettings);\n\t\tconst tabsRow = new SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tclassName: 'intranet-settings__site-logo_subrow --no-padding --bottom-separator --block',\n\t\t\t}),\n\t\t\tparent: siteLogoRow,\n\t\t});\n\n\t\tconst tabsField = new TabsField({parent: tabsRow});\n\t\t// 2.1 Tab Site name\n\t\tconst siteTitleTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: this.getValue('tabCompanyTitle')\n\t\t});\n\n\t\tconst siteTitleRow = new Row({});\n\n\t\tconst siteTitleField = new SiteTitleField({\n\t\t\tparent: siteTitleRow,\n\t\t\tsiteTitleOptions: portalSettings,\n\t\t\tsiteTitleLabels: portalSettingsLabels,\n\t\t\thelpMessages: {\n\t\t\t\tsite: this.helpMessageProviderFactory(),\n\t\t\t}\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\trow: siteTitleRow,\n\t\t\tparent: siteTitleTab,\n\t\t\tchild: siteTitleField,\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\tparent: siteTitleTab,\n\t\t\tchild: siteTitleField.getLogo24Field(),\n\t\t});\n\n\t\tconst siteLogoTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: this.getValue('tabCompanyLogo')\n\t\t});\n\n\t\tconst siteLogoField = new SiteLogoField({\n\t\t\tsiteLogoLabel: this.getValue('portalSettingsLabels').logo,\n\t\t\tsiteLogoOptions: this.getValue('portalSettings').logo,\n\t\t\tcanUserEditLogo: this.getValue('portalSettings').canUserEditLogo,\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\tparent: siteLogoTab,\n\t\t\tchild: siteLogoField,\n\t\t});\n\n\t\ttabsField.activateTab(siteTitleTab);\n\t\t// 2.2 Widget\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: previewWidget.render(),\n\t\t\t\tclassName: 'intranet-settings__site-logo_subrow --no-padding',\n\t\t\t}),\n\t\t\tparent: siteLogoRow,\n\t\t});\n\n\t\t// 2.3 site_name\n\n\t\tnew SettingsRow({\n\t\t\trow: new SeparatorRow(),\n\t\t\tparent: sectionField,\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\tparent: sectionField,\n\t\t\tchild: new SettingsField({\n\t\t\t\tfieldView: (new TextInput({\n\t\t\t\t\tinputName: 'name',\n\t\t\t\t\tlabel: this.getValue('portalSettingsLabels').name,\n\t\t\t\t\tvalue: this.getValue('portalSettings').name,\n\t\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COMPANY_TITLE'),\n\t\t\t\t\tinputDefaultWidth: true,\n\t\t\t\t})),\n\t\t\t}),\n\t\t});\n\n\t\t//endregion\n\t\treturn sectionField;\n\t}\n\n\t#getOwnDomainTabBody(domainSettings): HTMLElement\n\t{\n\t\tconst copyButton = Tag.render`<div class=\"ui-icon-set --copy-plates intranet-settings__domain__list_btn\"></div>`;\n\t\tBX.clipboard.bindCopyClick(copyButton, {text: () => {\n\t\t\t\treturn Loc.getMessage('INTRANET_SETTINGS_OWN_DOMAIN_HELP_DNS').replaceAll('<br>', \"\\n\");\n\t\t\t}});\n\n\t\tconst res = Tag.render\n\t\t\t`<div class=\"intranet-settings__domain__list_box\">\n\t\t\t\t\t\t<ul class=\"intranet-settings__domain__list\">\n\t\t\t\t\t\t\t<li class=\"intranet-settings__domain__list_item\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_OWN_DOMAIN_HELP1')}\n\t\t\t\t\t\t\t\t<div class=\"intranet-settings__domain_box\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_OWN_DOMAIN_HELP_DNS')}\n\t\t\t\t\t\t\t\t\t${copyButton}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"intranet-settings__domain__list_item\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_OWN_DOMAIN_HELP2')}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"intranet-settings__domain__list_item\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_OWN_DOMAIN_HELP3')}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<a target=\"_blank\" href=\"/settings/support.php\" class=\"settings-tools-description-link\">${Loc.getMessage('INTRANET_SETTINGS_WRITE_TO_SUPPORT')}</a>\n\t\t\t\t\t</div>`;\n\n\t\tif (domainSettings.isCustomizable !== true)\n\t\t{\n\t\t\tEvent.bind(res.querySelector('a.settings-tools-description-link'), 'click', (event) => {\n\t\t\t\tBX.UI.InfoHelper.show('limit_office_own_domain');\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn false;\n\t\t\t})\n\t\t}\n\t\treturn res;\n\t}\n\n\tbuildDomainSection(domainSettings: SiteDomainType): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionSiteDomain'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst sectionView = new Section(this.getValue('sectionSiteDomain'));\n\n\t\tconst sectionField = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: sectionView\n\t\t});\n\t\t// 1. This is a description on blue box\n\t\tsectionView.append(\n\t\t\t(new Row({\n\t\t\t\tcontent: (new Alert({\n\t\t\t\t\ttext: `\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_SITE_DOMAIN_DESCRIPTION')}\n\t\t\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=18213298')\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t`,\n\t\t\t\t\tinline: true,\n\t\t\t\t\tsize: AlertSize.SMALL,\n\t\t\t\t\tcolor: AlertColor.PRIMARY,\n\t\t\t\t})).getContainer(),\n\t\t\t})).render())\n\t\t;\n\n\t\tconst tabsRow = new SettingsRow({\n\t\t\tparent: sectionField,\n\t\t});\n\n\t\t//region 2. Tabs\n\t\tconst tabsField = new TabsField({parent: tabsRow});\n\t\t// 2.1 Tab Site name\n\t\tconst firstTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: this.getValue('tabDomainPrefix')\n\t\t});\n\n\t\tconst siteDomainField = new SiteDomainField({\n\t\t\tsiteDomainOptions: domainSettings,\n\t\t\thelpMessages: {\n\t\t\t\tsite: this.helpMessageProviderFactory(),\n\t\t\t}\n\t\t});\n\t\tEvent.bind(siteDomainField.getFieldView().getInputNode(), 'keydown', () => {\n\t\t\tthis.getAnalytic()?.addEventConfigPortal(AnalyticSettingsEvent.CHANGE_PORTAL_SITE);\n\t\t});\n\n\t\tconst firstTabRow = new Row({\n\t\t\tcontent: siteDomainField.render(),\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\trow: firstTabRow,\n\t\t\tparent: firstTab,\n\t\t\tchild: siteDomainField,\n\t\t});\n\n\t\tconst secondTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: this.getValue('tabDomain')\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: this.#getOwnDomainTabBody(domainSettings),\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: secondTab\n\t\t});\n\n\t\ttabsField.activateTab(firstTab);\n\t\t//endregion\n\n\t\treturn sectionField;\n\t}\n\n\tbuildThemeSection(themePickerSettings: SiteThemePickerOptions, portalSettings: ?SiteTitleInputType): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionSiteTheme'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst sectionView = new Section(this.getValue('sectionSiteTheme'));\n\n\t\tconst sectionField = new SettingsSection({\n\t\t\tsection: sectionView,\n\t\t\tparent: this,\n\t\t});\n\n\t\t// 1. This is a description on blue box\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: (new Alert({\n\t\t\t\t\ttext: `\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_PORTAL_THEME_DESCRIPTION')}\n\t\t\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=18325288')\">\n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t`,\n\t\t\t\t\tinline: true,\n\t\t\t\t\tsize: AlertSize.SMALL,\n\t\t\t\t\tcolor: AlertColor.PRIMARY,\n\t\t\t\t})).getContainer(),\n\t\t\t}),\n\t\t\tparent: sectionField\n\t\t});\n\n\t\t// 2. This is a theme picker\n\t\tnew SiteThemePickerField({\n\t\t\tparent: sectionField,\n\t\t\tportalSettings,\n\t\t\tthemePickerSettings\n\t\t});\n\n\t\treturn sectionField;\n\t}\n}\n","import { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Loc, Tag } from 'main.core';\n\nexport default class PortalDeleteFormTypes {\n\tstatic WARNING = '--warning';\n\tstatic DANGER = '--danger';\n}\n\nexport class PortalDeleteForm extends EventEmitter\n{\n\t#container: ?HTMLElement;\n\tconfirmButton;\n\tbodyClass: string;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.Settings:PortalDeleteForm');\n\t}\n\n\tgetDescription(): HTMLElement\n\t{\n\t\tconst moreDetails = `\n\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=19566456')\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t</a>\n\t\t`;\n\n\t\treturn Tag.render`\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL', {\n\t\t\t\t'#MORE_DETAILS#': moreDetails,\n\t\t\t})}\n\t\t`;\n\t}\n\n\tgetBodyClass(): string\n\t{\n\t\treturn PortalDeleteFormTypes.DANGER;\n\t}\n\n\tgetConfirmButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL');\n\t}\n\n\tgetInputContainer() {}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (!this.#container)\n\t\t{\n\t\t\tthis.#container = Tag.render`\n\t\t\t\t<div class=\"intranet-settings__portal-delete-form_wrapper ${this.getBodyClass()}\">\n\t\t\t\t\t<div class=\"intranet-settings__portal-delete-form_body\">\n\t\t\t\t\t\t<div class=\"intranet-settings__portal-delete-icon-wrapper\">\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --warning\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-settings__portal-delete-form_description-wrapper\">\n\t\t\t\t\t\t\t<span class=\"intranet-settings__portal-delete-form_description\">\n\t\t\t\t\t\t\t\t${this.getDescription()}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t${this.getInputContainer()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getButtonContainer()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\tonConfirmEventHandler(): void\n\t{\n\t\tthis.sendChangeFormEvent('checkword')\n\t}\n\n\tsendChangeFormEvent(type: ?string): void\n\t{\n\t\tthis.emit(\n\t\t\t'updateForm',\n\t\t\tnew BaseEvent({data: { type: type ?? null } })\n\t\t);\n\t}\n\n\tgetButtonContainer(): ?HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"intranet-settings__portal-delete-form_buttons-wrapper\">\n\t\t\t\t${this.getConfirmButton().getContainer()}\n\t\t\t\t${this.getCancelButton().getContainer()}\n\t\t\t</span>\n\t\t`;\n\t}\n\n\tgetConfirmButton(): BX.UI.Button\n\t{\n\t\tif (!this.confirmButton)\n\t\t{\n\t\t\tthis.confirmButton = new BX.UI.Button({\n\t\t\t\ttext: this.getConfirmButtonText() ?? '',\n\t\t\t\tnoCaps: true,\n\t\t\t\tround: true,\n\t\t\t\tclassName: '--confirm',\n\t\t\t\tevents: {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tthis.onConfirmEventHandler();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tprops: {\n\t\t\t\t\t'data-bx-role': 'delete-portal-confirm',\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\treturn this.confirmButton;\n\t}\n\n\tgetCancelButton(): BX.UI.Button\n\t{\n\t\treturn new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_CANCEL_ACTION_DELETE_PORTAL'),\n\t\t\tnoCaps: true,\n\t\t\tround: true,\n\t\t\tclassName: '--cancel',\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.emit('closeForm');\n\t\t\t\t}\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\t'data-bx-role': 'delete-portal-cancel',\n\t\t\t},\n\t\t});\n\t}\n}","import { PortalDeleteForm } from './portal-delete-form';\nimport {ajax, Loc, Tag} from 'main.core';\nimport PortalDeleteFormTypes from './portal-delete-form';\n\nexport class PortalDeleteFormEmployee extends PortalDeleteForm\n{\n\t#isFreeLicense: boolean;\n\n\tconstructor(isFreeLicense: boolean) {\n\t\tsuper();\n\t\tthis.#isFreeLicense = isFreeLicense;\n\t}\n\n\tgetDescription(): HTMLElement\n\t{\n\t\tconst moreDetails = `\n\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=19566456')\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t</a>\n\t\t`;\n\n\t\treturn Tag.render`\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_EMPLOYEE', {\n\t\t\t\t'#MORE_DETAILS#': moreDetails\n\t\t\t})}\n\t\t`;\n\t}\n\n\tgetBodyClass(): string\n\t{\n\t\treturn PortalDeleteFormTypes.WARNING;\n\t}\n\n\tgetConfirmButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL_FIRE_EMPLOYEE');\n\t}\n\n\tonConfirmEventHandler(): void\n\t{\n\t\tthis.getConfirmButton().setWaiting(true);\n\n\t\tBX.SidePanel.Instance.open('/company/?apply_filter=Y&FIRED=N',{\n\t\t\tevents: {\n\t\t\t\tonCloseComplete: () => {\n\t\t\t\t\tajax.runAction('bitrix24.portal.getActiveUserCount')\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tthis.getConfirmButton().setWaiting(false);\n\n\t\t\t\t\t\t\tif (response.data <= 1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.sendChangeFormEvent(this.#isFreeLicense ? 'default' : 'mail');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((reject) => {\n\t\t\t\t\t\t\tthis.getConfirmButton().setWaiting(false);\n\t\t\t\t\t\t\treject.errors.forEach((error) => {\n\t\t\t\t\t\t\t\tconsole.log(error.message);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}","import { PortalDeleteForm } from './portal-delete-form';\nimport {ajax, Event, Loc, Tag} from \"main.core\";\nimport PortalDeleteFormTypes from './portal-delete-form';\n\nexport class PortalDeleteFormCheckword extends PortalDeleteForm\n{\n\t#checkWord: string;\n\t#inputNode: ?HTMLElement;\n\t#inputContainer: ?HTMLElement;\n\n\tconstructor(checkWord: string) {\n\t\tsuper();\n\n\t\tthis.#checkWord = checkWord;\n\t\tthis.getConfirmButton().setState(BX.UI.Button.State.DISABLED);\n\n\t\tEvent.bind(this.getInputNode(), 'input', (event) => {\n\t\t\tif (event.target.value === this.#checkWord)\n\t\t\t{\n\t\t\t\tthis.getConfirmButton().setState(null);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getConfirmButton().setState(BX.UI.Button.State.DISABLED);\n\t\t\t}\n\t\t});\n\t}\n\n\tonConfirmEventHandler(): void\n\t{\n\t\tif (this.getInputNode().value === this.#checkWord)\n\t\t{\n\t\t\tthis.getConfirmButton().setWaiting(true);\n\n\t\t\tajax.runAction('bitrix24.portal.deletePortal', { data: { checkWord: this.getInputNode().value } })\n\t\t\t\t.then(() => {\n\t\t\t\t\ttop.window.location.reload();\n\t\t\t\t})\n\t\t\t\t.catch((reject) => {\n\t\t\t\t\treject.errors.forEach((error) => {\n\t\t\t\t\t\tthis.getConfirmButton().setWaiting(false);\n\t\t\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: error.message,\n\t\t\t\t\t\t\tposition: 'bottom-right',\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t}\n\t}\n\n\tgetDescription(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_CHECKWORD', {'#CHECKWORD#': this.#checkWord})}\n\t\t`;\n\t}\n\n\tgetInputContainer(): HTMLElement\n\t{\n\t\tif (!this.#inputContainer)\n\t\t{\n\t\t\tthis.#inputContainer = Tag.render`\n\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w75 --delete\">\n\t\t\t\t\t${this.getInputNode()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#inputContainer;\n\t}\n\tgetInputNode(): HTMLInputElement\n\t{\n\t\tif (!this.#inputNode)\n\t\t{\n\t\t\tthis.#inputNode = Tag.render`\n\t\t\t\t<input \n\t\t\t\t\tdata-bx-role=\"delete-portal-checkword\"\n\t\t\t\t\tonchange=\"event.stopPropagation()\"\n\t\t\t\t\tname=\"deletePortalCheckWord\" \n\t\t\t\t\ttype=\"text\" \n\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\tplaceholder=\"${Loc.getMessage('INTRANET_SETTINGS_FIELD_DELETE_PORTAL_CHECKWORD_PLACEHOLDER', {'#CHECKWORD#': this.#checkWord})}\"\n\t\t\t\t>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#inputNode;\n\t}\n}","import { PortalDeleteForm } from './portal-delete-form';\nimport { Loc, Tag } from 'main.core';\nimport PortalDeleteFormTypes from './portal-delete-form';\n\nexport class PortalDeleteFormMail extends PortalDeleteForm\n{\n\t#mailForRequest: string;\n\t#portalUrl: string;\n\t#mailLink: ?string;\n\tconstructor(mailForRequest: string, portalUrl: string) {\n\t\tsuper();\n\n\t\tthis.#mailForRequest = mailForRequest;\n\t\tthis.#portalUrl = portalUrl;\n\t}\n\n\tgetBodyClass(): string\n\t{\n\t\treturn PortalDeleteFormTypes.WARNING;\n\t}\n\n\tgetConfirmButtonText(): ?string\n\t{\n\t\treturn Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL_MAIL', {\n\t\t\t'#MAIL#': this.#mailForRequest\n\t\t});\n\t}\n\n\tonConfirmEventHandler(): void\n\t{\n\t\ttop.window.location.href = this.#getMailLink();\n\t}\n\n\t#getMailLink(): string\n\t{\n\t\tif (!this.#mailLink)\n\t\t{\n\t\t\tconst mailBody = Loc.getMessage('INTRANET_SETTINGS_PORTAL_DELETE_MAIL_BODY', {'#PORTAL_URL#': this.#portalUrl});\n\t\t\tconst mailSubject = Loc.getMessage('INTRANET_SETTINGS_PORTAL_DELETE_MAIL_SUBJECT', {'#PORTAL_URL#':  this.#portalUrl});\n\t\t\tthis.#mailLink = `mailto:${this.#mailForRequest}?body=${mailBody}&subject=${mailSubject}`;\n\t\t}\n\n\t\treturn this.#mailLink;\n\t}\n\n\tgetDescription(): HTMLElement\n\t{\n\t\tconst moreDetails = `\n\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=19566456')\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t</a>\n\t\t`;\n\n\t\treturn Tag.render`\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_MAIL', {\n\t\t\t\t'#MAIL#': this.#mailForRequest, \n\t\t\t\t'#MAIL_LINK#': this.#getMailLink(),\n\t\t\t\t'#MORE_DETAILS#': moreDetails\n\t\t\t})}\n\t\t`;\n\t}\n}","import PortalDeleteFormTypes, {PortalDeleteForm} from \"./portal-delete-form\";\nimport {Loc, Tag} from \"main.core\";\n\nexport class PortalDeleteFormNotAdmin extends PortalDeleteForm\n{\n\tgetButtonContainer() {}\n\n\tgetBodyClass(): string\n\t{\n\t\treturn PortalDeleteFormTypes.WARNING;\n\t}\n\n\tgetDescription(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_NOT_ADMIN')}\n\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=19566456')\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t</a>\n\t\t`;\n\t}\n}","import { SettingsSection } from 'ui.form-elements.field';\nimport { BaseSettingsElement, SettingsRow } from 'ui.form-elements.field';\nimport { Loc, Dom } from 'main.core';\nimport { Row, Section } from 'ui.section';\nimport 'ui.form';\nimport { PortalDeleteForm } from './portal-delete-form';\nimport { PortalDeleteFormEmployee } from \"./portal-delete-form-employee\";\nimport {PortalDeleteFormCheckword} from \"./portal-delete-form-checkword\";\nimport {PortalDeleteFormMail} from \"./portal-delete-form-mail\";\nimport {PortalDeleteFormNotAdmin} from \"./portal-delete-form-not-admin\";\n\nexport type PortalDeleteSectionType = {\n\tparent: BaseSettingsElement,\n\toptions: PortalDeleteOptionsType,\n};\n\nexport type PortalDeleteOptionsType = {\n\tisFreeLicense: boolean,\n\tisEmployeesLeft: boolean,\n\tcheckWord: string,\n\tmailForRequest: string,\n\tportalUrl: string,\n}\n\nexport class PortalDeleteSection extends SettingsSection\n{\n\t#options: PortalDeleteOptionsType;\n\t#settingsRow: ?SettingsRow;\n\t#form: PortalDeleteForm;\n\t#defaultBodyClass: string\n\t#bodyClass: string;\n\n\tconstructor(params: PortalDeleteSectionType) {\n\t\tsuper(params);\n\n\t\tthis.#defaultBodyClass = this.getSectionView().className.bodyActive;\n\t\tthis.#options = params.options;\n\t\tlet type;\n\n\t\tif (!this.#options.isFreeLicense)\n\t\t{\n\t\t\ttype = 'mail';\n\t\t}\n\t\telse if (this.#options.isEmployeesLeft)\n\t\t{\n\t\t\ttype = 'employee';\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttype = 'default';\n\t\t}\n\n\t\tthis.#renderFormRow(type);\n\t}\n\n\t#renderFormRow(type: 'checkword'|'mail'|'employee'|'default'|'not_admin'): void\n\t{\n\t\tif (this.#settingsRow)\n\t\t{\n\t\t\tthis.removeChild(this.#settingsRow);\n\t\t\tDom.remove(this.#settingsRow.render());\n\t\t}\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'checkword':\n\t\t\t\tthis.#form = new PortalDeleteFormCheckword(this.#options.checkWord);\n\t\t\t\tbreak;\n\n\t\t\tcase 'mail':\n\t\t\t\tthis.#form = new PortalDeleteFormMail(this.#options.mailForRequest, this.#options.portalUrl);\n\t\t\t\tbreak;\n\n\t\t\tcase 'employee':\n\t\t\t\tthis.#form = new PortalDeleteFormEmployee(this.#options.isFreeLicense);\n\t\t\t\tbreak;\n\n\t\t\tcase 'not_admin':\n\t\t\t\tthis.#form = new PortalDeleteFormNotAdmin();\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthis.#form = new PortalDeleteForm();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.#updateSectionBodyClass();\n\t\tthis.#bindFormEvents();\n\n\t\tconst formRow = new Row({\n\t\t\tcontent: this.#form.getContainer(),\n\t\t});\n\t\tthis.#settingsRow = new SettingsRow({\n\t\t\trow: formRow,\n\t\t});\n\n\t\tthis.addChild(this.#settingsRow);\n\t\tthis.render();\n\t}\n\n\t#bindFormEvents(): void\n\t{\n\t\tthis.#form.subscribe('closeForm', () => {\n\t\t\tthis.getSectionView().toggle(false);\n\t\t});\n\n\t\tthis.#form.subscribe('updateForm', (event) => {\n\t\t\tif (event.data.type)\n\t\t\t{\n\t\t\t\tthis.#renderFormRow(event.data.type);\n\t\t\t}\n\t\t})\n\t}\n\n\t#updateSectionBodyClass(): void\n\t{\n\t\tDom.removeClass(this.getSectionView().getContent(), this.#bodyClass);\n\t\tthis.#bodyClass = this.#form.getBodyClass();\n\t\tthis.getSectionView().className.bodyActive = this.#defaultBodyClass + ' ' + this.#bodyClass;\n\n\t\tif (this.getSectionView().isOpen)\n\t\t{\n\t\t\tDom.addClass(this.getSectionView().getContent(), this.#bodyClass);\n\t\t}\n\t}\n}","import { Event, Loc, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { BaseSettingsPage, SettingsRow, SettingsSection } from 'ui.form-elements.field';\nimport { Checker, InlineChecker, Selector, TextInput, TextInputInline } from 'ui.form-elements.view';\nimport { Row, Section, SeparatorRow } from 'ui.section';\nimport { AnalyticSettingsEvent } from '../analytic';\nimport { PortalDeleteSection } from  '../configuration/portal-delete-section';\n\nexport class ConfigurationPage extends BaseSettingsPage\n{\n\t#header;\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_CONFIGURATION');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'configuration';\n\t}\n\n\theaderWidgetRender(): HTMLElement\n\t{\n\t\tlet timeFormat = '';\n\t\tif (this.getValue('isFormat24Hour') === 'Y')\n\t\t{\n\t\t\ttimeFormat = this.getValue('format24HourTime');\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttimeFormat = this.getValue('format12HourTime');\n\t\t}\n\n\t\tthis.#header = Tag.render`\n\t\t<div class=\"intranet-settings__date-widget_box\">\n\t\t\t<span class=\"ui-icon-set --earth-language\"></span>\n\t\t\t<div class=\"intranet-settings__date-widget_content\">\n\t\t\t\t<div class=\"intranet-settings__date-widget_inner\">\n\t\t\t\t\t<span data-role=\"time\" class=\"intranet-settings__date-widget_title\">${timeFormat}</span>\n\t\t\t\t\t<span class=\"intranet-settings__date-widget_subtitle\">${this.getValue('offsetUTC')}</span>\n\t\t\t\t</div>\n\t\t\t\t<div data-role=\"date\" class=\"intranet-settings__date-widget_subtitle\">${this.getValue('currentDate')}</div>\n\t\t\t</div>\n\t\t</div>`;\n\n\t\treturn this.#header;\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tlet dateTimeSection = this.#buildDateTimeSection();\n\t\tdateTimeSection?.renderTo(contentNode);\n\n\t\tlet mailsSection = this.#buildMailsSection();\n\t\tmailsSection?.renderTo(contentNode);\n\n\t\tif (this.hasValue('mapsProviderCRM') && this.getValue('mapsProviderCRM'))\n\t\t{\n\t\t\tlet mapsSection = this.#buildCRMMapsSection();\n\t\t\tmapsSection?.renderTo(contentNode);\n\t\t}\n\n\t\tlet cardsProductPropertiesSection = this.#buildCardsProductPropertiesSection();\n\t\tcardsProductPropertiesSection?.renderTo(contentNode);\n\n\t\tlet additionalSettingsSection = this.#buildAdditionalSettingsSection();\n\t\tadditionalSettingsSection?.renderTo(contentNode);\n\n\t\tif (this.hasValue('deletePortalOptions') && this.hasValue('sectionDeletePortal'))\n\t\t{\n\t\t\tconst deletePortalSection = new Section(this.getValue('sectionDeletePortal'));\n\n\t\t\tconst settingsSection = new PortalDeleteSection({\n\t\t\t\tsection: deletePortalSection,\n\t\t\t\tparent: this,\n\t\t\t\toptions: this.getValue('deletePortalOptions'),\n\t\t\t});\n\t\t\tsettingsSection.renderTo(contentNode);\n\t\t}\n\t}\n\n\t#buildDateTimeSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionDateFormat'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet dateTimeSection = new Section(this.getValue('sectionDateFormat'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: dateTimeSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('culture'))\n\t\t{\n\t\t\tlet regionField = new Selector(this.getValue('culture'));\n\t\t\tConfigurationPage.addToSectionHelper(regionField, settingsSection, new Row( { className: '--intranet-settings__mb-20' } ));\n\n\t\t\tEvent.bind(regionField.getInputNode(), 'change', (event) => {\n\t\t\t\tthis.#header.querySelector('[data-role=\"date\"]').innerHTML = this.getValue('longDates')[event.target.value];\n\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('isFormat24Hour'))\n\t\t{\n\t\t\tlet format24Time = new InlineChecker(this.getValue('isFormat24Hour'));\n\t\t\tConfigurationPage.addToSectionHelper(format24Time, settingsSection);\n\n\t\t\tEventEmitter.subscribe(format24Time, 'change', (event) => {\n\t\t\t\tthis.#header.querySelector('[data-role=\"time\"]').innerHTML = format24Time.isChecked()\n\t\t\t\t\t? this.getValue('format24HourTime')\n\t\t\t\t\t: this.getValue('format12HourTime');\n\t\t\t});\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildMailsSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionLetters'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet mailsSection = new Section(this.getValue('sectionLetters'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: mailsSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('trackOutMailsRead'))\n\t\t{\n\t\t\tlet trackOutLettersRead = new Checker(this.getValue('trackOutMailsRead'));\n\t\t\tlet showQuitRow = new Row({});\n\t\t\tConfigurationPage.addToSectionHelper(trackOutLettersRead, settingsSection, showQuitRow);\n\t\t}\n\n\t\tif (this.hasValue('trackOutMailsClick'))\n\t\t{\n\t\t\tlet trackOutMailsClick = new Checker(this.getValue('trackOutMailsClick'));\n\t\t\tlet showQuitRow = new Row({});\n\n\t\t\tConfigurationPage.addToSectionHelper(trackOutMailsClick, settingsSection, showQuitRow);\n\t\t}\n\n\t\tif (this.hasValue('defaultEmailFrom'))\n\t\t{\n\t\t\tlet defaultEmailFrom = new TextInput(this.getValue('defaultEmailFrom'));\n\t\t\tlet showQuitRow = new Row({});\n\n\t\t\tConfigurationPage.addToSectionHelper(defaultEmailFrom, settingsSection, showQuitRow);\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildCRMMapsSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionMapsInCrm'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet mapsSection = new Section(this.getValue('sectionMapsInCrm'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: mapsSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tlet cardsProvider = new Selector({\n\t\t\tlabel: this.getValue('mapsProviderCRM').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS'),\n\t\t\tname: this.getValue('mapsProviderCRM').name,\n\t\t\titems: this.getValue('mapsProviderCRM').values,\n\t\t\tcurrent: this.getValue('mapsProviderCRM').current,\n\t\t});\n\t\tlet cardsProviderRow = new Row({\n\t\t\tseparator: 'bottom',\n\t\t\tclassName: '--block',\n\t\t});\n\t\tConfigurationPage.addToSectionHelper(cardsProvider, settingsSection, cardsProviderRow);\n\n\t\tconst separatorRow = new SeparatorRow({\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: separatorRow,\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tconst description = new BX.UI.Alert({\n\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION', {'#GOOGLE_API_URL#': this.getValue('googleApiUrl')}),\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tseparator: 'top',\n\t\t\tcontent: description.getContainer(),\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: settingsSection\n\t\t});\n\n\t\tconst googleKeyFrontend = new TextInputInline({\n\t\t\tinputName: 'API_KEY_FRONTEND',\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC'),\n\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC_HINT'),\n\t\t\tvalue: this.getValue('API_KEY_FRONTEND').value,\n\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER'),\n\t\t});\n\t\tconst googleKeyFrontendRow = new Row({\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\n\t\tConfigurationPage.addToSectionHelper(googleKeyFrontend, settingsSection, googleKeyFrontendRow);\n\n\t\tconst mapApiKeyBackend = new TextInputInline({\n\t\t\tinputName: 'API_KEY_BACKEND',\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER'),\n\t\t\thintTitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER_HINT'),\n\t\t\tvalue: this.getValue('API_KEY_BACKEND').value,\n\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER'),\n\t\t});\n\n\t\tconst googleKeyBackendRow = new Row({\n\t\t\tcontent: mapApiKeyBackend.render(),\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t\tseparator: 'bottom',\n\t\t\tclassName: '--block',\n\t\t});\n\t\tConfigurationPage.addToSectionHelper(mapApiKeyBackend, settingsSection, googleKeyBackendRow);\n\n\t\tconst separatorRow1 = new SeparatorRow({\n\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: separatorRow1,\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tlet showPhotoPlacesMaps = new Checker({\n\t\t\tinputName: 'SHOW_PHOTOS_ON_MAP',\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SHOW_PHOTO_PLACES_MAPS'),\n\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON'),\n\t\t\thintOff: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON'),\n\t\t\tchecked: this.getValue('SHOW_PHOTOS_ON_MAP').value === '1'\n\t\t});\n\t\tlet showPhotoPlacesMapsRow = new Row({\n\t\t\tseparator: 'top',\n\t\t\tclassName: '--block',\n\t\t\tcontent: showPhotoPlacesMaps.render(),\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\t\tConfigurationPage.addToSectionHelper(showPhotoPlacesMaps, settingsSection, showPhotoPlacesMapsRow);\n\n\t\tlet useGeocodingService = new Checker({\n\t\t\tinputName: 'USE_GEOCODING_SERVICE',\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SHOW_GEOCODING_SERVICE'),\n\t\t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON'),\n\t\t\thintOff: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON'),\n\t\t\tchecked: this.getValue('USE_GEOCODING_SERVICE').value === '1',\n\t\t});\n\t\tlet useGeocodingServiceRow = new Row({\n\t\t\tcontent: useGeocodingService.render(),\n\t\t\tisHidden: this.getValue('mapsProviderCRM').current === 'OSM',\n\t\t});\n\n\t\tConfigurationPage.addToSectionHelper(useGeocodingService, settingsSection, useGeocodingServiceRow);\n\n\t\tcardsProvider.getInputNode()\n\t\t\t.addEventListener('change', (event) => {\n\t\t\t\tif (event.target.value === 'OSM')\n\t\t\t\t{\n\t\t\t\t\tseparatorRow.hide();\n\t\t\t\t\tdescriptionRow.hide();\n\t\t\t\t\tgoogleKeyFrontendRow.hide();\n\t\t\t\t\tgoogleKeyBackendRow.hide();\n\t\t\t\t\tuseGeocodingServiceRow.hide();\n\t\t\t\t\tshowPhotoPlacesMapsRow.hide();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tseparatorRow.show();\n\t\t\t\t\tdescriptionRow.show();\n\t\t\t\t\tgoogleKeyFrontendRow.show();\n\t\t\t\t\tgoogleKeyBackendRow.show();\n\t\t\t\t\tuseGeocodingServiceRow.show();\n\t\t\t\t\tshowPhotoPlacesMapsRow.show();\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildCardsProductPropertiesSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionMapsInProduct'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet productPropertiesSection = new Section(this.getValue('sectionMapsInProduct'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: productPropertiesSection,\n\t\t\tparent: this\n\t\t})\n\n\t\tif (this.hasValue('cardsProviderProductProperties'))\n\t\t{\n\t\t\tlet cardsProviderProductProperties = new Selector({\n\t\t\t\tlabel: this.getValue('cardsProviderProductProperties').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS'),\n\t\t\t\tname: this.getValue('cardsProviderProductProperties').name,\n\t\t\t\titems: this.getValue('cardsProviderProductProperties').values,\n\t\t\t\tcurrent: this.getValue('cardsProviderProductProperties').current,\n\t\t\t});\n\t\t\tlet cardsProviderProductPropertiesRow = new Row({\n\t\t\t\tseparator: 'bottom'\n\t\t\t});\n\t\t\tConfigurationPage.addToSectionHelper(cardsProviderProductProperties, settingsSection, cardsProviderProductPropertiesRow);\n\n\t\t\tnew SettingsRow({\n\t\t\t\trow: new SeparatorRow(),\n\t\t\t\tparent: settingsSection,\n\t\t\t});\n\n\t\t\tconst descriptionYandex = new BX.UI.Alert({\n\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_SECTION_CRM_MAPS_YANDEX_DESCRIPTION', {'#YANDEX_API_URL#': this.getValue('yandexApiUrl')}),\n\t\t\t\tinline: true,\n\t\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\t\tanimated: true,\n\t\t\t});\n\t\t\tconst descriptionYandexRow = new Row({\n\t\t\t\tcontent: descriptionYandex.getContainer(),\n\t\t\t\tisHidden: this.getValue('cardsProviderProductProperties').current !== 'yandex',\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: descriptionYandexRow,\n\t\t\t\tparent: settingsSection\n\t\t\t});\n\n\t\t\tconst yandexKeyProductProperties = new TextInput({\n\t\t\t\tinputName: 'yandexKeyProductProperties',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_YANDEX_KEY'),\n\t\t\t\tvalue: this.getValue('yandexKeyProductProperties'),\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER'),\n\t\t\t});\n\t\t\tconst yandexKeyProductPropertiesRow = new Row({\n\t\t\t\tseparator: 'bottom',\n\t\t\t\tclassName: '--block',\n\t\t\t\tcontent: yandexKeyProductProperties.render(),\n\t\t\t\tisHidden: this.getValue('cardsProviderProductProperties').current !== 'yandex',\n\t\t\t});\n\n\t\t\tConfigurationPage.addToSectionHelper(yandexKeyProductProperties, settingsSection, yandexKeyProductPropertiesRow);\n\n\t\t\tconst descriptionGoogle = new BX.UI.Alert({\n\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION', {'#GOOGLE_API_URL#': this.getValue('googleApiUrl')}),\n\t\t\t\tinline: true,\n\t\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\t\tanimated: true,\n\t\t\t});\n\n\t\t\tconst descriptionGoogleRow = new Row({\n\t\t\t\tcontent: descriptionGoogle.getContainer(),\n\t\t\t\tisHidden: this.getValue('cardsProviderProductProperties').current !== 'google',\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\trow: descriptionGoogleRow,\n\t\t\t\tparent: settingsSection\n\t\t\t});\n\n\t\t\tconst googleKeyProductProperties = new TextInput({\n\t\t\t\tinputName: 'googleKeyProductProperties',\n\t\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_GOOGLE_KEY'),\n\t\t\t\tvalue: this.getValue('googleKeyProductProperties'),\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER'),\n\t\t\t});\n\t\t\tconst googleKeyProductPropertiesRow = new Row({\n\t\t\t\tcontent: googleKeyProductProperties.render(),\n\t\t\t\tisHidden: this.getValue('cardsProviderProductProperties').current !== 'google',\n\t\t\t});\n\t\t\tConfigurationPage.addToSectionHelper(googleKeyProductProperties, settingsSection, googleKeyProductPropertiesRow);\n\n\t\t\tcardsProviderProductProperties.getInputNode()\n\t\t\t\t.addEventListener('change', (event) => {\n\t\t\t\t\tif (event.target.value === 'yandex')\n\t\t\t\t\t{\n\t\t\t\t\t\tdescriptionYandexRow.show();\n\t\t\t\t\t\tyandexKeyProductPropertiesRow.show();\n\t\t\t\t\t\tdescriptionGoogleRow.hide();\n\t\t\t\t\t\tgoogleKeyProductPropertiesRow.hide();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdescriptionYandexRow.hide();\n\t\t\t\t\t\tyandexKeyProductPropertiesRow.hide();\n\t\t\t\t\t\tdescriptionGoogleRow.show();\n\t\t\t\t\t\tgoogleKeyProductPropertiesRow.show();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildAdditionalSettingsSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionOther'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet additionalSettingsSection = new Section(this.getValue('sectionOther'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: additionalSettingsSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tif (this.hasValue('allowUserInstallApplication'))\n\t\t{\n\t\t\tlet allInstallMarketApplication = new Checker(this.getValue('allowUserInstallApplication'));\n\t\t\tlet allInstallMarketApplicationRow = new Row({});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tallInstallMarketApplication.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigConfiguration(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_MARKET,\n\t\t\t\t\t\tallInstallMarketApplication.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tConfigurationPage.addToSectionHelper(allInstallMarketApplication, settingsSection, allInstallMarketApplicationRow);\n\t\t}\n\n\t\tif (this.hasValue('allCanBuyTariff'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE'\n\t\t\t)}</span>`;\n\t\t\tlet allCanBuyTariff = new Checker({\n\t\t\t\tinputName: this.getValue('allCanBuyTariff').inputName,\n\t\t\t\ttitle: this.getValue('allCanBuyTariff').title ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_ALL_CAN_BUY_TARIFF'),\n\t\t\t\thintOn: this.getValue('allCanBuyTariff').hintOn,\n\t\t\t\tchecked: this.getValue('allCanBuyTariff').checked,\n\t\t\t\tisEnable: this.getValue('allCanBuyTariff').isEnable,\n\t\t\t\tbannerCode: 'limit_why_pay_tariff_everyone',\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\t\t\tlet allCanBuyTariffRow = new Row({});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tallCanBuyTariff.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.getAnalytic()?.addEventConfigConfiguration(\n\t\t\t\t\t\tAnalyticSettingsEvent.CHANGE_PAY_TARIFF,\n\t\t\t\t\t\tallCanBuyTariff.isChecked()\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tConfigurationPage.addToSectionHelper(allCanBuyTariff, settingsSection, allCanBuyTariffRow);\n\t\t}\n\n\t\tif (this.hasValue('allowMeasureStressLevel'))\n\t\t{\n\t\t\tlet allowMeasureStressLevel = new Checker(this.getValue('allowMeasureStressLevel'));\n\t\t\tlet allowMeasureStressLevelRow = new Row({});\n\t\t\tConfigurationPage.addToSectionHelper(allowMeasureStressLevel, settingsSection, allowMeasureStressLevelRow);\n\t\t}\n\n\t\tif (this.hasValue('collectGeoData'))\n\t\t{\n\t\t\tlet collectGeoData = new Checker(this.getValue('collectGeoData'));\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tcollectGeoData.switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() =>\n\t\t\t\t{\n\t\t\t\t\tthis.#geoDataSwitch(collectGeoData);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tConfigurationPage.addToSectionHelper(collectGeoData, settingsSection);\n\t\t}\n\n\t\t// This is hidden\n\t\t// if (this.hasValue('showSettingsAllUsers'))\n\t\t// {\n\t\t// \tlet showSettingsAllUsers = new Checker({\n\t\t// \t\tinputName: 'showSettingsAllUsers',\n\t\t// \t\ttitle: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SHOW_SETTINGS_ALL_USER'),\n\t\t// \t\thintOn: Loc.getMessage('INTRANET_SETTINGS_FIELD_HINT_SHOW_SETTINGS_ALL_USER_CLICK_ON'),\n\t\t// \t\tchecked: this.getValue('showSettingsAllUsers') === 'Y'\n\t\t// \t});\n\t\t// \tlet showSettingsAllUsersRow = new Row({\n\t\t// \t\tcontent: showSettingsAllUsers.render(),\n\t\t// \t\tisHidden: true\n\t\t// \t});\n\t\t// \tConfigurationPage.addToSectionHelper(showSettingsAllUsers, settingsSection, showSettingsAllUsersRow);\n\t\t// }\n\n\t\treturn settingsSection;\n\t}\n\n\t#geoDataSwitch(element)\n\t{\n\t\tif (element.isChecked())\n\t\t{\n\t\t\tBX.UI.Dialogs.MessageBox.show({\n\t\t\t\t'modal': true,\n\t\t\t\t'minWidth': 640,\n\t\t\t\t'title': Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA'),\n\t\t\t\t'message': Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_CONFIRM'),\n\t\t\t\t'buttons': BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,\n\t\t\t\t'okCaption': Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_OK'),\n\t\t\t\t'onCancel': function ()\n\t\t\t\t{\n\t\t\t\t\telement.switcher.check(false);\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\t'onOk': function ()\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\t}\n}\n","import { Loc, Tag, Dom, Event } from 'main.core';\nimport { Section, Row } from 'ui.section';\nimport { ItemPicker, TextInput, Selector } from 'ui.form-elements.view';\nimport {\n\tSettingsSection,\n\tSettingsRow,\n\tTabField,\n\tTabsField,\n\tBaseSettingsPage,\n\tSettingsField,\n} from 'ui.form-elements.field';\n\nexport class SchedulePage extends BaseSettingsPage\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_SCHEDULE');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_SCHEDULE');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'schedule';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tconst scheduleSection = this.#buildScheduleSection();\n\t\tscheduleSection.renderTo(contentNode);\n\n\t\tconst holidaysSection = this.#buildHolidaysSection();\n\t\tholidaysSection.renderTo(contentNode);\n\t}\n\n\t#buildScheduleTab(parent)\n\t{\n\t\tlet workTimeRow = new Row({\n\t\t\tclassName: 'intranet-settings__work-time_container --no-padding',\n\t\t});\n\t\tlet settingsRow = new SettingsRow({\n\t\t\trow: workTimeRow,\n\t\t\tparent: parent,\n\t\t});\n\t\tif (this.hasValue('WORK_TIME_START'))\n\t\t{\n\t\t\tconst workTimeStartField = new Selector(this.getValue('WORK_TIME_START'));\n\n\t\t\tnew SettingsRow({\n\t\t\t\tchild: new SettingsField({\n\t\t\t\t\tfieldView: workTimeStartField,\n\t\t\t\t}),\n\t\t\t\tparent: settingsRow,\n\t\t\t\trow: new Row({\n\t\t\t\t\tclassName: 'intranet-settings__work-time_row',\n\t\t\t\t}),\n\t\t\t});\n\t\t}\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tclassName: 'ui-section__field-inline-separator',\n\t\t\t}),\n\t\t\tparent: settingsRow,\n\t\t});\n\n\t\tif (this.hasValue('WORK_TIME_END'))\n\t\t{\n\t\t\tconst workTimeEndField = new Selector(this.getValue('WORK_TIME_END'));\n\n\t\t\tnew SettingsRow({\n\t\t\t\tchild: new SettingsField({\n\t\t\t\t\tfieldView: workTimeEndField,\n\t\t\t\t}),\n\t\t\t\tparent: settingsRow,\n\t\t\t\trow: new Row({\n\t\t\t\t\tclassName: 'intranet-settings__work-time_row',\n\t\t\t\t}),\n\t\t\t});\n\t\t}\n\n\t\tlet containerTab = Tag.render`<div><div>`;\n\t\tDom.append(workTimeRow.render(), containerTab);\n\n\t\tif (this.hasValue('WEEK_DAYS'))\n\t\t{\n\t\t\tconst itemPickerField = new ItemPicker({\n\t\t\t\tinputName: this.getValue('WEEK_DAYS').inputName,\n\t\t\t\tisMulti: true,\n\t\t\t\tlabel: this.getValue('WEEK_DAYS').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_WEEKEND'),\n\t\t\t\titems: this.getValue('WEEK_DAYS').values,\n\t\t\t\tcurrent: this.getValue('WEEK_DAYS').multiValue,\n\t\t\t});\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: itemPickerField,\n\t\t\t});\n\t\t\tconst itemPickerRow = new Row({\n\t\t\t\tcontent: itemPickerField.render(),\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: itemPickerRow,\n\t\t\t\tchild: settingsField,\n\t\t\t\tparent: parent\n\t\t\t});\n\t\t\tDom.append(itemPickerRow.render(), containerTab);\n\t\t}\n\n\t\tif (this.hasValue('WEEK_START'))\n\t\t{\n\t\t\tconst weekStartField = new ItemPicker(this.getValue('WEEK_START'));\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: weekStartField,\n\t\t\t});\n\t\t\tDom.addClass(weekStartField.render(), '--row-frame_gray');\n\t\t\tconst weekStartRow = new Row({\n\t\t\t\tcontent: weekStartField.render(),\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: weekStartRow,\n\t\t\t\tchild: settingsField,\n\t\t\t\tparent: parent,\n\t\t\t});\n\n\t\t\tDom.append(weekStartRow.render(), containerTab);\n\t\t}\n\n\t\treturn containerTab;\n\t}\n\n\t#buildScheduleSection(): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionSchedule'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet scheduleSection = new Section(this.getValue('sectionSchedule'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: scheduleSection\n\t\t})\n\n\t\tconst tabsRow = new SettingsRow({\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tconst tabsField = new TabsField({\n\t\t\tparent: tabsRow,\n\t\t});\n\n\t\tconst forCompanyTab = new TabField({\n\t\t\tparent: tabsField,\n\t\t\ttabsOptions: this.getValue('tabForCompany')\n\t\t});\n\n\t\tthis.#buildScheduleTab(forCompanyTab)\n\n\t\tif (this.getValue('TIMEMAN').enabled)\n\t\t{\n\t\t\tconst forDepartmentTab = new TabField({\n\t\t\t\tparent: tabsField,\n\t\t\t\ttabsOptions: this.getValue('tabForDepartment')\n\t\t\t});\n\n\t\t\tconst forDepartmentRow = new Row({\n\t\t\t\tcontent: this.#forDepartmentsRender(),\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\trow: forDepartmentRow,\n\t\t\t\tparent: forDepartmentTab,\n\t\t\t});\n\t\t}\n\n\t\ttabsField.activateTab(forCompanyTab);\n\t\t//endregion\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildHolidaysSection(): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionHoliday'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet holidaysSection = new Section(this.getValue('sectionHoliday'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tparent: this,\n\t\t\tsection: holidaysSection\n\t\t})\n\n\t\tconst countDays = this.getValue('year_holidays')?.value?.match(/\\d{1,2}.\\d{1,2}/gm)?.length ?? 0;\n\t\tlet countDaysNode = Tag.render`<div class=\"ui-section__field-label\">${Loc.getMessage('INTRANET_SETTINGS_FIELD_INFO', { '#COUNT_DAYS#': countDays })}</div>`;\n\t\tconst holidaysRow = new Row({\n\t\t\tcontent: countDaysNode,\n\t\t});\n\t\tholidaysSection.append(holidaysRow.render());\n\n\t\tif (this.hasValue('year_holidays'))\n\t\t{\n\t\t\tconst holidaysField = new TextInput(this.getValue('year_holidays'));\n\t\t\tSchedulePage.addToSectionHelper(holidaysField, settingsSection);\n\n\t\t\tEvent.bind(holidaysField.getInputNode(), 'keyup', () => {\n\t\t\t\tconst count = holidaysField?.getInputNode().value?.match(/\\d{1,2}.\\d{1,2}/gm)?.length ?? 0;\n\t\t\t\tcountDaysNode.innerHTML = Loc.getMessage('INTRANET_SETTINGS_FIELD_INFO', { '#COUNT_DAYS#': count });\n\t\t\t});\n\t\t}\n\n\t\treturn settingsSection;\n\t}\n\n\t#forDepartmentsRender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"intranet-settings__tab-info_container\">\n\t\t\t\t<div class=\"intranet-settings__tab-info_text\">${Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS')}</div>\n\t\t\t\t<a href=\"/timeman/schedules/\" class=\"ui-section__link\" target=\"_blank\">${Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS_CONFIG')}</a>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Dom, Loc, Tag } from 'main.core';\nimport 'ui.icon-set.main';\nimport { Section, Row } from 'ui.section';\nimport { TextInput } from 'ui.form-elements.view';\nimport { SettingsSection, SettingsField, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\n\nexport class GdprPage extends BaseSettingsPage\n{\n\tconstructor() {\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_GDPR');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_GDPR');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'gdpr';\n\t}\n\n\tappendSections(contentNode: HTMLElement)\n\t{\n\t\tlet gdprSection = this.#buildGdprSection();\n\t\tgdprSection?.renderTo(contentNode);\n\t}\n\n\t#buildGdprSection(): SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionGdpr'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet gdprSection = new Section(this.getValue('sectionGdpr'));\n\n\t\tlet sectionSettings = new SettingsSection({\n\t\t\tsection: gdprSection,\n\t\t\tparent: this\n\t\t});\n\n\t\tconst description = new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_GDPR_DESCRIPTION')}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=7608199')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t\t</br>\n\t\t\t\t<a class=\"ui-section__link\" href=\"${this.getValue('dpaLink')}\" target=\"_blank\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_GDPR_AGREEMENT')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: description.getContainer(),\n\t\t});\n\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: sectionSettings\n\t\t});\n\n\t\tif (this.hasValue('companyTitle'))\n\t\t{\n\t\t\tconst titleField = new TextInput({\n\t\t\t\tinputName: 'companyTitle',\n\t\t\t\tlabel: this.getValue('companyTitle').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_COMPANY_TITLE'),\n\t\t\t\tvalue: this.getValue('companyTitle').value,\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_PLACEHOLDER_COMPANY_TITLE'),\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: titleField\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField\n\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('contactName'))\n\t\t{\n\t\t\tconst contactNameField = new TextInput({\n\t\t\t\tinputName: 'contactName',\n\t\t\t\tlabel: this.getValue('contactName').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_CONTACT_NAME'),\n\t\t\t\tvalue: this.getValue('contactName').value,\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_PLACEHOLDER_CONTACT_NAME'),\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: contactNameField\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField\n\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('notificationEmail'))\n\t\t{\n\t\t\tconst emailField = new TextInput({\n\t\t\t\tinputName: 'notificationEmail',\n\t\t\t\tlabel: this.getValue('notificationEmail').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_NOTIFICATION_EMAIL'),\n\t\t\t\tvalue: this.getValue('notificationEmail').value,\n\t\t\t\tplaceholder: Loc.getMessage('INTRANET_SETTINGS_FIELD_PLACEHOLDER_NOTIFICATION_EMAIL'),\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: emailField,\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField\n\t\t\t});\n\t\t}\n\n\t\tif (this.hasValue('date'))\n\t\t{\n\t\t\tconst dateField = new TextInput({\n\t\t\t\tinputName: 'date',\n\t\t\t\tlabel: this.getValue('date').label ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_DATE'),\n\t\t\t\tvalue: this.getValue('date').value,\n\t\t\t});\n\n\t\t\tDom.adjust(dateField.render(), {\n\t\t\t\tevents: {\n\t\t\t\t\tclick: (event) => {\n\t\t\t\t\t\tBX.calendar({\n\t\t\t\t\t\t\tnode: event.target,\n\t\t\t\t\t\t\tfield: 'date',\n\t\t\t\t\t\t\tform: '',\n\t\t\t\t\t\t\tbTime: false,\n\t\t\t\t\t\t\tbHideTime: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tlet settingsField = new SettingsField({\n\t\t\t\tfieldView: dateField,\n\t\t\t});\n\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: sectionSettings,\n\t\t\t\tchild: settingsField\n\t\t\t});\n\t\t}\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: this.addApplicationsRender()\n\t\t\t}),\n\t\t\tparent: sectionSettings,\n\t\t});\n\n\t\treturn sectionSettings;\n\t}\n\n\taddApplicationsRender(): HTMLElement\n\t{\n\t\tif (this.hasValue('marketDirectory'))\n\t\t{\n\t\t\tconst marketDirectory = this.getValue('marketDirectory');\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-text-right\">\n\t\t\t\t\t<a class=\"ui-section__link\" href=\"${marketDirectory}detail/integrations24.gdprstaff/\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_EMPLOYEE')}\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class=\"ui-section__link\" style=\"margin-left: 12px;\" href=\"${marketDirectory}detail/integrations24.gdpr/\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_CRM')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n}","import { Loc, Tag, Event, Dom, Type} from 'main.core';\nimport 'ui.forms';\nimport 'ui.icon-set.actions';\nimport 'ui.icon-set.main';\nimport { EventEmitter } from 'main.core.events';\nimport { Section, Row } from 'ui.section';\nimport { Checker, Selector, SingleChecker, UserSelector, TextInput} from 'ui.form-elements.view';\nimport { Switcher, SwitcherSize } from 'ui.switcher';\nimport { Popup } from 'main.popup';\nimport { SettingsSection, SettingsField, SettingsRow, BaseSettingsPage } from 'ui.form-elements.field';\nimport {TagSelector} from \"ui.entity-selector\";\n\nexport class SecurityPage extends BaseSettingsPage\n{\n\t#otpChecker: ?Checker;\n\t#otpSelector: ?Selector;\n\t#otpPopup: ?Popup;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.titlePage = Loc.getMessage('INTRANET_SETTINGS_TITLE_PAGE_SECURITY');\n\t\tthis.descriptionPage = Loc.getMessage('INTRANET_SETTINGS_DESCRIPTION_PAGE_SECURITY');\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn 'security';\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tconst isBitrix24 = this.hasValue('IS_BITRIX_24') && this.getValue('IS_BITRIX_24');\n\t\tif (this.hasValue('SECURITY_OTP_ENABLED') && this.getValue('SECURITY_OTP_ENABLED'))\n\t\t{\n\t\t\tthis.#buildOTPSection()?.renderTo(contentNode);\n\t\t}\n\n\t\t// if (isBitrix24)\n\t\t// {\n\t\t// \tthis.#buildPasswordRecoverySection().renderTo(contentNode);\n\t\t// }\n\t\tthis.#buildDevicesHistorySection()?.renderTo(contentNode);\n\t\tthis.#buildEventLogSection()?.renderTo(contentNode);\n\t\tif (isBitrix24)\n\t\t{\n\t\t\tthis.#buildAccessIPSection()?.renderTo(contentNode);\n\t\t\tthis.#buildBlackListSection()?.renderTo(contentNode);\n\t\t}\n\t}\n\n\t#buildOTPSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionOtp'))\n\t\t{\n\t\t\treturn ;\n\t\t}\n\t\tconst otpSection = new Section(this.getValue('sectionOtp'));\n\n\t\tconst section = new SettingsSection({\n\t\t\tsection: otpSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: this.#getOTPDescription().getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: section,\n\t\t});\n\n\t\tif (this.hasValue('SECURITY_OTP') && this.hasValue('SEND_OTP_PUSH'))\n\t\t{\n\t\t\tconst securityOtpCheckerRow = new Row({\n\t\t\t\tcontent: this.#getOTPChecker().render(),\n\t\t\t\tseparator: this.#getOTPChecker().isChecked() ? '' : 'bottom',\n\t\t\t\tclassName: this.#getOTPChecker().isChecked() ? '' : '--block',\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: securityOtpCheckerRow,\n\t\t\t\tparent: section,\n\t\t\t});\n\n\t\t\tconst securityOtpPeriodSelectorRow = new Row({\n\t\t\t\tcontent: this.#getOTPPeriodSelector().render(),\n\t\t\t\tisHidden: !this.#getOTPChecker().isChecked(),\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\trow: securityOtpPeriodSelectorRow,\n\t\t\t\tparent: section,\n\t\t\t});\n\n\t\t\tconst switcherWrapper = Tag.render`\n\t\t\t\t<div class=\"settings-switcher-wrapper\">\n\t\t\t\t\t<div class=\"settings-security-message-switcher\"/>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tnew SingleChecker({\n\t\t\t\tswitcher: new Switcher({\n\t\t\t\t\tnode: switcherWrapper.querySelector('.settings-security-message-switcher'),\n\t\t\t\t\tinputName: 'SEND_OTP_PUSH',\n\t\t\t\t\tchecked: this.getValue('SEND_OTP_PUSH'),\n\t\t\t\t\tsize: SwitcherSize.small,\n\t\t\t\t}),\n\t\t\t});\n\t\t\tconst securityOtpMessageChatCheckerRow = new Row({\n\t\t\t\tcontent: switcherWrapper,\n\t\t\t\tisHidden: !this.#getOTPChecker().isChecked(),\n\t\t\t});\n\t\t\tswitcherWrapper.append(Tag.render`<span class=\"settings-switcher-title\">${\n\t\t\t\tLoc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_MESSAGE_CHAT')\n\t\t\t}</span>`);\n\t\t\tnew SettingsRow({\n\t\t\t\trow: securityOtpMessageChatCheckerRow,\n\t\t\t\tparent: section,\n\t\t\t});\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\tthis.#getOTPChecker().switcher,\n\t\t\t\t'toggled',\n\t\t\t\t() => {\n\t\t\t\t\tif (this.getValue('SECURITY_IS_USER_OTP_ACTIVE') !== true && this.#getOTPChecker().isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#getOTPPopup().show();\n\t\t\t\t\t\tthis.#getOTPChecker().cancel();\n\t\t\t\t\t\tthis.#getOTPChecker().switcher.check(false);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.hasValue('SECURITY_OTP_ENABLED') && this.getValue('SECURITY_OTP_ENABLED'))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventToggle2fa(this.#getOTPChecker().isChecked());\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.#getOTPChecker().isChecked())\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(securityOtpCheckerRow.render(), '--bottom-separator --block');\n\t\t\t\t\t\tsecurityOtpPeriodSelectorRow.show();\n\t\t\t\t\t\tsecurityOtpMessageChatCheckerRow.show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(securityOtpCheckerRow.render(), '--bottom-separator --block');\n\t\t\t\t\t\tsecurityOtpPeriodSelectorRow.hide();\n\t\t\t\t\t\tsecurityOtpMessageChatCheckerRow.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\treturn section;\n\t}\n\n\t#getOTPChecker(): Checker\n\t{\n\t\tif (this.#otpChecker instanceof Checker)\n\t\t{\n\t\t\treturn this.#otpChecker;\n\t\t}\n\n\t\tif (this.hasValue('fieldSecurityOtp'))\n\t\t{\n\t\t\tthis.#otpChecker = new Checker({\n\t\t\t\tinputName: this.getValue('fieldSecurityOtp').inputName,\n\t\t\t\tchecked: this.getValue('fieldSecurityOtp').checked,\n\t\t\t\ttitle: this.getValue('fieldSecurityOtp').title,\n\t\t\t\tisEnable: this.getValue('fieldSecurityOtp').isEnable,\n\t\t\t\thideSeparator: true,\n\t\t\t\talignCenter: true,\n\t\t\t\tnoMarginBottom: true,\n\t\t\t});\n\t\t}\n\n\t\tthis.#otpChecker.renderLockElement = () => {\n\t\t\treturn null;\n\t\t};\n\n\t\treturn this.#otpChecker;\n\t}\n\n\t#getOTPPopup(): Popup\n\t{\n\t\tif (this.#otpPopup instanceof Popup)\n\t\t{\n\t\t\treturn this.#otpPopup;\n\t\t}\n\n\t\tconst popupDescription = Tag.render`\n\t\t\t<div class=\"intranet-settings__security_popup_info\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_POPUP_OTP_ENABLE')}\n\t\t\t</div>\t\n\t\t`;\n\n\t\tconst popupButton = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_POPUP_OTP_ENABLE_BUTTON'),\n\t\t\tcolor: BX.UI.Button.Color.PRIMARY,\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.#getOTPPopup().close();\n\t\t\t\t\tBX.SidePanel.Instance.open(this.getValue('SECURITY_OTP_PATH'));\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tconst popupContent = Tag.render`\n\t\t\t<div class=\"intranet-settings__security_popup_container\">\n\t\t\t\t${popupDescription}\n\t\t\t\t<div class=\"ui-btn-container ui-btn-container-center\">\n\t\t\t\t\t${popupButton.getContainer()}\n\t\t\t\t</div>\t\t\t\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#otpPopup = new Popup({\n\t\t\tbindElement: this.#otpChecker.getInputNode(),\n\t\t\tcontent: popupContent,\n\t\t\tautoHide: true,\n\t\t\twidth: 337,\n\t\t\tangle: {\n\t\t\t\toffset: 200 - 15,\n\t\t\t},\n\t\t\toffsetLeft: this.#otpChecker.getInputNode().offsetWidth - 200 + 15,\n\t\t\tcloseByEsc: true,\n\t\t\tborderRadius: 18,\n\t\t});\n\n\t\treturn this.#otpPopup;\n\t}\n\n\t#getOTPPeriodSelector(): Selector\n\t{\n\t\tif (this.#otpSelector instanceof Selector)\n\t\t{\n\t\t\treturn this.#otpSelector;\n\t\t}\n\n\t\tthis.#otpSelector = new Selector({\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_PERIOD'),\n\t\t\tname: 'SECURITY_OTP_DAYS',\n\t\t\titems: this.getValue('SECURITY_OTP_DAYS').ITEMS,\n\t\t\tcurrent: this.getValue('SECURITY_OTP_DAYS').CURRENT,\n\t\t});\n\n\t\treturn this.#otpSelector;\n\t}\n\n\t#getOTPDescription(): BX.UI.Alert\n\t{\n\t\treturn new BX.UI.Alert({\n\t\t\ttext: this.#getOTPDescriptionText(),\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\t}\n\n\t#getOTPDescriptionText(): string\n\t{\n\t\treturn `\n\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_FIRST')}\n\t\t</br></br>\n\t\t<span class=\"settings-section-description-focus-text --security-info\">\n\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_SECOND')}\n\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=17728602')\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t</a>\n\t\t</span>`;\n\t}\n\n\t#buildAccessIPSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionAccessIp'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst accessIpSection = new Section(this.getValue('sectionAccessIp'));\n\n\t\tconst section = new SettingsSection({\n\t\t\tsection: accessIpSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: this.#getIpAccessDescription().getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: section,\n\t\t});\n\n\t\tlet fieldsCount = 0;\n\t\tif (this.hasValue('IP_ACCESS_RIGHTS'))\n\t\t{\n\t\t\tfor (const ipUsersList of this.getValue('IP_ACCESS_RIGHTS'))\n\t\t\t{\n\t\t\t\tfieldsCount++;\n\t\t\t\tnew SettingsRow({\n\t\t\t\t\tparent: section,\n\t\t\t\t\tchild: this.#getUserSelectorRow(ipUsersList),\n\t\t\t\t});\n\t\t\t\tnew SettingsRow({\n\t\t\t\t\tparent: section,\n\t\t\t\t\tchild: this.#getAccessIpRow(ipUsersList),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (fieldsCount === 0)\n\t\t{\n\t\t\tfieldsCount++;\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: section,\n\t\t\t\tchild: this.#getEmptyUserSelectorRow(fieldsCount),\n\t\t\t});\n\t\t\tnew SettingsRow({\n\t\t\t\tparent: section,\n\t\t\t\tchild: this.#getEmptyAccessIpRow(fieldsCount),\n\t\t\t});\n\t\t}\n\n\t\tconst onclickAddField = () => {\n\t\t\tif (this.getValue('IP_ACCESS_RIGHTS_ENABLED'))\n\t\t\t{\n\t\t\t\tfieldsCount++;\n\n\t\t\t\tconst emptyUserSelectorRow = new Row({\n\t\t\t\t\tcontent: this.#getEmptyUserSelectorRow(fieldsCount).render(),\n\t\t\t\t});\n\t\t\t\tDom.insertBefore(emptyUserSelectorRow.render(), additionalUsersAccessIpButton.parentElement);\n\n\t\t\t\tconst emptyAccessIpRow = new Row({\n\t\t\t\t\tcontent: this.#getEmptyAccessIpRow(fieldsCount).render(),\n\t\t\t\t});\n\t\t\t\tDom.insertBefore(emptyAccessIpRow.render(), additionalUsersAccessIpButton.parentElement);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.UI.InfoHelper.show('limit_admin_ip');\n\t\t\t}\n\t\t};\n\n\t\tconst additionalUsersAccessIpButton = Tag.render`\n\t\t\t<div class=\"ui-text-right\">\n\t\t\t\t<a class=\"ui-section__link\" href=\"javascript:void(0)\" onclick=\"${onclickAddField}\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_ADDITIONAL_USER_ACCESS_IP')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: additionalUsersAccessIpButton,\n\t\t\t}),\n\t\t\tparent: section,\n\t\t});\n\n\t\treturn section;\n\t}\n\n\t#getEmptyUserSelectorRow(fieldNumber): SettingsRow\n\t{\n\t\tconst userSelector = new UserSelector({\n\t\t\tinputName: `SECURITY_IP_ACCESS_${fieldNumber}_USERS[]`,\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP'),\n\t\t\tenableDepartments: true,\n\t\t\tencodeValue: (value) => {\n\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t{\n\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : value.type + value.id.toString().split(':')[0];\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tisEnable: this.getValue('IP_ACCESS_RIGHTS_ENABLED'),\n\t\t\thelpMessageProvider: this.helpMessageProviderFactory(Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO')),\n\t\t});\n\n\t\treturn new SettingsField({\n\t\t\tfieldView: userSelector,\n\t\t});\n\t}\n\n\t#getEmptyAccessIpRow(fieldNumber): SettingsRow\n\t{\n\t\tconst inputName = `SECURITY_IP_ACCESS_${fieldNumber}_IP`;\n\t\tconst accessIp = new TextInput({\n\t\t\tinputName,\n\t\t\tlabel: this.getValue('IP_ACCESS_RIGHTS_ENABLED_LABEL') ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP'),\n\t\t\tisEnable: this.getValue('IP_ACCESS_RIGHTS_ENABLED'),\n\t\t\thelpMessageProvider: this.helpMessageProviderFactory(Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO')),\n\t\t});\n\n\t\treturn new SettingsField({\n\t\t\tfieldView: accessIp,\n\t\t});\n\t}\n\n\t#getUserSelectorRow(ipUsersList): SettingsRow\n\t{\n\t\tconst userSelector = new UserSelector({\n\t\t\tinputName: `SECURITY_IP_ACCESS_${ipUsersList.fieldNumber}_USERS[]`,\n\t\t\tlabel: this.getValue('IP_ACCESS_RIGHTS_ENABLED_LABEL') ?? Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP'),\n\t\t\tvalues: Object.values(ipUsersList.users),\n\t\t\tenableDepartments: true,\n\t\t\tencodeValue: (value) => {\n\t\t\t\tif (!Type.isNil(value.id))\n\t\t\t\t{\n\t\t\t\t\treturn value.id === 'all-users' ? 'AU' : value.type + value.id.toString().split(':')[0];\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tdecodeValue: (value: string) => {\n\t\t\t\tif (value === 'AU')\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: value,\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst arr = value.match(/^(U|DR|D)(\\d+)/);\n\n\t\t\t\tif (!Type.isArray(arr))\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\tid: null,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttype: arr[1],\n\t\t\t\t\tid: arr[2],\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\treturn new SettingsField({\n\t\t\tfieldView: userSelector,\n\t\t});\n\t}\n\n\t#getAccessIpRow(ipUsersList): SettingsRow\n\t{\n\t\tconst inputName = `SECURITY_IP_ACCESS_${ipUsersList.fieldNumber}_IP`;\n\t\tconst accessIp = new TextInput({\n\t\t\tinputName,\n\t\t\tlabel: Loc.getMessage('INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP'),\n\t\t\tvalue: ipUsersList.ip,\n\t\t});\n\n\t\treturn new SettingsField({\n\t\t\tfieldView: accessIp,\n\t\t});\n\t}\n\n\t#getIpAccessDescription(): BX.UI.Alert\n\t{\n\t\treturn new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_IP_ACCESS', {'#ARTICLE_CODE#': 'redirect=detail&code=17300230'})}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=17300230')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t});\n\t}\n\n\t#buildPasswordRecoverySection(): ?SettingsSection\n\t{\n\t\treturn new Section({\n\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_SECTION_TITLE_PASSWORD_RECOVERY'),\n\t\t\ttitleIconClasses: 'ui-icon-set',\n\t\t\tisOpen: false,\n\t\t\tcanCollapse: false,\n\t\t});\n\t}\n\n\t#buildDevicesHistorySection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionHistory'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst devicesHistorySection = new Section(this.getValue('sectionHistory'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: devicesHistorySection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tconst devicesHistoryDescription = new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_DEVICE_HISTORY')}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=16623484')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t})\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: devicesHistoryDescription.getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tif (this.hasValue('DEVICE_HISTORY_SETTINGS'))\n\t\t{\n\t\t\tconst messageNode = Tag.render`<span>${Loc.getMessage(\n\t\t\t\t'INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT', { '#TARIFF#': 'ent250' }\n\t\t\t)}</span>`;\n\t\t\tconst cleanupDaysField = new Selector({\n\t\t\t\tlabel: this.getValue('DEVICE_HISTORY_SETTINGS').label,\n\t\t\t\tname: this.getValue('DEVICE_HISTORY_SETTINGS').name,\n\t\t\t\titems: this.getValue('DEVICE_HISTORY_SETTINGS').values,\n\t\t\t\tcurrent: this.getValue('DEVICE_HISTORY_SETTINGS').current,\n\t\t\t\tisEnable: this.getValue('DEVICE_HISTORY_SETTINGS').isEnable,\n\t\t\t\tbannerCode: 'limit_office_login_history',\n\t\t\t\thelpMessageProvider: this.helpMessageProviderFactory(messageNode),\n\t\t\t});\n\t\t\tif (!this.getValue('DEVICE_HISTORY_SETTINGS').isEnable)\n\t\t\t{\n\t\t\t\tEvent.bind(\n\t\t\t\t\tcleanupDaysField.getInputNode(),\n\t\t\t\t\t'click',\n\t\t\t\t\t() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getAnalytic()?.addEventOpenHint(this.getValue('DEVICE_HISTORY_SETTINGS').name);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tEvent.bind(\n\t\t\t\t\tmessageNode.querySelector('a'),\n\t\t\t\t\t'click',\n\t\t\t\t\t() => this.getAnalytic()?.addEventOpenTariffSelector(this.getValue('DEVICE_HISTORY_SETTINGS').name)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tSecurityPage.addToSectionHelper(cleanupDaysField, settingsSection);\n\t\t}\n\n\t\tconst goToUserListButton = Tag.render`\n\t\t\t<div class=\"ui-text-right\">\n\t\t\t\t<a class=\"ui-section__link\" href=\"/company/\" target=\"_blank\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_GO_TO_USER_LIST_LINK')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: goToUserListButton,\n\t\t\t}),\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildEventLogSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionEventLog'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst eventLogSection = new Section(this.getValue('sectionEventLog'));\n\n\t\tconst settingsSection = new SettingsSection({\n\t\t\tsection: eventLogSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tconst eventLogDescription = new BX.UI.Alert({\n\t\t\ttext: `\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_EVENT_LOG')}\n\t\t\t\t<a class=\"ui-section__link\" onclick=\"top.BX.Helper.show('redirect=detail&code=17296266')\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_CANCEL_MORE')}\n\t\t\t\t</a>\n\t\t\t`,\n\t\t\tinline: true,\n\t\t\tsize: BX.UI.Alert.Size.SMALL,\n\t\t\tcolor: BX.UI.Alert.Color.PRIMARY,\n\t\t\tanimated: true,\n\t\t})\n\n\t\tconst descriptionRow = new Row({\n\t\t\tcontent: eventLogDescription.getContainer(),\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: descriptionRow,\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\tconst goToUserListButton = this.hasValue('EVENT_LOG')\n\t\t\t? Tag.render`\n\t\t\t\t<div class=\"ui-text-right\">\n\t\t\t\t\t<a class=\"ui-section__link\" href=\"${this.getValue('EVENT_LOG')}\" target=\"_blank\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`\n\t\t\t: Tag.render`\n\t\t\t\t<div class=\"ui-text-right\">\n\t\t\t\t\t<a class=\"ui-section__link\" href=\"javascript:void(0)\" onclick=\"BX.UI.InfoHelper.show('limit_office_login_log')\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\tnew SettingsRow({\n\t\t\trow: new Row({\n\t\t\t\tcontent: goToUserListButton,\n\t\t\t}),\n\t\t\tparent: settingsSection,\n\t\t});\n\n\t\treturn settingsSection;\n\t}\n\n\t#buildBlackListSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('sectionBlackList'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet params = this.getValue('sectionBlackList');\n\t\tparams['singleLink'] = {\n\t\t\thref: '/settings/configs/mail_blacklist.php',\n\t\t};\n\n\t\treturn new Section(params);\n\t}\n}\n","import { BaseSettingsPage } from 'ui.form-elements.field';\nimport { Dom, Runtime, Type } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\nexport class ExternalTemporaryPage extends BaseSettingsPage\n{\n\t#type: ?string;\n\t#extensions: string[] = [];\n\n\tconstructor(type: string, extensions: string[])\n\t{\n\t\tsuper();\n\t\tthis.#type = type;\n\t\tthis.#extensions = extensions;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.#type;\n\t}\n\n\tonSuccessDataFetched(response)\n\t{\n\t\tRuntime\n\t\t\t.loadExtension(this.#extensions)\n\t\t\t.then((exports) => {\n\t\t\t\tlet externalPage;\n\t\t\t\tlet externalPageHasBeenFound = Object.values(exports)\n\t\t\t\t\t.some((externalPageClassOrInstance) => {\n\t\t\t\t\t\tif (Type.isObjectLike(externalPageClassOrInstance))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet pageExemplar = null;\n\t\t\t\t\t\t\tif (externalPageClassOrInstance.prototype instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpageExemplar = new externalPageClassOrInstance();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (externalPageClassOrInstance instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpageExemplar = externalPageClassOrInstance;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (pageExemplar instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\texternalPage = pageExemplar;\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t\tif (externalPageHasBeenFound === false)\n\t\t\t\t{\n\t\t\t\t\tconst event = new BaseEvent();\n\t\t\t\t\texternalPageHasBeenFound = EventEmitter.emit(\n\t\t\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\t'BX.Intranet.Settings:onExternalPageLoaded:' + this.getType(),\n\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.some((pageExemplar: BaseSettingsPage) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (pageExemplar instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\texternalPage = pageExemplar;\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t}\n\n\t\t\t\tif (externalPage instanceof BaseSettingsPage)\n\t\t\t\t{\n\t\t\t\t\tthis.getParentElement().registerPage(externalPage);\n\t\t\t\t\texternalPage.setData(response.data);\n\t\t\t\t\tthis.getParentElement().removeChild(this);\n\n\t\t\t\t\tif (Dom.isShown(this.getPage()))\n\t\t\t\t\t{\n\t\t\t\t\t\texternalPage.getParentElement().show(externalPage.getType());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.onFailDataFetched('The external page was not found.');\n\t\t\t\t}\n\n\t\t\t}, this.onFailDataFetched.bind(this))\n\t\t;\n\t}\n}\n","import {ajax} from 'main.core';\nimport type {BaseSettingsPage} from \"./pages/base-settings-page\";\n\nexport class PageManager\n{\n\t#pages: Array<BaseSettingsPage>\n\n\n\tconstructor(pages: Array<BaseSettingsPage>)\n\t{\n\t\tthis.#pages = pages;\n\t}\n\n\tfetchPage(page: BaseSettingsPage): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst pageIsFound = this.#pages.some((savedPage: BaseSettingsPage) => {\n\t\t\t\tif (page.getType() === savedPage.getType())\n\t\t\t\t{\n\t\t\t\t\tajax.runComponentAction(\n\t\t\t\t\t\t'bitrix:intranet.settings',\n\t\t\t\t\t\t'get',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: page.getType(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t).then(resolve, reject);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tif (pageIsFound !== true)\n\t\t\t{\n\t\t\t\treturn reject({error: 'The page was not found in pageManager'});\n\t\t\t}\n\t\t});\n\t}\n\n\tcollectData()\n\t{\n\t\tconst data = {};\n\t\tthis.#pages.forEach((page: BaseSettingsPage) => {\n\t\t\tif (page.hasData())\n\t\t\t{\n\t\t\t\tdata[page.getType()] = this.constructor.getFormData(page.getFormNode());\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tstatic getFormData(formNode: HTMLElement): ?Object\n\t{\n\t\treturn BX.ajax.prepareForm(formNode).data;\n\t}\n}","export class DataSource\n{\n\tfetch(query: string): Promise\n\t{\n\t\treturn new Promise();\n\t}\n}","import { Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { DataSource } from './data-source';\n\nexport class Searcher\n{\n\tstatic STATE_READY = 'ready';\n\tstatic STATE_WAIT = 'wait';\n\tstatic STATE_NOT_FOUND = 'not_found';\n\n\t#query: string;\n\t#minSymbol: number;\n\t#dataSource: DataSource;\n\t#result: Array;\n\t#state: string; // ready | wait;\n\n\tconstructor(dataSource: DataSource, minSymbol: number = 3)\n\t{\n\t\tif (!(dataSource instanceof DataSource))\n\t\t{\n\t\t\tthrow new Error('Unexpected type, expect: DataSource');\n\t\t}\n\t\tthis.#dataSource = dataSource;\n\t\tthis.#minSymbol = minSymbol;\n\t\tthis.#result = [];\n\t\tthis.#state = 'ready';\n\t}\n\n\tfind(query: string)\n\t{\n\t\tif (query.length < this.#minSymbol)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.#query = query;\n\t\tthis.changeState(Searcher.STATE_WAIT);\n\t\tthis.#dataSource\n\t\t\t.fetch(this.#query)\n\t\t\t.then(\n\t\t\t\tthis.resolve.bind(this),\n\t\t\t\tthis.reject.bind(this),\n\t\t\t);\n\t}\n\n\tchangeState(state: string)\n\t{\n\t\tif (this.#state === state)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#state = state;\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'BX.Intranet.Settings:searchChangeState', {\n\t\t\t\tstate: this.#state,\n\t\t\t},\n\t\t);\n\n\t}\n\n\tgetMinSymbol(): number\n\t{\n\t\treturn this.#minSymbol;\n\t}\n\n\tresolve(response)\n\t{\n\t\tthis.#result = response.data;\n\n\t\tthis.changeState(this.#result.length > 0 ? Searcher.STATE_READY : Searcher.STATE_NOT_FOUND);\n\t}\n\n\treject(response)\n\t{\n\t\tthis.#result = [];\n\n\t\tthis.changeState(Searcher.STATE_READY);\n\t}\n\n\tgetResult(): Array\n\t{\n\t\treturn this.#result;\n\t}\n\n\tgetOthers()\n\t{\n\t\treturn [\n\t\t\t{\n\t\t\t\tlink: '/stream/',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_TITLE_TOOL_TEAMWORK'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlink: '/tasks/config/permissions/',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_TITLE_TOOL_TASKS'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlink: '/crm/configs/',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_TITLE_TOOL_CRM'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlink: '/shop/documents/?inventoryManagementSource=inventory',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_TITLE_TOOL_WAREHOUSE'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlink: '/sites/',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_TITLE_TOOL_SITES'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tlink: '/company/vis_structure.php',\n\t\t\t\ttitle: Loc.getMessage('INTRANET_SETTINGS_TITLE_TOOL_COMPANY'),\n\t\t\t},\n\t\t];\n\t}\n}","import { EventEmitter } from 'main.core.events';\nimport { Popup } from 'main.popup';\nimport { Event, Tag, Dom, Loc, Type } from 'main.core';\nimport { Searcher } from './searcher';\nimport { Loader } from 'main.loader';\n\nexport type renderOptions = {\n\tsearcher: Searcher,\n\tinputNode: HTMLElement,\n\ticonContainer: HTMLElement,\n\ttimeout: number\n}\n\nexport class Renderer\n{\n\t#searcher: Searcher;\n\t#inputNode: HTMLElement;\n\t#iconContainer: HTMLElement;\n\t#popup: Popup;\n\t#timeoutId: number;\n\t#timeout: number;\n\t#nav: SearchNavigation;\n\n\tstatic EXTERNAL_LINK = 'EXTERNAL_LINKS';\n\n\tconstructor(options: renderOptions)\n\t{\n\t\tthis.#searcher = options.searcher;\n\t\tthis.#inputNode = options.inputNode;\n\t\tthis.#iconContainer = options.iconContainer;\n\t\tthis.#timeout = options.timeout;\n\t\tthis.#nav = new SearchNavigation();\n\n\t\tthis.#popup = new Popup('settings-search-popup', this.#inputNode, {\n\t\t\tcloseByEsc: true,\n\t\t\tangle: false,\n\t\t\toverlay: false,\n\t\t\twidth: 332,//470,//this.#inputNode.offsetWidth,\n\t\t\toffsetTop: 4,\n\t\t\tbackground: '#fff',\n\t\t\tcontentBackground: '#fff',\n\t\t\tcontentPadding: 0,\n\t\t\tautoHide: true,\n\t\t\tborderRadius: 6,\n\t\t\tautoHideHandler: (event) => {\n\t\t\t\treturn event.target !== this.#inputNode;\n\t\t\t},\n\n\t\t});\n\t\tthis.#popup.setContent(this.renderContent());\n\n\t\tEvent.bind(this.#inputNode, 'focus', () => {\n\t\t\tif (!this.#popup.isShown())\n\t\t\t{\n\t\t\t\tthis.#popup.show();\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Intranet.Settings:searchChangeState', (event) => {\n\t\t\tconst {state} = event.data;\n\t\t\tthis.#nav.clean();\n\t\t\tthis.#popup.setContent(this.renderContent(state));\n\t\t});\n\n\t\tEvent.bind(this.#iconContainer.querySelector('#intranet-settings-icon-delete'), 'click', () => {\n\t\t\tDom.removeClass(this.#iconContainer, 'main-ui-show');\n\t\t\tthis.#inputNode.value = '';\n\t\t})\n\n\t\tEvent.bind(this.#inputNode, 'keyup', (event) => {\n\t\t\tif (\n\t\t\t\tevent.keyCode === 37\n\t\t\t\t|| event.keyCode === 39\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.keyCode === 13) //enter\n\t\t\t{\n\t\t\t\tthis.#nav.current().dispatchEvent(new MouseEvent('click'));\n\t\t\t\tthis.#nav.unHighlightAll();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.keyCode === 38) //up\n\t\t\t{\n\t\t\t\tthis.#nav.prev().highlight();\n\t\t\t\tif (!Type.isNil(this.#nav.current()))\n\t\t\t\t{\n\t\t\t\t\tthis.updateScroll(this.#nav.current());\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.keyCode === 40) //down\n\t\t\t{\n\t\t\t\tthis.#nav.next().highlight();\n\n\t\t\t\tif (!Type.isNil(this.#nav.current()))\n\t\t\t\t{\n\t\t\t\t\tthis.updateScroll(this.#nav.current());\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.getQuery().length > 0)\n\t\t\t{\n\t\t\t\tDom.addClass(this.#iconContainer, 'main-ui-show');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.#iconContainer, 'main-ui-show');\n\t\t\t}\n\n\t\t\tif (!this.#popup.isShown() && this.getQuery().length > 0)\n\t\t\t{\n\t\t\t\tthis.#popup.show();\n\t\t\t}\n\t\t\tthis.find();\n\t\t});\n\t}\n\n\tupdateScroll(element): void\n\t{\n\t\tconst rect = element.getBoundingClientRect();\n\t\tconst container = this.#popup.getContentContainer().firstElementChild;\n\t\tconst relTop = rect.top - container.getBoundingClientRect().top;\n\t\tconst relBot = rect.bottom - container.getBoundingClientRect().bottom;\n\t\tconst padding = 10;\n\t\tif (relTop < 0 && relBot <= 0) //invisible top\n\t\t{\n\t\t\tcontainer.scrollTo(0, relTop + container.scrollTop - padding);\n\t\t}\n\t\telse if (relTop >= 0 && relBot > 0) //invisible bottom\n\t\t{\n\t\t\tcontainer.scrollTo(0, relBot + container.scrollTop + padding);\n\t\t}\n\t}\n\n\trenderWait(): HTMLElement\n\t{\n\t\tconst loaderContainer = Tag.render`<span class=\"title-search-waiter-img\"></span>`;\n\t\tconst loader = new Loader({\n\t\t\ttarget: loaderContainer,\n\t\t\tsize: 20,\n\t\t\tmode: 'inline',\n\t\t});\n\t\tloader.show();\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"title-search-waiter\">\n\t\t\t\t${loaderContainer}\n\t\t\t\t<span class=\"title-search-waiter-text\">${Loc.getMessage('INTRANET_SETTINGS_TITLE_SEARCHING')}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tfind(): void\n\t{\n\t\tclearTimeout(this.#timeoutId);\n\t\tthis.#timeoutId = setTimeout(() => {\n\t\t\tthis.#searcher.find(this.getQuery());\n\t\t}, this.#timeout);\n\n\t}\n\n\tgetQuery(): string\n\t{\n\t\treturn BX.util.trim(this.#inputNode.value);\n\t}\n\n\tcreateLinkOption(option): HTMLElement\n\t{\n\t\tconst link =  Dom.create('a', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'search-title-top-item-link',\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tmouseenter: (event) => {\n\t\t\t\t\tthis.#nav.unHighlightAll();\n\t\t\t\t\tthis.#nav.cursorTo(event.target);\n\t\t\t\t\tSearchNavigation.highlight(event.target);\n\t\t\t\t},\n\t\t\t\tmouseleave: (event) => {\n\t\t\t\t\tSearchNavigation.unHighlight(event.target);\n\t\t\t\t}\n\t\t\t},\n\t\t\tattrs: {\n\t\t\t\ttitle: option.title,\n\t\t\t\thref: Type.isStringFilled(option.url) ? option.url : '#',\n\t\t\t\ttarget: '_blank'\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tTag.render`<span class=\"search-title-top-item-text\"><span>${option.title}</span></span>`,\n\t\t\t],\n\t\t});\n\t\tthis.#nav.add(link);\n\t\treturn link;\n\t}\n\n\tcreateBtnOption(page: string, option): HTMLElement\n\t{\n\t\tconst link = Dom.create('a', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'search-title-top-item-link',\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tclick: (event) => {\n\t\t\t\t\tEventEmitter.emit(\n\t\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t'BX.Intranet.SettingsNavigation:onMove',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpage: page,\n\t\t\t\t\t\t\tfieldName: option.code,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tthis.#inputNode.blur();\n\t\t\t\t\tthis.#popup.close();\n\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t},\n\t\t\t\tmouseenter: (event) => {\n\t\t\t\t\tthis.#nav.unHighlightAll();\n\t\t\t\t\tthis.#nav.cursorTo(event.target);\n\t\t\t\t\tSearchNavigation.highlight(event.target);\n\t\t\t\t},\n\t\t\t\tmouseleave: (event) => {\n\t\t\t\t\tSearchNavigation.unHighlight(event.target);\n\t\t\t\t}\n\t\t\t},\n\t\t\tattrs: {\n\t\t\t\ttitle: option.title,\n\t\t\t\thref: \"#\",\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tTag.render`<span class=\"search-title-top-item-text\"><span>${option.title}</span></span>`,\n\t\t\t],\n\t\t});\n\t\tthis.#nav.add(link);\n\t\treturn Tag.render`<div class=\"search-title-top-item search-title-top-item-js\">${link}</div>`;\n\t}\n\n\trenderOption(page: string, option): HTMLElement\n\t{\n\t\tlet link;\n\t\tif (page === Renderer.EXTERNAL_LINK)\n\t\t{\n\t\t\tlink = this.createLinkOption(option);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlink = this.createBtnOption(page, option)\n\t\t}\n\n\t\treturn Tag.render`<div class=\"search-title-top-item search-title-top-item-js\">${link}</div>`;\n\t}\n\n\trenderGroup(group): HTMLElement\n\t{\n\t\tconst optionsContainer = Tag.render`<div class=\"search-title-top-list search-title-top-list-js\"></div>`;\n\t\tgroup.options.forEach((option) => {\n\t\t\tDom.append(this.renderOption(group.page, option), optionsContainer);\n\t\t});\n\t\treturn Tag.render`\n\t\t\t<div class=\"search-title-top-block search-title-top-block-sonetgroups\">\n\t\t\t\t<div class=\"search-title-top-subtitle\">\n\t\t\t\t\t<div class=\"search-title-top-subtitle-text\">${group.title}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"search-title-top-list-wrap\">\n\t\t\t\t\t${optionsContainer}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderContent(state: 'wait'|'ready'|'not_found' = 'ready'): HTMLElement\n\t{\n\t\tconst optionsContainer = Tag.render`<div class=\"search-title-top-result\"></div>`;\n\n\t\tswitch (state)\n\t\t{\n\t\t\tcase 'ready':\n\t\t\t\tDom.append(this.renderSearchResult(this.#searcher.getResult()), optionsContainer);\n\t\t\t\tbreak;\n\t\t\tcase 'wait':\n\t\t\t\tDom.append(this.renderWait(), optionsContainer);\n\t\t\t\tbreak;\n\t\t\tcase 'not_found':\n\t\t\t\tDom.append(this.renderNotFound(), optionsContainer);\n\t\t\t\tbreak;\n\t\t}\n\t\tDom.append(this.renderOthers(this.#searcher.getOthers()), optionsContainer);\n\n\t\treturn optionsContainer;\n\t}\n\n\trenderNotFound(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"title-search-waiter\">\n\t\t\t\t<span class=\"title-search-waiter-text\">${Loc.getMessage('INTRANET_SETTINGS_SEARCH_NOT_FOUND')}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderSearchResult(result): HTMLElement\n\t{\n\t\tconst container = Tag.render`<div class=\"search-title-content-result\"></div>`;\n\t\tresult.forEach((item) => {\n\t\t\tDom.append(this.renderGroup(item), container);\n\t\t});\n\n\t\treturn container;\n\t}\n\n\trenderOthers(links): HTMLElement\n\t{\n\t\tconst wraper = Tag.render`<div class=\"search-title-top-list search-title-top-list-js\"></div>`;\n\t\tconst other = Tag.render`\n\t\t<div class=\"search-title-top-block search-title-top-block-tools\">\n\t\t\t<div class=\"search-title-top-subtitle\">\n\t\t\t\t<div class=\"search-title-top-subtitle-text\">${Loc.getMessage('INTRANET_SETTINGS_TITLE_SEARCH_IN')}</div>\n\t\t\t</div>\n\t\t\t<div class=\"search-title-top-list-height-wrap\">\n\t\t\t\t\t<div class=\"search-title-top-list-wrap\">${wraper}</div>\n\t\t\t\t</div>\n\t\t</div>\n\t\t`;\n\n\t\tlinks.forEach((link) => {\n\t\t\tDom.append(this.renderOtherLink(link), wraper);\n\t\t});\n\n\t\treturn other\n\t}\n\n\trenderOtherLink(link): HTMLElement\n\t{\n\t\tconst linkTag = Dom.create('a', {\n\t\t\tprops: {\n\t\t\t\tclassName: 'search-title-top-item-link',\n\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tmouseenter: (event) => {\n\t\t\t\t\tthis.#nav.unHighlightAll();\n\t\t\t\t\tthis.#nav.cursorTo(event.target);\n\t\t\t\t\tSearchNavigation.highlight(event.target);\n\t\t\t\t},\n\t\t\t\tmouseleave: (event) => {\n\t\t\t\t\tSearchNavigation.unHighlight(event.target);\n\t\t\t\t}\n\t\t\t},\n\t\t\tattrs: {\n\t\t\t\ttitle: link.title,\n\t\t\t\thref: link.link,\n\t\t\t\ttarget: 'blank_'\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tTag.render`<span class=\"search-title-top-item-text\"><span>${link.title}</span></span>`,\n\t\t\t],\n\t\t});\n\t\tthis.#nav.add(linkTag);\n\n\t\treturn Tag.render`\n\t\t<div class=\"search-title-top-item search-title-top-item-js\">\n\t\t\t${linkTag}\n\t\t</div>`;\n\t}\n}\n\nclass SearchNavigation\n{\n\t#index: ?number = null;\n\t#elementList: Array<HTMLElement>;\n\n\tconstructor(nodeList: Array<HTMLElement> = [])\n\t{\n\t\tthis.#elementList = nodeList;\n\t}\n\n\tadd(element: HTMLElement): void\n\t{\n\t\tthis.#elementList.push(element);\n\t}\n\n\tclean(): void\n\t{\n\t\tthis.#index = null;\n\t\tthis.#elementList = [];\n\t}\n\n\tnext(): SearchNavigation\n\t{\n\t\tif (Type.isNil(this.#index))\n\t\t{\n\t\t\tthis.#index = 0;\n\n\t\t\treturn this;\n\t\t}\n\n\t\tif (this.#elementList.length - 1 > this.#index)\n\t\t{\n\t\t\tthis.#index++;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tcurrent(): ?HTMLElement\n\t{\n\t\tif (Type.isNil(this.#index))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.#elementList[this.#index];\n\t}\n\n\tprev(): SearchNavigation\n\t{\n\t\tif (Type.isNil(this.#index))\n\t\t{\n\t\t\tthis.#index = this.#elementList.length - 1;\n\n\t\t\treturn this;\n\t\t}\n\n\t\tif (this.#index > 0)\n\t\t{\n\t\t\tthis.#index -= 1;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\thighlight(): void\n\t{\n\t\tthis.unHighlightAll();\n\t\tif (!Dom.hasClass(this.current(), 'active'))\n\t\t{\n\t\t\tDom.addClass(this.current(), 'active');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tunHighlight(): void\n\t{\n\t\tif (Dom.hasClass(this.current(), 'active'))\n\t\t{\n\t\t\tDom.removeClass(this.current(), 'active');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tstatic highlight(element: HTMLElement): void\n\t{\n\t\telement.classList.add('active');\n\t}\n\n\tstatic unHighlight(element: HTMLElement): void\n\t{\n\t\telement.classList.remove('active');\n\t}\n\n\tcursorTo(element: HTMLElement): void\n\t{\n\t\tthis.#elementList.forEach((item, index) => {\n\t\t\tif (item === element)\n\t\t\t{\n\t\t\t\tthis.#index = index;\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\t}\n\n\tunHighlightAll(): void\n\t{\n\t\tthis.#elementList.forEach((item) => {\n\t\t\tSearchNavigation.unHighlight(item);\n\t\t});\n\t}\n}\n","import { ajax } from 'main.core';\nimport { DataSource } from './data-source';\n\nexport class ServerDataSource extends DataSource\n{\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\tfetch(query: string): Promise\n\t{\n\t\treturn ajax.runComponentAction(\n\t\t\t'bitrix:intranet.settings',\n\t\t\t'search',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: { query: query }\n\t\t\t}\n\t\t);\n\t}\n}","export class Permission\n{\n\tstatic READ = 1 << 0;\n\tstatic EDIT = 1 << 2;\n\n\t#permission: number\n\n\tconstructor(permission: number = 0)\n\t{\n\t\tthis.#permission = permission\n\t}\n\n\tcanRead(): boolean\n\t{\n\t\treturn !!(this.#permission & Permission.READ);\n\t}\n\n\tcanEdit(): boolean\n\t{\n\t\treturn !!(this.#permission & Permission.EDIT);\n\t}\n\n\tgetPermission(): number\n\t{\n\t\treturn this.#permission;\n\t}\n}","import { ajax, Http, Event, Runtime } from 'main.core';\nimport { HelpMessage } from 'ui.section';\nimport { Analytic } from './analytic';\nimport { Navigation } from './navigation';\nimport { ToolsPage } from './pages/tools-page';\nimport { EmployeePage } from './pages/employee-page';\nimport { RequisitePage } from './pages/requisite-page';\nimport { CommunicationPage } from './pages/communication-page';\nimport { PortalPage } from './pages/portal-page';\nimport { ConfigurationPage } from './pages/configuration-page';\nimport { SchedulePage } from './pages/schedule-page';\nimport { GdprPage } from './pages/gdpr-page';\nimport { SecurityPage } from './pages/security-page';\nimport { ExternalTemporaryPage } from './pages/external-temporary-page';\nimport { Type, Dom, Loc } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { PageManager } from './page-manager';\nimport { BaseSettingsElement, ErrorCollection, BaseSettingsPage } from 'ui.form-elements.field';\nimport { Searcher } from './search-engine/searcher';\nimport { Renderer } from './search-engine/renderer';\nimport { ServerDataSource } from './search-engine/server-data-source';\nimport { Permission } from './permission';\n\nimport './css/style.css';\nimport './css/main_search_field.css';\n\nexport class Settings extends BaseSettingsElement\n{\n\t#basePage: string;\n\tisChanged: boolean = false;\n\t#menuNode: ?HTMLElement;\n\t#settingsNode: ?HTMLElement;\n\t#contentNode: ?HTMLElement;\n\t#pageManager: ?PageManager;\n\t#cancelMessageBox: ?MessageBox;\n\t#analytic: Analytic;\n\t#navigator: Navigation;\n\t#permission: Permission;\n\t#pagesPermission;\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tthis.#analytic = new Analytic({\n\t\t\tisAdmin: true,\n\t\t\tlocationName: 'settings',\n\t\t\tisBitrix24: params.isBitrix24 === true,\n\t\t\tanalyticContext: Type.isStringFilled(params.analyticContext) ? params.analyticContext : null\n\t\t});\n\t\tthis.#analytic.addEventOpenSettings();\n\t\tthis.#analytic.addEventStartPagePage(params.startPage);\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'button-click',\n\t\t\t(event) => {\n\t\t\t\tconst [clickedBtn] = event.data;\n\t\t\t\tif (clickedBtn.TYPE === 'save')\n\t\t\t\t{\n\t\t\t\t\tthis.#onClickSaveBtn(event);\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'SidePanel.Slider:onClose',\n\t\t\tthis.#onSliderCloseHandler.bind(this),\n\t\t);\n\t\tthis.#menuNode = Type.isDomNode(params.menuNode) ? params.menuNode : null;\n\t\tthis.#settingsNode = Type.isDomNode(params.settingsNode) ? params.settingsNode : null;\n\t\tthis.#contentNode = Type.isDomNode(params.contentNode) ? params.contentNode : null;\n\t\tthis.#basePage = Type.isString(params.basePage) ? params.basePage : '';\n\t\tthis.#permission = params.permission instanceof Permission ? params.permission : new Permission();\n\t\tthis.#pagesPermission = params.pagesPermission;\n\n\t\tif (this.#settingsNode)\n\t\t{\n\t\t\tthis.#settingsNode.querySelector('.ui-button-panel input[name=\"cancel\"]')\n\t\t\t\t.addEventListener('click', this.#onClickCancelBtn);\n\t\t}\n\n\t\tparams.pages\n\t\t\t.concat(\n\t\t\t\tObject\n\t\t\t\t\t.values(params.externalPages)\n\t\t\t\t\t.map(({type, extensions}) => new ExternalTemporaryPage(type, extensions))\n\t\t\t)\n\t\t\t.forEach((page: BaseSettingsPage) => this.registerPage(page).expandPage(params.subPages[page.getType()]))\n\t\t;\n\n\t\tconst toolsMenuItem = BX.UI.DropdownMenuItem.getItemByNode(this.#menuNode.querySelector('[data-type=\"tools\"]'));\n\t\tif (toolsMenuItem.subItems && toolsMenuItem.subItems.length > 0)\n\t\t{\n\t\t\ttoolsMenuItem.hideSubmenu();\n\t\t\ttoolsMenuItem.setDefaultToggleButtonName();\n\t\t}\n\n\t\tthis.#navigator = new Navigation(this);\n\n\t\tif (this.#menuNode)\n\t\t{\n\t\t\tthis.#menuNode.querySelectorAll('li.ui-sidepanel-menu-item a.ui-sidepanel-menu-link')\n\t\t\t\t.forEach(item => {\n\t\t\t\t\tconst helpPopup = new HelpMessage(\n\t\t\t\t\t\titem.dataset.type + '_help-msg',\n\t\t\t\t\t\titem,\n\t\t\t\t\t\tLoc.getMessage('INTRANET_SETTINGS_PERMISSION_MSG')\n\t\t\t\t\t);\n\t\t\t\t\thelpPopup.getPopup().setWidth(275);\n\t\t\t\t\tconst page = this.getNavigator().getPageByType(item.dataset.type);\n\t\t\t\t\titem.addEventListener('click', (event) => {\n\t\t\t\t\t\tif (page?.getPermission()?.canRead())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.show(item.dataset.type);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thelpPopup.show();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t}\n\n\tregisterPage(page: BaseSettingsPage): BaseSettingsPage\n\t{\n\t\tpage.setParentElement(this);\n\t\tpage.setPermission(new Permission(this.#pagesPermission[page.getType()] ?? null))\n\t\tpage.subscribe('change', this.#onEventChangeData.bind(this))\n\t\t\t.subscribe('fetch', this.#onEventFetchPage.bind(this))\n\t\t;\n\t\tpage.setAnalytic(this.#analytic);\n\n\t\treturn page;\n\t}\n\n\tgetCurrentPage(): ?BaseSettingsPage\n\t{\n\t\treturn this.getNavigator().getCurrentPage();\n\t}\n\n\tgetNavigator(): Navigation\n\t{\n\t\treturn this.#navigator\n\t}\n\n\tshow(type: string, option?: string): void\n\t{\n\t\tif (!Type.isDomNode(this.#contentNode))\n\t\t{\n\t\t\tconsole.log('Not found settings container');\n\t\t\treturn;\n\t\t}\n\t\tif (!this.#permission.canRead())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst nextPage = this.getNavigator().getPageByType(type);\n\n\t\tif (this.getCurrentPage() === nextPage)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getNavigator().changePage(nextPage);\n\t\tDom.hide(this.getNavigator().getPrevPage()?.getPage());\n\t\tif (Type.isNil(this.getNavigator().getCurrentPage().getPage().parentNode))\n\t\t{\n\t\t\tDom.append(this.getNavigator().getCurrentPage().getPage(), this.#contentNode);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.show(this.getNavigator().getCurrentPage().getPage());\n\t\t}\n\t\tthis.activateMenuItem(type);\n\n\t\tthis.#analytic.addEventChangePage(type);\n\t\tthis.getNavigator().updateAddressBar();\n\t\tEventEmitter.emit(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'BX.Intranet.Settings:onAfterShowPage', {\n\t\t\t\tsource: this,\n\t\t\t\tpage: nextPage,\n\t\t\t},\n\t\t);\n\n\t\tif (Type.isString(option) && option !== '')\n\t\t{\n\t\t\tEventEmitter.subscribeOnce(\n\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t'BX.Intranet.Settings:onPageComplete',\n\t\t\t\t() => {\n\t\t\t\t\tconsole.log(option);\n\t\t\t\t\tthis.getNavigator().moveTo(nextPage, option);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tactivateMenuItem(type: string)\n\t{\n\t\tconst menuItem = BX.UI.DropdownMenuItem.getItemByNode(\n\t\t\tthis.#menuNode.querySelector(`a.ui-sidepanel-menu-link[data-type=\"${type}\"]`)\n\t\t);\n\t\tmenuItem && menuItem.setActiveHandler();\n\t}\n\n\t#getPageManager(): PageManager\n\t{\n\t\tif (!this.#pageManager)\n\t\t{\n\t\t\tthis.#pageManager = (new PageManager(this.getChildrenElements()))\n\t\t}\n\t\treturn this.#pageManager;\n\t}\n\n\t#onEventFetchPage(event: BaseEvent): Promise\n\t{\n\t\treturn this.#getPageManager().fetchPage(event.getTarget());\n\t}\n\n\t#onSliderCloseHandler(event: BaseEvent)\n\t{\n\t\tconst [panelEvent] = event.getCompatData();\n\t\tif (this.#cancelMessageBox instanceof MessageBox)\n\t\t{\n\t\t\tpanelEvent.denyAction();\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.isChanged && panelEvent.slider.getData()?.get('ignoreChanges') !== true)\n\t\t{\n\t\t\tpanelEvent.denyAction();\n\t\t\tthis.#cancelMessageBox = MessageBox.create({\n\t\t\t\tmessage: Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_DESC'),\n\t\t\t\tmodal: true,\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_OK'),\n\t\t\t\t\t\tcolor: BX.UI.Button.Color.SUCCESS,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.Settings:onCancel', {});\n\t\t\t\t\t\t\t\tpanelEvent.slider.getData().set('ignoreChanges', true);\n\t\t\t\t\t\t\t\tthis.isChanged = false;\n\t\t\t\t\t\t\t\tBX.UI.ButtonPanel.hide();\n\t\t\t\t\t\t\t\tthis.#cancelMessageBox.close();\n\t\t\t\t\t\t\t\tthis.#cancelMessageBox = null;\n\t\t\t\t\t\t\t\tpanelEvent.slider.close();\n\t\t\t\t\t\t\t\tpanelEvent.slider.destroy();\n\n\t\t\t\t\t\t\t\tif (this.#basePage.includes('/configs/')) {\n\t\t\t\t\t\t\t\t\tthis.#reload('/index.php');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tnew BX.UI.CancelButton({\n\t\t\t\t\t\ttext: Loc.getMessage('INTRANET_SETTINGS_CONFIRM_ACTION_CANCEL'),\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tthis.#cancelMessageBox.close();\n\t\t\t\t\t\t\t\tthis.#cancelMessageBox = null;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t});\n\t\t\treturn this.#cancelMessageBox.show();\n\t\t}\n\n\t\tif (this.#basePage.includes('/configs/') || this.reloadAfterClose)\n\t\t{\n\t\t\tthis.#reload('/index.php');\n\t\t}\n\t}\n\n\t#reload(url: ?string = null)\n\t{\n\t\tconst loader =  document.querySelector('#ui-sidepanel-wrapper-loader');\n\t\tif (loader)\n\t\t{\n\t\t\tloader.style.display = '';\n\t\t}\n\t\tif (Type.isString(url))\n\t\t{\n\t\t\ttop.window.location.href = url;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttop.window.location.href = this.#basePage;\n\t\t}\n\t}\n\n\t#onEventChangeData(event)\n\t{\n\t\tif (!this.#permission.canEdit())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.isChanged = true;\n\t\tBX.UI.ButtonPanel.show();\n\t}\n\n\t#onClickSaveBtn(event)\n\t{\n\t\tlet data = this.#getPageManager().collectData();\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.Settings:onBeforeSave', {\n\t\t\tdata: data,\n\t\t});\n\t\tthis.#analytic.send();\n\t\tajax.runComponentAction(\n\t\t\t'bitrix:intranet.settings',\n\t\t\t'set',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: Http.Data.convertObjectToFormData(data),\n\t\t\t},\n\t\t).then(this.#successSaveHandler.bind(this), this.#failSaveHandler.bind(this));\n\t}\n\n\t#successSaveHandler(response: Object)\n\t{\n\t\tthis.isChanged = false;\n\t\tthis.#hideWaitIcon();\n\t\tBX.UI.ButtonPanel.hide();\n\t\t// EventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.Settings:onSuccessSave', {});\n\t\tthis.reloadAfterClose = true;\n\t}\n\n\t#failSaveHandler(response: Object)\n\t{\n\t\tlet errorCollection = this.#prepareErrorCollection(response.errors);\n\t\tthis.#hideWaitIcon();\n\n\t\tEventEmitter.emit('BX.UI.FormElement.Field:onFailedSave', {\n\t\t\terrors: errorCollection,\n\t\t});\n\n\t\tlet pageType = this.#selectPageForError(errorCollection);\n\t\tthis.show(pageType);\n\t}\n\n\t#prepareErrorCollection(rawErrors): Object\n\t{\n\t\tlet errorCollection = {};\n\t\tfor (let error of rawErrors)\n\t\t{\n\t\t\tlet type = error.customData?.page;\n\t\t\tlet field = error.customData?.field;\n\t\t\tif (Type.isNil(type) || Type.isNil(field))\n\t\t\t{\n\t\t\t\tErrorCollection.showSystemError(Loc.getMessage('INTRANET_SETTINGS_ERROR_FETCH_DATA'));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (Type.isNil(errorCollection[type]))\n\t\t\t{\n\t\t\t\terrorCollection[type] = {};\n\t\t\t}\n\t\t\tif (Type.isNil(errorCollection[type][field]))\n\t\t\t{\n\t\t\t\terrorCollection[type][field] = [];\n\t\t\t}\n\t\t\terrorCollection[type][field].push(error.message);\n\t\t}\n\n\t\treturn errorCollection;\n\t}\n\n\t#onClickCancelBtn(event)\n\t{\n\t\ttop.BX.SidePanel.Instance.close();\n\t}\n\n\t#hideWaitIcon()\n\t{\n\t\tlet saveBtnNode = document.querySelector('#intranet-settings-page #ui-button-panel-save');\n\t\tDom.removeClass(saveBtnNode, 'ui-btn-wait');\n\t}\n\n\t#selectPageForError(errors): string\n\t{\n\t\tfor (let pageType in errors)\n\t\t{\n\t\t\treturn pageType;\n\t\t}\n\t}\n}\n\nexport {\n\tToolsPage,\n\tEmployeePage,\n\tPortalPage,\n\tCommunicationPage,\n\tRequisitePage,\n\tConfigurationPage,\n\tSchedulePage,\n\tGdprPage,\n\tSecurityPage,\n\tRenderer,\n\tSearcher,\n\tServerDataSource,\n\tPermission,\n};"],"names":["Analytic","context","eventType","eventData","isBitrix24","Object","keys","length","ajax","runComponentAction","mode","data","then","options","event","AnalyticSettingsEvent","OPEN","tool","category","p1","isAdmin","AnalyticSettingsUserRole","ADMIN","NOT_ADMIN","c_section","analyticContext","c_element","locationName","sendData","fieldName","addEvent","page","START_PAGE","VIEW","toolName","state","type","p2","AnalyticSettingsTurnState","ON","OFF","AnalyticSettingsCategory","SiteTitle24Field","params","_classPrivateFieldInitSpec","setEventNamespace","Checker","id","inputName","title","Loc","getMessage","size","isEnable","checked","value","bannerCode","hideSeparator","Tag","render","BaseSettingsElement","SiteTitleField","setParentElement","parent","siteTitleOptions","canUserEditTitle","logo24","canUserEditLogo24","labels","siteTitleLabels","setInterval","monitorInput","bind","clearInterval","getInputNode","EventEmitter","emit","GLOBAL_TARGET","getEventNamespace","BaseEvent","stopInputMonitoring","Event","startInputMonitoring","getFieldView","subscribe","getData","getId","getName","getLabel","TextInput","placeholder","label","Navigation","settings","getCurrentPage","getType","moveTo","pageObj","getPageByType","hasData","subscribeOnce","hasContent","show","getPages","find","BaseSettingsPage","console","log","getChildrenElements","url","URL","window","location","href","searchParams","set","top","history","replaceState","toString","rootNode","node","RecursiveFilteringVisitor","startFrom","SettingsSection","getSectionView","TabField","SettingsField","shift","element","headerOffset","elementPosition","getBoundingClientRect","offsetPosition","pageYOffset","scrollTo","behavior","fieldNode","findByFieldName","Type","isNil","isColored","AscendingOpeningVisitor","SettingsRow","getRowView","toggle","tabs","getParentElement","TabsField","activateTab","highlight","scrollToNode","ToolsPage","_classPrivateMethodInitSpec","titlePage","descriptionPage","contentNode","description","Row","content","getDescription","getContainer","row","hasValue","_classPrivateMethodGet","renderTo","descriptionText","BX","UI","Alert","text","inline","Size","SMALL","color","Color","PRIMARY","animated","tools","getValue","startSort","forEach","item","push","menuId","subgroups","toolSelectorItems","toolSelector","SwitcherNested","code","name","link","getPermission","canEdit","infoHelperCode","linkTitle","isChecked","enabled","mainInputName","isOpen","items","isDisabled","isDefault","helpMessage","toolSelectorSection","section","Dom","style","attr","append","child","parentToolName","disabled","subgroupConfig","isNull","toolSelectorItem","SwitcherNestedItem","settingsPath","settingsTitle","getSwitcher","getNode","opacity","getAnalytic","addEventToggleTools","EventBX","Section","toolId","bindElement","message","PopupWindowManager","create","darkMode","autoHide","angle","offsetLeft","bindOptions","position","closeByEsc","EmployeePage","response","querySelector","innerText","profileSection","inviteSection","additionalSection","sectionSettings","companyPulseField","switcher","addEventConfigEmployee","CHANGE_QUICK_REG","addToSectionHelper","hasSelectValue","currentValue","current","values","selected","nameFormatField","Selector","hints","settingsField","fieldView","customFormatNameField","customFormatNameRow","isHidden","addEventListener","target","hide","formatNumberField","addressFormatField","addressFormatRow","separator","className","showBirthYearField","InlineChecker","fastReqField","inviteToUserField","CHANGE_REG_ALL","showQuitField","newUserField","newUserLfField","extranetField","CHANGE_EXTRANET_INVITE","ButtonBar","buttons","button","LandingButton","Button","round","noCaps","MEDIUM","LIGHT_BORDER","apply","LandingButtonState","EditState","landing","setText","setDropdown","bindEvent","openNewTab","edit_url","open","focus","ShowState","menuRenderer","unbindEvent","setColor","setMenu","CreateState","request","getState","ButtonState","WAITING","setState","is_public","ErrorCollection","showSystemError","errors","LandingCard","landingOptions","qrContainer","QRCode","public_url","width","height","onclickOpenEdit","qrRender","getCopyButton","EXTRA_SMALL","SUCCESS","events","click","clipboard","copy","Notification","Center","notify","LandingButtonFactory","landingData","renderer","btn","is_connected","getButton","maxWidth","html","companyId","company_id","requisiteId","requisite_id","bankRequisiteId","bank_requisite_id","Card","company","TITLE","isStringFilled","phone","email","site","requisiteFieldsRender","getButtonsBar","ID","fields","field","renderField","VALUE","buttonBar","attrs","getCompanyUrl","getRequisiteUrl","RequisitePage","addCustomEvent","eventName","key","reload","reqSection","sectionField","descriptionRow","companies","requisites","phones","sites","emails","landings","landingsData","isArray","defaultCompanyRow","cardRender","cardRow","addCompanyLinkRender","addEventConfigRequisite","OPEN_ADD_COMPANY","card","factory","setMenuRenderer","landingCard","COPY_LINK_CARD","landingBtn","hasClass","EDIT_CARD","CREATE_CARD","addButton","setButtonBar","CommunicationPage","chatSection","channelSection","diskSection","newsFeedSection","settingsSection","allowPostFeedField","settingsRow","userSelectorField","UserSelector","enableDepartments","encodeValue","split","decodeValue","arr","match","userSelectorRow","allowPostToAllField","likeBtnNameField","TextInputInline","hintTitle","valueColor","hintDesc","canPostGeneralChatField","canPostGeneralChatListField","canPostGeneralChatListRow","managerSelectorField","enableAll","managerSelectorRow","separatorRow","SeparatorRow","leaveMessageField","adminMessageField","allowUrlPreviewField","overdueChatsField","canPostGeneralChannelField","canPostGeneralChannelListField","canPostGeneralChannelListRow","fileViewerField","messageNode","fileLimitField","helpDesk","helpMessageProvider","helpMessageProviderFactory","fileLimitRow","addEventOpenHint","addEventOpenTariffSelector","allowEditDocField","allowEditDocRow","connectDiskField","publicLinkField","hintOn","enableBlockDocField","enableFindField","SiteDomainField","siteDomainOptions","subDomainName","setAttribute","timeout","clearTimeout","setTimeout","validateInput","hostname","mainDomainName","isRenameable","occupiedDomains","join","replace","newDomain","trim","setErrors","test","includes","cleanError","copyButton","bindCopyClick","Text","encode","renderErrors","setPortalSettings","container","portalSettings","logoNode","titleNode","logo24Node","hasAttribute","dataset","prevDisplay","display","isUndefined","innerHTML","visibility","removeProperty","logo","isPlainObject","backgroundImage","encodeURI","src","setPortalThemeSettings","themeSettings","theme","lightning","String","indexOf","removeClass","addClass","previewImage","backgroundSize","background","previewColor","backgroundColor","ThemePickerElement","themePickerSettings","allowSetDefaultTheme","applyTheme","themeNode","getItemNode","getTheme","themeId","getAppliedTheme","applyPortalThemePreview","showSaveButton","form","dispatchEvent","document","overflow","uploadBtn","handleNewThemeButtonClick","themeContainer","Array","from","getThemes","itemNode","createItem","canSetDefaultTheme","unbindAll","appendChild","renderLockElement","showBanner","Ears","noScrollbar","init","getNewThemeDialog","getClass","InfoHelper","BaseField","Intranet","Bitrix24","ThemePicker","setThemes","themes","setBaseThemes","baseThemes","applyThemeAssets","getContentContainer","closure","handleRemoveBtnClick","getThemeId","handleItemClick","addItem","SiteThemePickerField","baseEvent","HiddenInput","defaultValue","helpDeskCode","SiteLogoField","canUserEditLogo","siteLogoOptions","siteLogoLabel","TileWidget","StackWidget","StackWidgetSize","defaultOptions","maxFileCount","acceptOnlyImages","multiple","acceptedFileTypes","error","onFileError","onLogoAdd","onLogoRemove","preventDefault","allowReplaceSingle","hiddenFieldName","hiddenFieldsContainer","assignAsFile","imageResizeWidth","imageResizeHeight","imageResizeMode","imageResizeMimeType","imagePreviewWidth","imagePreviewHeight","imagePreviewResizeMode","files","serverFileId","serverId","treatImageAsFile","downloadUrl","serverPreviewUrl","serverPreviewWidth","serverPreviewHeight","preload","LARGE","removeFailedLogo","tabField","getUploader","getFiles","isLoadFailed","removeFiles","file","getClientPreviewUrl","Runtime","loadExtension","exports","initUploader","createElement","uploaderContent","Loader","destroy","SiteTitlePreviewWidget","portalThemeSettings","onChange","onSetTheme","PortalPage","addEventConfigPortal","CHANGE_PORTAL_NAME","CHANGE_PORTAL_LOGO","CHANGE_PORTAL_THEME","buildSiteTitleSection","buildDomainSection","buildThemeSection","filter","portalSettingsLabels","sectionView","AlertSize","AlertColor","siteLogoRow","previewWidget","tabsRow","tabsField","siteTitleTab","tabsOptions","siteTitleRow","siteTitleField","helpMessages","getLogo24Field","siteLogoTab","siteLogoField","inputDefaultWidth","domainSettings","firstTab","siteDomainField","CHANGE_PORTAL_SITE","firstTabRow","secondTab","replaceAll","res","isCustomizable","PortalDeleteFormTypes","PortalDeleteForm","moreDetails","DANGER","getBodyClass","getInputContainer","getButtonContainer","sendChangeFormEvent","getConfirmButton","getCancelButton","confirmButton","getConfirmButtonText","onConfirmEventHandler","props","PortalDeleteFormEmployee","isFreeLicense","WARNING","setWaiting","SidePanel","Instance","onCloseComplete","runAction","reject","PortalDeleteFormCheckword","checkWord","State","DISABLED","PortalDeleteFormMail","mailForRequest","portalUrl","mailBody","mailSubject","PortalDeleteFormNotAdmin","PortalDeleteSection","bodyActive","isEmployeesLeft","removeChild","remove","formRow","addChild","getContent","ConfigurationPage","timeFormat","dateTimeSection","mailsSection","mapsSection","cardsProductPropertiesSection","additionalSettingsSection","deletePortalSection","regionField","format24Time","trackOutLettersRead","showQuitRow","trackOutMailsClick","defaultEmailFrom","cardsProvider","cardsProviderRow","googleKeyFrontend","googleKeyFrontendRow","mapApiKeyBackend","googleKeyBackendRow","separatorRow1","showPhotoPlacesMaps","hintOff","showPhotoPlacesMapsRow","useGeocodingService","useGeocodingServiceRow","productPropertiesSection","cardsProviderProductProperties","cardsProviderProductPropertiesRow","descriptionYandex","descriptionYandexRow","yandexKeyProductProperties","yandexKeyProductPropertiesRow","descriptionGoogle","descriptionGoogleRow","googleKeyProductProperties","googleKeyProductPropertiesRow","allInstallMarketApplication","allInstallMarketApplicationRow","addEventConfigConfiguration","CHANGE_MARKET","allCanBuyTariff","allCanBuyTariffRow","CHANGE_PAY_TARIFF","allowMeasureStressLevel","allowMeasureStressLevelRow","collectGeoData","Dialogs","MessageBox","MessageBoxButtons","OK_CANCEL","check","SchedulePage","scheduleSection","holidaysSection","workTimeRow","workTimeStartField","workTimeEndField","containerTab","itemPickerField","ItemPicker","isMulti","multiValue","itemPickerRow","weekStartField","weekStartRow","forCompanyTab","forDepartmentTab","forDepartmentRow","countDays","countDaysNode","holidaysRow","holidaysField","count","GdprPage","gdprSection","marketDirectory","titleField","contactNameField","emailField","dateField","adjust","calendar","bTime","bHideTime","addApplicationsRender","SecurityPage","otpSection","securityOtpCheckerRow","securityOtpPeriodSelectorRow","switcherWrapper","SingleChecker","Switcher","SwitcherSize","small","securityOtpMessageChatCheckerRow","cancel","addEventToggle2fa","alignCenter","noMarginBottom","Popup","popupDescription","popupButton","close","popupContent","offset","offsetWidth","borderRadius","ITEMS","CURRENT","accessIpSection","fieldsCount","ipUsersList","onclickAddField","emptyUserSelectorRow","insertBefore","additionalUsersAccessIpButton","parentElement","emptyAccessIpRow","fieldNumber","userSelector","accessIp","users","ip","devicesHistorySection","devicesHistoryDescription","cleanupDaysField","goToUserListButton","eventLogSection","eventLogDescription","ExternalTemporaryPage","extensions","externalPage","externalPageHasBeenFound","some","externalPageClassOrInstance","isObjectLike","pageExemplar","prototype","registerPage","setData","isShown","getPage","onFailDataFetched","PageManager","pages","Promise","resolve","pageIsFound","savedPage","constructor","getFormData","getFormNode","formNode","prepareForm","DataSource","query","Searcher","dataSource","minSymbol","Error","changeState","STATE_WAIT","fetch","STATE_READY","STATE_NOT_FOUND","Renderer","searcher","inputNode","iconContainer","SearchNavigation","overlay","offsetTop","contentBackground","contentPadding","autoHideHandler","setContent","renderContent","clean","keyCode","MouseEvent","unHighlightAll","prev","updateScroll","next","getQuery","rect","firstElementChild","relTop","relBot","bottom","padding","scrollTop","loaderContainer","loader","util","option","mouseenter","cursorTo","mouseleave","unHighlight","children","add","blur","EXTERNAL_LINK","createLinkOption","createBtnOption","group","optionsContainer","renderOption","renderSearchResult","getResult","renderWait","renderNotFound","renderOthers","getOthers","result","renderGroup","links","wraper","other","renderOtherLink","linkTag","nodeList","index","classList","ServerDataSource","Permission","permission","READ","EDIT","Settings","addEventOpenSettings","addEventStartPagePage","startPage","clickedBtn","TYPE","isDomNode","menuNode","settingsNode","isString","basePage","pagesPermission","concat","externalPages","map","expandPage","subPages","toolsMenuItem","DropdownMenuItem","getItemByNode","subItems","hideSubmenu","setDefaultToggleButtonName","querySelectorAll","helpPopup","HelpMessage","getPopup","setWidth","getNavigator","canRead","setPermission","setAnalytic","nextPage","changePage","getPrevPage","parentNode","activateMenuItem","addEventChangePage","updateAddressBar","source","menuItem","setActiveHandler","fetchPage","getTarget","getCompatData","panelEvent","denyAction","isChanged","slider","get","modal","ButtonPanel","CancelButton","reloadAfterClose","collectData","send","Http","Data","convertObjectToFormData","errorCollection","pageType","rawErrors","customData","saveBtnNode"],"mappings":"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"}