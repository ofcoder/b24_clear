{"version":3,"file":"script.js","sources":["src/requisite-section.js","src/settings-widget.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\nimport {ajax, Loc, Tag, Type, Dom, Event} from 'main.core';\nimport {PopupComponentsMaker} from \"ui.popupcomponentsmaker\";\nimport {SettingsWidget} from \"./settings-widget\";\nexport class RequisiteSection extends EventEmitter\n{\n\t#companyId;\n\t#requisiteId;\n\t#isConnected: boolean;\n\t#isPublic: boolean;\n\t#publicUrl: string;\n\t#editUrl: string;\n\n\t#requisiteElement:? HTMLElement;\n\t#requisitesPopup:? PopupComponentsMaker;\n\t#requisiteButton:? BX.UI.Button;\n\n\tconstructor(options) {\n\t\tsuper();\n\n\t\tif (options)\n\t\t{\n\t\t\tthis.#updateOptions(options);\n\t\t\ttop.BX.addCustomEvent('onLocalStorageSet', (params) => {\n\t\t\t\tconst eventName = params?.key ?? null;\n\n\t\t\t\tif (eventName === 'onCrmEntityUpdate' || eventName === 'onCrmEntityCreate' || eventName === 'BX.Crm.RequisiteSliderDetails:onSave')\n\t\t\t\t{\n\t\t\t\t\tthis.#getRequisites().then(() => {\n\t\t\t\t\t\tthis.#updateElement();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t#updateOptions(options): void\n\t{\n\t\tthis.#companyId = options.companyId ?? 0;\n\t\tthis.#requisiteId = options.requisiteId ?? 0;\n\t\tthis.#isConnected = Type.isBoolean(options.isConnected) ? options.isConnected : false;\n\t\tthis.#isPublic = Type.isBoolean(options.isPublic) ? options.isPublic : false;\n\t\tthis.#publicUrl = Type.isString(options.publicUrl) ? options.publicUrl : '';\n\t\tthis.#editUrl = Type.isString(options.editUrl) ? options.editUrl : '';\n\t}\n\n\t#updateElement(): void\n\t{\n\t\tconst currentElement = this.getElement();\n\t\tthis.#requisiteElement = null;\n\t\tthis.#requisiteButton = null;\n\t\tDom.replace(currentElement, this.getElement());\n\t}\n\n\tgetElement(): HTMLElement\n\t{\n\t\tif (!this.#requisiteElement)\n\t\t{\n\t\t\tthis.#requisiteElement = Tag.render`\n\t\t\t\t<div class=\"intranet-settings-widget__business-card intranet-settings-widget_box\">\n\t\t\t\t\t<div class=\"intranet-settings-widget__business-card_head intranet-settings-widget_inner\">\n\t\t\t\t\t\t<div class=\"intranet-settings-widget_icon-box --gray\">\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --customer-card-1\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-settings-widget__title\" data-role=\"requisite-widget-title\">\n\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\t\tthis.#isConnected\n\t\t\t\t\t\t\t\t\t? Loc.getMessage('INTRANET_SETTINGS_WIDGET_SECTION_REQUISITE_SITE_TITLE')\n\t\t\t\t\t\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_WIDGET_SECTION_REQUISITE_TITLE')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<i class=\"ui-icon-set --help\" onclick=\"BX.Helper.show('redirect=detail&code=18213326')\"></i>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"intranet-settings-widget__business-card_footer\">\n\t\t\t\t\t\t${this.#getRequisiteButton().getContainer()}\n\t\t\t\t\t\t${this.#companyId ? this.#getRequisiteSettingsButton() : ''}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#requisiteElement;\n\t}\n\n\t#getRequisiteSettingsButton(): HTMLElement\n\t{\n\t\tconst onclickRequisitesSettings = () => {\n\t\t\tthis.#getRequisitesPopup().show();\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t<span onclick=\"${onclickRequisitesSettings}\" class=\"intranet-settings-widget__requisite-btn\">\n\t\t\t\t<i class='ui-icon-set --more-information'></i>\n\t\t\t</span>\n\t\t`;\n\t}\n\n\t#getRequisitesPopup()\n\t{\n\t\tif (!this.#requisitesPopup)\n\t\t{\n\t\t\tconst onclickCopyLink = () => {\n\t\t\t\tif (BX.clipboard.copy(this.#publicUrl))\n\t\t\t\t{\n\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('INTRANET_SETTINGS_WIDGET_COPIED_POPUP'),\n\t\t\t\t\t\tposition: 'top-left',\n\t\t\t\t\t\tautoHideDelay: 3000,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onclickConfigureSite = () => {\n\t\t\t\twindow.open(this.#editUrl, '_blank');\n\t\t\t\tthis.#requisitesPopup.close();\n\t\t\t\tSettingsWidget.close();\n\t\t\t};\n\n\t\t\tlet copyLinkButton = null;\n\t\t\tif (this.#publicUrl)\n\t\t\t{\n\t\t\t\tcopyLinkButton = {\n\t\t\t\t\thtml: `\n\t\t\t\t\t\t\t<div class=\"intranet-settings-widget__popup-item\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon-set --link-3\"></div> \n\t\t\t\t\t\t\t\t<div class=\"intranet-settings-widget__popup-name\">${Loc.getMessage('INTRANET_SETTINGS_WIDGET_COPY_LINK_BUTTON')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`,\n\t\t\t\t\tonclick: onclickCopyLink,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tlet configureSiteButton = null;\n\t\t\tif (this.#editUrl)\n\t\t\t{\n\t\t\t\tconfigureSiteButton = {\n\t\t\t\t\thtml: `\n\t\t\t\t\t\t\t<div class=\"intranet-settings-widget__popup-item\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon-set --paint-1\"></div> \n\t\t\t\t\t\t\t\t<div class=\"intranet-settings-widget__popup-name\">${Loc.getMessage('INTRANET_SETTINGS_CONFIGURE_CUTAWAY_SITE_BUTTON')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`,\n\t\t\t\t\tonclick: onclickConfigureSite,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst onclickConfigureRequisites = () => {\n\t\t\t\tif (this.#requisitesPopup)\n\t\t\t\t{\n\t\t\t\t\tthis.#requisitesPopup.close();\n\t\t\t\t}\n\n\t\t\t\tSettingsWidget.close();\n\t\t\t\tBX.SidePanel.Instance.open(`/crm/company/details/${this.#companyId}/?init_mode=edit&rqedit=y`);\n\t\t\t};\n\n\t\t\tconst configureRequisiteButton = {\n\t\t\t\thtml: `\n\t\t\t\t\t\t<div class=\"intranet-settings-widget__popup-item\">\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --pencil-40\"></div>\n\t\t\t\t\t\t\t<div class=\"intranet-settings-widget__popup-name\">${Loc.getMessage('INTRANET_SETTINGS_CONFIGURE_REQUISITE_BUTTON')}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\t\tonclick: onclickConfigureRequisites,\n\t\t\t};\n\n\t\t\tconst popupWidth = 240;\n\n\t\t\tthis.#requisitesPopup = BX.PopupMenu.create(\n\t\t\t\t'requisites-settings',\n\t\t\t\tevent.currentTarget,\n\t\t\t\t[copyLinkButton, configureRequisiteButton, configureSiteButton],\n\t\t\t\t{\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\twidth: popupWidth,\n\t\t\t\t\toffsetLeft: -72,\n\t\t\t\t\tangle: {\n\t\t\t\t\t\toffset: popupWidth / 2 - 15,\n\t\t\t\t\t},\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tEvent.bindOnce(SettingsWidget.getInstance().getWidget().getPopup().getPopupContainer(), 'click', () => {\n\t\t\t\t\t\t\t\t\tthis.#requisitesPopup.close();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\treturn this.#requisitesPopup;\n\t}\n\n\t#getButtonText(): string\n\t{\n\t\tif (this.#isConnected)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_SETTINGS_WIDGET_REDIRECT_TO_REQUISITE_BUTTON')\n\t\t}\n\n\t\tif (this.#companyId > 0 && this.#requisiteId > 0)\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_SETTINGS_WIDGET_CREATE_LANDING')\n\t\t}\n\n\t\treturn Loc.getMessage('INTRANET_SETTINGS_CONFIGURE_REQUISITE_BUTTON');\n\t}\n\n\t#getRequisiteButton(): BX.UI.Button\n\t{\n\t\tif (!this.#requisiteButton)\n\t\t{\n\t\t\tthis.#requisiteButton = new BX.UI.Button({\n\t\t\t\tid: 'requisite-btn',\n\t\t\t\ttext: this.#getButtonText(),\n\t\t\t\tnoCaps: true,\n\t\t\t\tonclick: this.#handleButtonOnclick.bind(this),\n\t\t\t\tclassName: 'ui-btn ui-btn-light-border ui-btn-round ui-btn-xs ui-btn-no-caps intranet-setting__btn-light',\n\t\t\t});\n\t\t}\n\n\t\treturn this.#requisiteButton;\n\t}\n\n\t#handleButtonOnclick(): void\n\t{\n\t\tif (this.#isConnected)\n\t\t{\n\t\t\tthis.#handleOpenRequisite();\n\t\t}\n\t\telse if (this.#companyId > 0)\n\t\t{\n\t\t\tif (this.#requisiteId > 0)\n\t\t\t{\n\t\t\t\tthis.#handleCreateLanding();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#handleEditRequisite();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#handleCreateCompany();\n\t\t}\n\t}\n\n\t#handleOpenRequisite(): void\n\t{\n\t\tSettingsWidget.close();\n\t\twindow.open(this.#publicUrl, '_blank');\n\t}\n\n\t#handleCreateLanding(): void\n\t{\n\t\tthis.#getRequisiteButton().setWaiting(true);\n\t\tthis.#createLanding().then(() => {\n\t\t\tthis.#requisitesPopup = null;\n\t\t\tthis.#requisiteButton = null;\n\t\t\tthis.#updateElement();\n\n\t\t\tif (!this.#isPublic)\n\t\t\t{\n\t\t\t\tconst errorPopup = new Popup('public-landing-error',\n\t\t\t\t\tthis.getElement().querySelector('[data-role=\"requisite-widget-title\"]'),\n\t\t\t\t\t{\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tangle: true,\n\t\t\t\t\t\tdarkMode: true,\n\t\t\t\t\t\tcontent: Loc.getMessage('INTRANET_SETTINGS_WIDGET_CREATE_LANDING_ERROR'),\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tEvent.bindOnce(SettingsWidget.getInstance().getWidget().getPopup().getPopupContainer(), 'click', () => {\n\t\t\t\t\t\t\t\t\t\terrorPopup.close();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\t\terrorPopup.destroy();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\terrorPopup.show();\n\t\t\t}\n\t\t});\n\t}\n\n\t#createLanding()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tajax.runComponentAction('bitrix:intranet.settings.widget', 'createRequisiteLanding', { mode: 'class' })\n\t\t\t\t.then(({ data: { isConnected, isPublic, publicUrl, editUrl } }) => {\n\t\t\t\t\tthis.#isConnected = isConnected;\n\t\t\t\t\tthis.#isPublic = isPublic;\n\t\t\t\t\tthis.#publicUrl = publicUrl;\n\t\t\t\t\tthis.#editUrl = editUrl;\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\t#handleEditRequisite(): void\n\t{\n\t\tSettingsWidget.close();\n\t\tBX.SidePanel.Instance.open(`/crm/company/details/${this.#companyId}/?init_mode=edit&rqedit=y`);\n\t}\n\n\t#handleCreateCompany(): void\n\t{\n\t\tSettingsWidget.close();\n\t\tBX.SidePanel.Instance.open('/crm/company/details/0/?mycompany=y&rqedit=y');\n\t}\n\n\t#getRequisites()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tajax.runComponentAction('bitrix:intranet.settings.widget', 'getRequisites', { mode: 'class' })\n\t\t\t\t.then(({ data: { requisite } }) => {\n\t\t\t\t\tthis.#updateOptions(requisite);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t});\n\t}\n}","import {ajax, Cache, Dom, Event, Loc, Tag, Text, Type} from 'main.core';\nimport {PopupComponentsMaker, PopupComponentsMakerItem} from 'ui.popupcomponentsmaker';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport type {SettingsWidgetOptions, SettingsWidgetHoldingOptions} from './types/options';\nimport {MenuItem, Popup} from 'main.popup';\nimport { sendData } from 'ui.analytics';\nimport { RequisiteSection } from './requisite-section';\nimport 'ui.icon-set.actions';\nimport 'ui.icon-set.main';\nimport 'ui.icons.b24';\nimport 'ui.icons.crm';\nimport 'ui.buttons';\n\nexport class SettingsWidget extends EventEmitter\n{\n\t#widgetPopup: PopupComponentsMaker;\n\t#target: Element;\n\n\t#otp;\n\tstatic #instance = null;\n\t#marketUrl: string;\n\t#theme:? Object;\n\t#holding: ?SettingsWidgetHoldingOptions = null;\n\t#holdingWidget;\n\t#isBitrix24:? boolean = false;\n\t#isFreeLicense:? boolean = false;\n\t#isAdmin:? boolean;\n\t#requisite:? Object;\n\t#requisiteSection: RequisiteSection;\n\t#settingsUrl: string;\n\t#isRenameable:? boolean;\n\n\tconstructor(options: SettingsWidgetOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.SettingsWidget');\n\t\tthis.#marketUrl = options.marketUrl;\n\t\tthis.#isBitrix24 = options.isBitrix24;\n\t\tthis.#isFreeLicense = options.isFreeLicense;\n\t\tthis.#isAdmin = options.isAdmin;\n\t\tthis.#requisite = options.requisite;\n\t\tthis.#settingsUrl = options.settingsPath;\n\t\tthis.#isRenameable = options.isRenameable;\n\t\tthis.#requisiteSection = new RequisiteSection(options.requisite);\n\n\t\tthis.#setOptions(options);\n\t}\n\n\t#setOptions(options)\n\t{\n\t\toptions.theme ? (this.#theme = options.theme) : null;\n\t\toptions.otp ? (this.#otp = options.otp) : null;\n\t\toptions.holding ? this.#setHoldingOptions(options.holding) : null;\n\t}\n\n\t#setHoldingOptions(options: SettingsWidgetHoldingOptions): void\n\t{\n\t\tif (!Type.isPlainObject(options))\n\t\t{\n\t\t\tthis.#holding = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#holding = {\n\t\t\tisHolding: options.isHolding ?? false,\n\t\t\taffiliate: options.affiliate ?? null,\n\t\t\tcanBeHolding: options.canBeHolding ?? false,\n\t\t\tcanBeAffiliate: options.canBeAffiliate ?? false,\n\t\t};\n\t}\n\n\tsetTarget(target)\n\t{\n\t\tthis.#target = target;\n\n\t\treturn this;\n\t}\n\n\tsetWidgetPopup(widgetPopup: PopupComponentsMaker)\n\t{\n\t\tthis.#widgetPopup = widgetPopup;\n\n\t\tthis.#widgetPopup.getPopup().subscribe('onClose', () => {\n\t\t\tEvent.unbindAll(this.getWidget().getPopup().getPopupContainer(), 'click');\n\t\t});\n\n\t\tthis.#getItemsList()\n\t\t\t.then(() => {\n\t\t\t\tthis.#drawItemsList();\n\t\t\t})\n\t\t;\n\n\t\treturn this;\n\t}\n\n\tstatic bindWidget(popup): ?SettingsWidget\n\t{\n\t\tconst instance = this.getInstance();\n\n\t\tif (instance)\n\t\t{\n\t\t\tinstance.setWidgetPopup(popup);\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\tstatic bindAndShow(button): ?SettingsWidget\n\t{\n\t\tconst instance = this.getInstance();\n\n\t\tif (instance)\n\t\t{\n\t\t\tEvent.unbindAll(button);\n\t\t\tEvent.bind(button, 'click', instance.toggle.bind(instance, button));\n\t\t\tinstance.show(button);\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\tstatic init(options): SettingsWidget\n\t{\n\n\t\tif (this.#instance === null)\n\t\t{\n\t\t\tthis.#instance = new this(options);\n\t\t}\n\t\treturn this.#instance;\n\t}\n\n\tstatic getInstance(): ?SettingsWidget\n\t{\n\t\treturn this.#instance;\n\t}\n\n\tstatic close(): void\n\t{\n\t\tconst instance = this.getInstance();\n\n\t\tif (instance)\n\t\t{\n\t\t\tinstance.getWidget().close();\n\t\t}\n\t}\n\n\ttoggle(targetNode)\n\t{\n\t\tconst popup = this.getWidget().getPopup();\n\t\tif (popup.isShown())\n\t\t{\n\t\t\tpopup.close();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.show(targetNode);\n\t\t}\n\t}\n\n\tshow(targetNode): void\n\t{\n\t\tconst popup = this.getWidget().getPopup();\n\n\t\tpopup.setBindElement(targetNode);\n\t\tpopup.show();\n\n\t\tif (popup.getPopupContainer().getBoundingClientRect().left < 30)\n\t\t{\n\t\t\tDom.style(popup.getPopupContainer(), { left: '30px' });\n\t\t}\n\n\t\tthis.setTarget(targetNode);\n\t}\n\n\tgetWidget(): PopupComponentsMaker\n\t{\n\t\treturn this.#widgetPopup;\n\t}\n\n\t#getItemsList(reload: boolean = false): Promise\n\t{\n\t\tif (reload === true || typeof this.#theme === 'undefined')\n\t\t{\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tajax.runComponentAction('bitrix:intranet.settings.widget', 'getData', { mode: 'class' })\n\t\t\t\t\t.then(({ data: { theme, otp, holding } }) => {\n\t\t\t\t\t\tthis.#theme = theme;\n\t\t\t\t\t\tthis.#otp = otp;\n\t\t\t\t\t\tthis.#setHoldingOptions(holding);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t});\n\t\t}\n\n\t\treturn Promise.resolve();\n\t}\n\n\t#drawItemsList(): void\n\t{\n\t\tconst container = this.getWidget().getPopup().getPopupContainer();\n\t\tDom.clean(container);\n\n\t\tDom.append(this.#getHeader(), container);\n\n\t\tconst content = [\n\t\t\tthis.#requisite && this.#isAdmin ? this.#getRequisitesElement() : null,\n\t\t\tthis.#isAdmin ? this.#getSecurityAndSettingsElement() : null,\n\t\t\tthis.#isBitrix24 ? this.#getHoldingsElement() : null,\n\t\t\tthis.#getMigrateElement(),\n\t\t];\n\n\t\tcontent.forEach((element) => {\n\t\t\tDom.append(element, container);\n\t\t});\n\n\t\tDom.append(this.#getFooter(), container);\n\t}\n\n\t#getLinkHeaderIcon(): HTMLElement\n\t{\n\t\tconst onclickCopyLink = () => {\n\t\t\tif (BX.clipboard.copy(window.location.origin))\n\t\t\t{\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('INTRANET_SETTINGS_WIDGET_LINK_COPIED_POPUP'),\n\t\t\t\t\tposition: 'top-left',\n\t\t\t\t\tautoHideDelay: 3000,\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\treturn Tag.render`<span class='ui-icon-set --link-3 intranet-settings-widget__header-btn' onclick=\"${onclickCopyLink}\"></span>`;\n\t}\n\n\t#getEditHeaderIcon(): HTMLElement\n\t{\n\t\tconst onclickEditLink = () => {\n\t\t\tthis.getWidget().close();\n\t\t\tBX.SidePanel.Instance.open(this.#settingsUrl + '?analyticContext=widget_settings_settings&page=portal&option=subDomainName');\n\t\t};\n\n\t\treturn Tag.render`<span class='ui-icon-set --pencil-40 intranet-settings-widget__header-btn' onclick=\"${onclickEditLink}\"></span>`;\n\t}\n\n\t#getHeader(): HTMLElement\n\t{\n\t\tconst header = Tag.render`\n\t\t\t\t<div class=\"intranet-settings-widget__header\">\n\t\t\t\t\t<div class=\"intranet-settings-widget__header_inner\">\n\t\t\t\t\t\t<span class=\"intranet-settings-widget__header-name\">${window.location.host}</span>\n\t\t\t\t\t\t${this.#isRenameable ? this.#getEditHeaderIcon() : this.#getLinkHeaderIcon()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\tthis.#applyTheme(header, this.#theme);\n\n\t\tconst adaptedEmptyHeader = (new PopupComponentsMakerItem({\n\t\t\twithoutBackground: true,\n\t\t\thtml: header,\n\t\t})).getContainer();\n\t\tDom.addClass(adaptedEmptyHeader, '--widget-header');\n\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Intranet.Bitrix24:ThemePicker:onThemeApply',\n\t\t\t({ data: { theme } }) =>\n\t\t\t{\n\t\t\t\tthis.#applyTheme(header, theme);\n\t\t\t},\n\t\t);\n\n\t\treturn adaptedEmptyHeader;\n\t}\n\n\t#applyTheme(container, theme): void\n\t{\n\t\tconst previewImage = `url('${Text.encode(theme.previewImage)}')`;\n\t\tDom.style(container, 'backgroundImage', previewImage);\n\n\t\tDom.removeClass(container, 'bitrix24-theme-dark bitrix24-theme-light');\n\t\tconst themeClass = String(theme.id).indexOf('dark:') === 0 ? 'bitrix24-theme-dark' : 'bitrix24-theme-light';\n\t\tDom.addClass(container, themeClass);\n\t}\n\n\t#getFooter(): HTMLElement\n\t{\n\t\tconst onclickOpenPartnerOrder = () => {\n\t\t\tthis.getWidget().close();\n\t\t\tBX.UI.InfoHelper.show('info_implementation_request');\n\t\t};\n\n\t\tconst partnerOrder = Tag.render`\n\t\t\t<span class=\"intranet-settings-widget__footer-item\" onclick=\"${onclickOpenPartnerOrder}\">\n\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_WIDGET_ORDER_PARTNER_LINK_MSGVER_1')}\n\t\t\t</span>\n\t\t`;\n\n\t\tconst onclickWhereToBegin = () => {\n\t\t\tif (top.BX.Helper)\n\t\t\t{\n\t\t\t\tthis.getWidget().close();\n\t\t\t\ttop.BX.Helper.show('redirect=detail&code=18371844');\n\t\t\t}\n\t\t};\n\n\t\tconst onclickSupport = () => {\n\t\t\tif (top.BX.Helper)\n\t\t\t{\n\t\t\t\tthis.getWidget().close();\n\t\t\t\tif (this.#isFreeLicense)\n\t\t\t\t{\n\t\t\t\t\tBX.UI.InfoHelper.show('limit_support_bitrix');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.Helper.show('redirect=detail&code=12925062');\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-settings-widget__footer\">\n\t\t\t\t\t${this.#isBitrix24 ? partnerOrder : ''}\n\t\t\t\t\t<span class=\"intranet-settings-widget__footer-item\" onclick=\"${onclickWhereToBegin}\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_WIDGET_WHERE_TO_BEGIN_LINK')}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"intranet-settings-widget__footer-item\" onclick=\"${onclickSupport}\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_WIDGET_SUPPORT_BUTTON')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t}\n\n\t#prepareElement(element): HTMLElement\n\t{\n\t\tconst item = this.getWidget().getItem({ html: element });\n\t\tconst node = item.getContainer();\n\t\tDom.addClass(node, '--widget-item');\n\n\t\treturn node;\n\t}\n\n\t#getRequisitesElement(): HTMLDivElement\n\t{\n\t\treturn this.#prepareElement(this.#requisiteSection.getElement());\n\t}\n\n\t#getHoldingsElement(): ?HTMLDivElement\n\t{\n\t\tif (this.#isBitrix24 !== true || this.#holding === null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!Type.isPlainObject(this.#holding.affiliate))\n\t\t{\n\t\t\treturn this.#getEmptyHoldingsElement();\n\t\t}\n\n\t\tconst affiliate = this.#holding.affiliate;\n\t\tconst onclickOpen = () => {\n\t\t\tthis.getWidget().close();\n\t\t\tthis.#getHoldingWidget().show(this.#target);\n\t\t};\n\n\t\tconst profilePhotoStyle = affiliate.profilePhoto\n\t\t\t? `background: url('${encodeURI(Text.encode(affiliate.profilePhoto))}') no-repeat center; background-size: cover;`\n\t\t\t: '';\n\n\t\tconst element = Tag.render`\n\t\t<div class=\"intranet-settings-widget__branch\" onclick=\"${onclickOpen}\">\n\t\t\t<div class=\"intranet-settings-widget__branch-icon_box\">\n\t\t\t\t<div class=\"ui-icon ui-icon-common-user intranet-settings-widget__branch-icon\">\n\t\t\t\t\t<i style=\"${profilePhotoStyle}\"></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"intranet-settings-widget__branch_content\">\n\t\t\t\t<div class=\"intranet-settings-widget__branch-title\">\n\t\t\t\t\t${\n\t\t\t\t\t\taffiliate.isHolding\n\t\t\t\t\t\t\t? Loc.getMessage('INTRANET_SETTINGS_WIDGET_MAIN_BRANCH')\n\t\t\t\t\t\t\t: Loc.getMessage('INTRANET_SETTINGS_WIDGET_SECONDARY_BRANCH')\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-settings-widget__title\">\n\t\t\t\t\t${affiliate.name}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"intranet-settings-widget__branch-btn_box\">\n\t\t\t\t<button class=\"ui-btn ui-btn-light-border ui-btn-round ui-btn-xs ui-btn-no-caps intranet-setting__btn-light\">\n\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_WIDGET_BRANCHES')}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t`;\n\n\t\treturn this.#prepareElement(element);\n\t}\n\n\t#getHoldingWidget()\n\t{\n\t\tif (!this.#holdingWidget)\n\t\t{\n\t\t\tthis.#holdingWidget = BX.Intranet.HoldingWidget.getInstance();\n\n\t\t\tconst onclickClose = () => {\n\t\t\t\tthis.#holdingWidget.getWidget().close();\n\t\t\t\tthis.show();\n\t\t\t};\n\n\t\t\tconst holdingWidgetCloseBtn = Tag.render`\n\t\t\t\t<div class=\"intranet-settings-widget__close-btn\">\n\t\t\t\t\t<div onclick=\"${onclickClose}\" class=\"ui-icon-set --arrow-left intranet-settings-widget__close-btn_icon\"></div>\n\t\t\t\t\t<div class=\"intranet-settings-widget__close-btn_name\">${Loc.getMessage('INTRANET_SETTINGS_WIDGET_BRANCH_LIST')}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tthis.#holdingWidget.getWidget().getPopup().getContentContainer().prepend(holdingWidgetCloseBtn);\n\t\t}\n\n\t\treturn this.#holdingWidget;\n\t}\n\n\t#getEmptyHoldingsElement(): ?HTMLDivElement\n\t{\n\t\tif (!Type.isPlainObject(this.#holding))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst title = this.#isAdmin\n\t\t\t? Loc.getMessage('INTRANET_SETTINGS_WIDGET_FILIAL_NETWORK')\n\t\t\t: Loc.getMessage('INTRANET_SETTINGS_WIDGET_FILIAL_NETWORK_UNAVAILABLE')\n\t\t;\n\n\t\tconst buttonText = this.#isAdmin\n\t\t\t? Loc.getMessage('INTRANET_SETTINGS_WIDGET_FILIAL_SETTINGS')\n\t\t\t: Loc.getMessage('INTRANET_SETTINGS_WIDGET_FILIAL_ABOUT')\n\t\t;\n\n\t\tconst onclickOpen = () => {\n\t\t\tthis.getWidget().close();\n\t\t\tif (this.#holding.canBeHolding)\n\t\t\t{\n\t\t\t\tthis.#getHoldingWidget().show(this.#target);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.UI.InfoHelper.show('limit_office_multiple_branches');\n\t\t\t}\n\t\t};\n\n\t\tconst lockIcon = Tag.render`\n\t\t\t<div class=\"intranet-settings-widget__branch-lock-icon_box\">\n\t\t\t\t<div class=\"ui-icon-set intranet-settings-widget__branch-lock-icon --lock\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst element = Tag.render`\n\t\t\t<div class=\"intranet-settings-widget__branch\" onclick=\"${onclickOpen}\">\n\t\t\t\t<div class=\"intranet-settings-widget__branch-icon_box\">\n\t\t\t\t\t<div class=\"ui-icon-set intranet-settings-widget__branch-icon --filial-network\"></div>\n\t\t\t\t\t${!this.#holding.canBeHolding ? lockIcon : ''}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-settings-widget__branch_content\">\n\t\t\t\t\t<div class=\"intranet-settings-widget__title\">${title}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-settings-widget__branch-btn_box\">\n\t\t\t\t\t<button class=\"ui-btn ui-btn-light-border ui-btn-round ui-btn-xs ui-btn-no-caps intranet-setting__btn-light\">${buttonText}</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#prepareElement(element);\n\t}\n\n\t#getSecurityAndSettingsElement(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"intranet-settings-widget_inline-box\">\n\t\t\t\t${this.#getSecurityElement()}\n\t\t\t\t${this.#getGeneralSettingsElement()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getSecurityElement(): HTMLElement\n\t{\n\t\tconst onclick = () => {\n\t\t\tthis.getWidget().close();\n\t\t\tBX.SidePanel.Instance.open(this.#settingsUrl + '?page=security&analyticContext=widget_settings_settings');\n\t\t};\n\n\t\tconst element = Tag.render`\n\t\t\t<span onclick=\"${onclick}\" class=\"intranet-settings-widget_box --clickable\">\n\t\t\t\t<div class=\"intranet-settings-widget_inner\">\n\t\t\t\t\t<div class=\"intranet-settings-widget_icon-box ${this.#otp.IS_ACTIVE === 'Y' ? '--green' : '--yellow'}\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --shield\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-settings-widget__title\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_WIDGET_SECTION_SECURITY_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-settings-widget__arrow-btn ui-icon-set --arrow-right\"></div>\n\t\t\t</span>\n\t\t`;\n\n\t\treturn this.#prepareElement(element);\n\t}\n\n\t#getGeneralSettingsElement(): HTMLElement\n\t{\n\t\tconst onclick = () => {\n\t\t\tthis.getWidget().close();\n\t\t\tBX.SidePanel.Instance.open(this.#settingsUrl + '?analyticContext=widget_settings_settings');\n\t\t};\n\n\t\tconst element = Tag.render`\n\t\t\t<span onclick=\"${onclick}\" class=\"intranet-settings-widget_box --clickable\">\n\t\t\t\t<div class=\"intranet-settings-widget_inner\">\n\t\t\t\t\t<div class=\"intranet-settings-widget_icon-box --gray\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --settings-2\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-settings-widget__title\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_WIDGET_SECTION_SETTINGS_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-settings-widget__arrow-btn ui-icon-set --arrow-right\"></div>\n\t\t\t</span>\n\t\t`;\n\n\t\treturn this.#prepareElement(element);\n\t}\n\n\t#getMigrateElement(): HTMLDivElement\n\t{\n\t\tconst onclick = () => {\n\t\t\tthis.getWidget().close();\n\t\t\tBX.SidePanel.Instance.open(`${this.#marketUrl}category/migration/`);\n\t\t};\n\n\t\tconst element = Tag.render`\n\t\t\t<div onclick=\"${onclick}\" class=\"intranet-settings-widget_box --clickable\">\n\t\t\t\t<div class=\"intranet-settings-widget_inner\">\n\t\t\t\t\t<div class=\"intranet-settings-widget_icon-box --gray\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --market-1\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-settings-widget__title\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_SETTINGS_WIDGET_SECTION_MIGRATION_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"intranet-settings-widget__arrow-btn ui-icon-set --arrow-right\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#prepareElement(element);\n\t}\n}\n"],"names":["RequisiteSection","EventEmitter","constructor","options","top","BX","addCustomEvent","params","eventName","key","then","getElement","Tag","render","Loc","getMessage","getContainer","companyId","requisiteId","Type","isBoolean","isConnected","isPublic","isString","publicUrl","editUrl","currentElement","Dom","replace","onclickRequisitesSettings","show","onclickCopyLink","clipboard","copy","UI","Notification","Center","notify","content","position","autoHideDelay","onclickConfigureSite","window","open","close","SettingsWidget","copyLinkButton","html","onclick","configureSiteButton","onclickConfigureRequisites","SidePanel","Instance","configureRequisiteButton","popupWidth","PopupMenu","create","event","currentTarget","closeByEsc","autoHide","width","offsetLeft","angle","offset","events","onShow","setTimeout","Event","bindOnce","getInstance","getWidget","getPopup","getPopupContainer","Button","id","text","noCaps","bind","className","setWaiting","errorPopup","Popup","querySelector","darkMode","onClose","destroy","Promise","resolve","ajax","runComponentAction","mode","data","requisite","setEventNamespace","marketUrl","isBitrix24","isFreeLicense","isAdmin","settingsPath","isRenameable","setTarget","target","setWidgetPopup","widgetPopup","subscribe","unbindAll","bindWidget","popup","instance","bindAndShow","button","toggle","init","targetNode","isShown","setBindElement","getBoundingClientRect","left","style","theme","otp","holding","isPlainObject","isHolding","affiliate","canBeHolding","canBeAffiliate","reload","container","clean","append","forEach","element","location","origin","onclickEditLink","header","host","adaptedEmptyHeader","PopupComponentsMakerItem","withoutBackground","addClass","previewImage","Text","encode","removeClass","themeClass","String","indexOf","onclickOpenPartnerOrder","InfoHelper","partnerOrder","onclickWhereToBegin","Helper","onclickSupport","item","getItem","node","onclickOpen","profilePhotoStyle","profilePhoto","encodeURI","name","Intranet","HoldingWidget","onclickClose","holdingWidgetCloseBtn","getContentContainer","prepend","title","buttonText","lockIcon","IS_ACTIVE"],"mappings":"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"}