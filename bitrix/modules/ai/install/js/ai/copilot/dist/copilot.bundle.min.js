this.BX=this.BX||{};(function(e,s,a,l,t,i,r,o,n,b,c,d,p,v,u,h,P,L,H){"use strict";async function F(e){try{const s=await B(e);return s.checkAgreement()}catch(e){console.error(e);return true}}async function B(e){try{const{CopilotAgreement:s}=await L.Runtime.loadExtension("ai.copilot-agreement");return new s(e)}catch(e){console.error(e);return null}}const f=Object.freeze({text:"text_operations",image:"image_operations",readonly:"read_operations"});const y=Object.freeze({textNew:"create_new",textReply:"reply_context",textEdit:"edit_context",imageNew:"create_image"});const m=Object.freeze({fromText:"from_text",fromAudio:"audio_used",fromTextAndAudio:"from_text+audio_used"});const g=Object.freeze({editorButton:"editor_button",spaceButton:"space_button",popupButton:"popup_button",readonlyCommon:"common",readonlyQuote:"quote"});const w=Object.freeze({open:"open",generate:"generate",success:"success",error:"error",saveResult:"save",cancelResult:"cancel",editResult:"edit",copyResult:"copy_text"});var C=babelHelpers.classPrivateFieldLooseKey("tool");var O=babelHelpers.classPrivateFieldLooseKey("category");var _=babelHelpers.classPrivateFieldLooseKey("event");var E=babelHelpers.classPrivateFieldLooseKey("type");var I=babelHelpers.classPrivateFieldLooseKey("c_section");var x=babelHelpers.classPrivateFieldLooseKey("c_sub_section");var j=babelHelpers.classPrivateFieldLooseKey("c_element");var T=babelHelpers.classPrivateFieldLooseKey("params");var K=babelHelpers.classPrivateFieldLooseKey("setCategory");var k=babelHelpers.classPrivateFieldLooseKey("setType");var M=babelHelpers.classPrivateFieldLooseKey("setContextSubSection");var A=babelHelpers.classPrivateFieldLooseKey("setContextElement");var S=babelHelpers.classPrivateFieldLooseKey("sendData");var R=babelHelpers.classPrivateFieldLooseKey("getData");class N{constructor(){Object.defineProperty(this,R,{value:X});Object.defineProperty(this,S,{value:U});Object.defineProperty(this,A,{value:W});Object.defineProperty(this,M,{value:G});Object.defineProperty(this,k,{value:$});Object.defineProperty(this,K,{value:D});Object.defineProperty(this,C,{writable:true,value:void 0});Object.defineProperty(this,O,{writable:true,value:void 0});Object.defineProperty(this,_,{writable:true,value:void 0});Object.defineProperty(this,E,{writable:true,value:void 0});Object.defineProperty(this,I,{writable:true,value:void 0});Object.defineProperty(this,x,{writable:true,value:void 0});Object.defineProperty(this,j,{writable:true,value:void 0});Object.defineProperty(this,T,{writable:true,value:[]});babelHelpers.classPrivateFieldLooseBase(this,C)[C]="AI";babelHelpers.classPrivateFieldLooseBase(this,O)[O]=""}getCategory(){return babelHelpers.classPrivateFieldLooseBase(this,O)[O]}getType(){return babelHelpers.classPrivateFieldLooseBase(this,E)[E]}getCSection(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I]}getCSubSection(){return babelHelpers.classPrivateFieldLooseBase(this,x)[x]}getCElement(){return babelHelpers.classPrivateFieldLooseBase(this,j)[j]}setCategoryText(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K](f.text)}setCategoryReadonly(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K](f.readonly)}setCategoryImage(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K](f.image)}setTypeTextNew(){return babelHelpers.classPrivateFieldLooseBase(this,k)[k](y.textNew)}setTypeTextReply(){return babelHelpers.classPrivateFieldLooseBase(this,k)[k](y.textReply)}setTypeTextEdit(){return babelHelpers.classPrivateFieldLooseBase(this,k)[k](y.textEdit)}setTypeImageNew(){return babelHelpers.classPrivateFieldLooseBase(this,k)[k](y.imageNew)}setContextSection(e){if(e.length>0){babelHelpers.classPrivateFieldLooseBase(this,I)[I]=e}return this}setContextTypeFromText(){return babelHelpers.classPrivateFieldLooseBase(this,M)[M](m.fromText)}setContextTypeFromAudio(){return babelHelpers.classPrivateFieldLooseBase(this,M)[M](m.fromAudio)}setContextTypeFromTextAndAudio(){return babelHelpers.classPrivateFieldLooseBase(this,M)[M](m.fromTextAndAudio)}setContextElementEditorButton(){return babelHelpers.classPrivateFieldLooseBase(this,A)[A](g.editorButton)}setContextElementSpaceButton(){return babelHelpers.classPrivateFieldLooseBase(this,A)[A](g.spaceButton)}setContextElementReadonlyCommon(){return babelHelpers.classPrivateFieldLooseBase(this,A)[A](g.readonlyCommon)}setContextElementReadonlyQuote(){return babelHelpers.classPrivateFieldLooseBase(this,A)[A](g.readonlyQuote)}setContextElementPopupButton(){return babelHelpers.classPrivateFieldLooseBase(this,A)[A](g.popupButton)}setP1(e,s){babelHelpers.classPrivateFieldLooseBase(this,T)[T][0]={name:e,value:s};return this}setP2(e,s){babelHelpers.classPrivateFieldLooseBase(this,T)[T][1]={name:e,value:s};return this}setP3(e,s){babelHelpers.classPrivateFieldLooseBase(this,T)[T][2]={name:e,value:s};return this}setP4(e,s){babelHelpers.classPrivateFieldLooseBase(this,T)[T][3]={name:e,value:s};return this}setP5(e,s){babelHelpers.classPrivateFieldLooseBase(this,T)[T][4]={name:e,value:s};return this}sendEventOpen(e){babelHelpers.classPrivateFieldLooseBase(this,_)[_]=w.open;return babelHelpers.classPrivateFieldLooseBase(this,S)[S](e)}sendEventGenerate(){babelHelpers.classPrivateFieldLooseBase(this,_)[_]=w.generate;return babelHelpers.classPrivateFieldLooseBase(this,S)[S]()}sendEventSuccess(){babelHelpers.classPrivateFieldLooseBase(this,_)[_]=w.success;return babelHelpers.classPrivateFieldLooseBase(this,S)[S]()}sendEventError(){babelHelpers.classPrivateFieldLooseBase(this,_)[_]=w.error;return babelHelpers.classPrivateFieldLooseBase(this,S)[S]()}sendEventSave(){babelHelpers.classPrivateFieldLooseBase(this,_)[_]=w.saveResult;return babelHelpers.classPrivateFieldLooseBase(this,S)[S]()}sendEventCancel(){babelHelpers.classPrivateFieldLooseBase(this,_)[_]=w.cancelResult;return babelHelpers.classPrivateFieldLooseBase(this,S)[S]()}sendEventCopyResult(){babelHelpers.classPrivateFieldLooseBase(this,_)[_]=w.copyResult;return babelHelpers.classPrivateFieldLooseBase(this,S)[S]()}sendEventEditResult(){babelHelpers.classPrivateFieldLooseBase(this,_)[_]=w.editResult;return babelHelpers.classPrivateFieldLooseBase(this,S)[S]()}}function D(e){if(Object.values(f).includes(e)){babelHelpers.classPrivateFieldLooseBase(this,O)[O]=e}return this}function $(e){if(Object.values(y).includes(e)){babelHelpers.classPrivateFieldLooseBase(this,E)[E]=e}return this}function G(e){if(Object.values(m).includes(e)){babelHelpers.classPrivateFieldLooseBase(this,x)[x]=e}return this}function W(e){if(Object.values(g).includes(e)){babelHelpers.classPrivateFieldLooseBase(this,j)[j]=e}return this}function U(e){let s=babelHelpers.classPrivateFieldLooseBase(this,R)[R]();if(!s){return}if(e){s={...s,status:e}}L.Runtime.loadExtension("ui.analytics").then((({sendData:e})=>{e(s)})).catch((()=>{console.error("AI: Copilot: can't load ui.analytics")}))}function X(){if(!babelHelpers.classPrivateFieldLooseBase(this,C)[C]||!babelHelpers.classPrivateFieldLooseBase(this,O)[O]||!babelHelpers.classPrivateFieldLooseBase(this,_)[_]){return null}const e={tool:babelHelpers.classPrivateFieldLooseBase(this,C)[C],category:babelHelpers.classPrivateFieldLooseBase(this,O)[O],event:babelHelpers.classPrivateFieldLooseBase(this,_)[_]};if(babelHelpers.classPrivateFieldLooseBase(this,E)[E]){e.type=babelHelpers.classPrivateFieldLooseBase(this,E)[E]}if(babelHelpers.classPrivateFieldLooseBase(this,I)[I]){e.c_section=babelHelpers.classPrivateFieldLooseBase(this,I)[I]}if(babelHelpers.classPrivateFieldLooseBase(this,x)[x]){e.c_sub_section=babelHelpers.classPrivateFieldLooseBase(this,x)[x]}if(babelHelpers.classPrivateFieldLooseBase(this,j)[j]){e.c_element=babelHelpers.classPrivateFieldLooseBase(this,j)[j]}if(babelHelpers.classPrivateFieldLooseBase(this,T)[T]&&L.Type.isArray(babelHelpers.classPrivateFieldLooseBase(this,T)[T])){babelHelpers.classPrivateFieldLooseBase(this,T)[T].forEach(((s,a)=>{if(!(s!=null&&s.value)||!(s!=null&&s.name)){return}const{name:l,value:t}=s;const i=`p${a+1}`;e[i]=`${L.Text.toCamelCase(l)}_${L.Text.toCamelCase(t)}`}))}return e}const V="--highlight";const z=Object.freeze({highlightMenuItem:"highlightMenuItem",clearHighlight:"clearHighlight"});var q=babelHelpers.classPrivateFieldLooseKey("menu");var Q=babelHelpers.classPrivateFieldLooseKey("openMenu");var Y=babelHelpers.classPrivateFieldLooseKey("highlightedMenuItem");var J=babelHelpers.classPrivateFieldLooseKey("clearHighlightAfterType");var Z=babelHelpers.classPrivateFieldLooseKey("highlightFirstItemAfterShow");var ee=babelHelpers.classPrivateFieldLooseKey("canGoOutFromTop");var se=babelHelpers.classPrivateFieldLooseKey("keyDownHandler");var ae=babelHelpers.classPrivateFieldLooseKey("menuItemMouseEnterHandler");var le=babelHelpers.classPrivateFieldLooseKey("menuItemMouseLeaveHandler");var te=babelHelpers.classPrivateFieldLooseKey("menuItemSubmenuOnShowHandler");var ie=babelHelpers.classPrivateFieldLooseKey("menuItemSubmenuOnCloseHandler");var re=babelHelpers.classPrivateFieldLooseKey("observeMenuChanges");var oe=babelHelpers.classPrivateFieldLooseKey("handleKeyDown");var ne=babelHelpers.classPrivateFieldLooseKey("handleEnterKey");var be=babelHelpers.classPrivateFieldLooseKey("handleArrowUpKey");var ce=babelHelpers.classPrivateFieldLooseKey("handleArrowDownKey");var de=babelHelpers.classPrivateFieldLooseKey("handleArrowLeftKey");var pe=babelHelpers.classPrivateFieldLooseKey("handleArrowRightKey");var ve=babelHelpers.classPrivateFieldLooseKey("showActiveItemSubmenuIfExist");var ue=babelHelpers.classPrivateFieldLooseKey("handleMenuItemEvents");var he=babelHelpers.classPrivateFieldLooseKey("unsubscribeMenuItemEvents");var Pe=babelHelpers.classPrivateFieldLooseKey("handleMenuItemMouseEnter");var Le=babelHelpers.classPrivateFieldLooseKey("handleMenuItemMouseLeave");var He=babelHelpers.classPrivateFieldLooseKey("handleMenuItemSubmenuOnShow");var Fe=babelHelpers.classPrivateFieldLooseKey("handleMenuItemSubmenuOnClose");var Be=babelHelpers.classPrivateFieldLooseKey("highlightMenuItem");var fe=babelHelpers.classPrivateFieldLooseKey("getMenuItemBeforeHighlighted");var ye=babelHelpers.classPrivateFieldLooseKey("getMenuItemAfterHighlighted");var me=babelHelpers.classPrivateFieldLooseKey("getHighlightedMenuItemPosition");var ge=babelHelpers.classPrivateFieldLooseKey("clearMenuItemHighlight");var we=babelHelpers.classPrivateFieldLooseKey("clearHighlight");var Ce=babelHelpers.classPrivateFieldLooseKey("scrollToActiveElem");class Oe extends u.EventEmitter{constructor(e){super();Object.defineProperty(this,Ce,{value:ze});Object.defineProperty(this,we,{value:Ve});Object.defineProperty(this,ge,{value:Xe});Object.defineProperty(this,me,{value:Ue});Object.defineProperty(this,ye,{value:We});Object.defineProperty(this,fe,{value:Ge});Object.defineProperty(this,Be,{value:$e});Object.defineProperty(this,Fe,{value:De});Object.defineProperty(this,He,{value:Ne});Object.defineProperty(this,Le,{value:Re});Object.defineProperty(this,Pe,{value:Se});Object.defineProperty(this,he,{value:Ae});Object.defineProperty(this,ue,{value:Me});Object.defineProperty(this,ve,{value:ke});Object.defineProperty(this,pe,{value:Ke});Object.defineProperty(this,de,{value:Te});Object.defineProperty(this,ce,{value:je});Object.defineProperty(this,be,{value:xe});Object.defineProperty(this,ne,{value:Ie});Object.defineProperty(this,oe,{value:Ee});Object.defineProperty(this,re,{value:_e});Object.defineProperty(this,q,{writable:true,value:void 0});Object.defineProperty(this,Q,{writable:true,value:void 0});Object.defineProperty(this,Y,{writable:true,value:null});Object.defineProperty(this,J,{writable:true,value:false});Object.defineProperty(this,Z,{writable:true,value:false});Object.defineProperty(this,ee,{writable:true,value:false});Object.defineProperty(this,se,{writable:true,value:void 0});Object.defineProperty(this,ae,{writable:true,value:void 0});Object.defineProperty(this,le,{writable:true,value:void 0});Object.defineProperty(this,te,{writable:true,value:void 0});Object.defineProperty(this,ie,{writable:true,value:void 0});this.setEventNamespace("AI:KeyboardMenu");babelHelpers.classPrivateFieldLooseBase(this,q)[q]=e.menu;babelHelpers.classPrivateFieldLooseBase(this,J)[J]=e.clearHighlightAfterType;babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]=e.highlightFirstItemAfterShow;babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]=e.canGoOutFromTop;babelHelpers.classPrivateFieldLooseBase(this,se)[se]=babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].bind(this);babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe].bind(this);babelHelpers.classPrivateFieldLooseBase(this,le)[le]=babelHelpers.classPrivateFieldLooseBase(this,Le)[Le].bind(this);babelHelpers.classPrivateFieldLooseBase(this,te)[te]=babelHelpers.classPrivateFieldLooseBase(this,He)[He].bind(this);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]=babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe].bind(this);const s=babelHelpers.classPrivateFieldLooseBase(this,ue)[ue].bind(this);babelHelpers.classPrivateFieldLooseBase(this,q)[q].getPopupWindow().subscribeFromOptions({onAfterShow:()=>{babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]=babelHelpers.classPrivateFieldLooseBase(this,q)[q];L.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,q)[q].getPopupWindow().getPopupContainer(),"--keyboard-control");if(babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]){this.highlightFirstItem();L.Event.bind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,se)[se])}},onAfterClose:()=>{L.Event.unbind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,se)[se]);babelHelpers.classPrivateFieldLooseBase(this,we)[we]()},onPopupFirstShow:()=>{babelHelpers.classPrivateFieldLooseBase(this,q)[q].getMenuItems().forEach((e=>{s(e)}));babelHelpers.classPrivateFieldLooseBase(this,re)[re]()}})}enableArrows(){L.Event.bind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,se)[se])}disableArrows(){L.Event.unbind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,se)[se])}getMenu(){return babelHelpers.classPrivateFieldLooseBase(this,q)[q]}highlightFirstItem(){const e=babelHelpers.classPrivateFieldLooseBase(this,q)[q].getMenuItems().find((e=>e.delimiter!==true));babelHelpers.classPrivateFieldLooseBase(this,Be)[Be](e)}}function _e(){const e=new MutationObserver((e=>{e.some((e=>{if(e.type==="childList"){this.highlightFirstItem();babelHelpers.classPrivateFieldLooseBase(this,q)[q].getMenuItems().forEach((e=>{babelHelpers.classPrivateFieldLooseBase(this,he)[he](e);babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](e)}));return true}return false}))}));const s={childList:true,subtree:false};e.observe(babelHelpers.classPrivateFieldLooseBase(this,q)[q].getMenuContainer(),s)}function Ee(e){var s,a;if((s=babelHelpers.classPrivateFieldLooseBase(this,q)[q])!=null&&(a=s.getPopupWindow())!=null&&a.isShown()&&babelHelpers.classPrivateFieldLooseBase(this,q)[q].getMenuItems().length>0){switch(e.key){case"Enter":return babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]();case"ArrowUp":return babelHelpers.classPrivateFieldLooseBase(this,be)[be](e);case"ArrowDown":return babelHelpers.classPrivateFieldLooseBase(this,ce)[ce](e);case"ArrowRight":return babelHelpers.classPrivateFieldLooseBase(this,pe)[pe](e);case"ArrowLeft":return babelHelpers.classPrivateFieldLooseBase(this,de)[de](e);default:if(babelHelpers.classPrivateFieldLooseBase(this,J)[J]){babelHelpers.classPrivateFieldLooseBase(this,we)[we](true)}}}}function Ie(){if(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]&&babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].href){babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].getContainer().click()}else if(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]&&L.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].onclick)){babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].onclick(null,babelHelpers.classPrivateFieldLooseBase(this,Y)[Y])}}function xe(e){var s,a;e.preventDefault();(s=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y])==null?void 0:s.closeSubMenu();const l=babelHelpers.classPrivateFieldLooseBase(this,fe)[fe]();if(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]&&l===null&&((a=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y])==null?void 0:a.getMenuWindow().getParentMenuItem())===null){babelHelpers.classPrivateFieldLooseBase(this,we)[we]();return}babelHelpers.classPrivateFieldLooseBase(this,Be)[Be](l)}function je(e){var s;e.preventDefault();(s=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y])==null?void 0:s.closeSubMenu();const a=babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]();babelHelpers.classPrivateFieldLooseBase(this,Be)[Be](a)}function Te(e){e.preventDefault();if(!babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]){return}const s=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].getMenuWindow().getParentMenuItem();if(s){babelHelpers.classPrivateFieldLooseBase(this,Be)[Be](s);s.closeSubMenu()}}function Ke(e){e.preventDefault();babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]()}function ke(){var e;if((e=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y])!=null&&e.hasSubMenu()){babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].showSubMenu();const e=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].getSubMenu();babelHelpers.classPrivateFieldLooseBase(this,Be)[Be](e.getMenuItems()[0])}}function Me(e){e.subscribe("onMouseEnter",babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]);e.subscribe("onMouseLeave",babelHelpers.classPrivateFieldLooseBase(this,le)[le]);e.subscribe("SubMenu:onShow",babelHelpers.classPrivateFieldLooseBase(this,te)[te]);e.subscribe("SubMenu:onClose",babelHelpers.classPrivateFieldLooseBase(this,ie)[ie])}function Ae(e){e.unsubscribe("onMouseEnter",babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]);e.unsubscribe("onMouseLeave",babelHelpers.classPrivateFieldLooseBase(this,le)[le]);e.unsubscribe("SubMenu:onShow",babelHelpers.classPrivateFieldLooseBase(this,te)[te]);e.unsubscribe("SubMenu:onClose",babelHelpers.classPrivateFieldLooseBase(this,ie)[ie])}function Se(e){babelHelpers.classPrivateFieldLooseBase(this,Be)[Be](e.getTarget());L.Event.bind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,se)[se])}function Re(){babelHelpers.classPrivateFieldLooseBase(this,we)[we]()}function Ne(e){const s=e.getTarget();babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]=s.getSubMenu();L.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].getPopupWindow().getPopupContainer(),"--keyboard-control");s.getSubMenu().getMenuItems().forEach((e=>{babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](e)}))}function De(e){const s=e.getTarget();babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]=s.getMenuWindow()}function $e(e){var s;if(!e){return}L.Dom.removeClass((s=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y])==null?void 0:s.getContainer(),V);L.Dom.addClass(e==null?void 0:e.getContainer(),V);babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=e;babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]();this.emit(z.highlightMenuItem)}function Ge(){var e;if(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]===null){return babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].getMenuItems()[0]}const s=babelHelpers.classPrivateFieldLooseBase(this,me)[me]();const a=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].getMenuWindow().getMenuItems();if((e=a[s-1])!=null&&e.delimiter){return a[s-2]||null}return a[s-1]||null}function We(){var e,s,a;if(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]===null){var l;const e=(l=babelHelpers.classPrivateFieldLooseBase(this,Q)[Q])==null?void 0:l.getMenuItems();return e.find((e=>e.delimiter===false))}const t=babelHelpers.classPrivateFieldLooseBase(this,me)[me]();const i=(e=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y])==null?void 0:(s=e.getMenuWindow())==null?void 0:s.getMenuItems();if((a=i[t+1])!=null&&a.delimiter){return i[t+2]||null}return i[t+1]||null}function Ue(){const e=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].getMenuWindow();return e.getMenuItemPosition(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].getId())}function Xe(e){L.Dom.removeClass(e==null?void 0:e.getContainer(),V)}function Ve(e=false){if(!babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]){return}babelHelpers.classPrivateFieldLooseBase(this,ge)[ge](babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]);if(e&&babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].getMenuWindow().getParentMenuItem()){babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].getMenuWindow().getParentMenuItem().closeSubMenu()}babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=null;this.emit(z.clearHighlight)}function ze(){const e=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y];const s=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].getMenuWindow().getPopupWindow().getContentContainer();const a=L.Dom.getRelativePosition(s,e.getContainer());if(-a.y<0){s.scrollTop-=s.offsetHeight}else if(-a.y+10>a.height){s.scrollTop+=s.offsetHeight}}let qe=e=>e,Qe,Ye,Je,Ze;const es=Object.freeze({select:"select",open:"open",close:"close",clearHighlight:"clearHighlight",highlightMenuItem:"highlightMenuItem"});var ss=babelHelpers.classPrivateFieldLooseKey("keyboardMenu");var as=babelHelpers.classPrivateFieldLooseKey("menuItems");var ls=babelHelpers.classPrivateFieldLooseKey("filter");var ts=babelHelpers.classPrivateFieldLooseKey("cacheable");var is=babelHelpers.classPrivateFieldLooseKey("keyboardControlOptions");var rs=babelHelpers.classPrivateFieldLooseKey("forceTop");var os=babelHelpers.classPrivateFieldLooseKey("autoHide");var ns=babelHelpers.classPrivateFieldLooseKey("angle");var bs=babelHelpers.classPrivateFieldLooseKey("bordered");var cs=babelHelpers.classPrivateFieldLooseKey("roleInfo");var ds=babelHelpers.classPrivateFieldLooseKey("currentRole");var ps=babelHelpers.classPrivateFieldLooseKey("roleInfoContainer");var vs=babelHelpers.classPrivateFieldLooseKey("closeAllSubmenus");var us=babelHelpers.classPrivateFieldLooseKey("filterMenuItems");var hs=babelHelpers.classPrivateFieldLooseKey("getMenu");var Ps=babelHelpers.classPrivateFieldLooseKey("initKeyboardMenu");var Ls=babelHelpers.classPrivateFieldLooseKey("isMenuVisible");var Hs=babelHelpers.classPrivateFieldLooseKey("scrollForMenuVisibility");var Fs=babelHelpers.classPrivateFieldLooseKey("getMenuItems");var Bs=babelHelpers.classPrivateFieldLooseKey("getMenuItem");var fs=babelHelpers.classPrivateFieldLooseKey("isSeparatorMenuItem");var ys=babelHelpers.classPrivateFieldLooseKey("getAbilityMenuItem");var ms=babelHelpers.classPrivateFieldLooseKey("getRoleMenuItem");var gs=babelHelpers.classPrivateFieldLooseKey("getRoleMenuItemHtml");var ws=babelHelpers.classPrivateFieldLooseKey("renderAbilityMenuItemIcon");var Cs=babelHelpers.classPrivateFieldLooseKey("getCheckIcon");var Os=babelHelpers.classPrivateFieldLooseKey("getMenuItemClassname");var _s=babelHelpers.classPrivateFieldLooseKey("handleMenuItemClick");var Es=babelHelpers.classPrivateFieldLooseKey("showMenuItemLoader");var Is=babelHelpers.classPrivateFieldLooseKey("destroyMenuItemLoader");var xs=babelHelpers.classPrivateFieldLooseKey("getSectionSeparatorMenuItem");var js=babelHelpers.classPrivateFieldLooseKey("initRoleInfoFromOptions");class Ts extends u.EventEmitter{constructor(e){var s,a;super(e);Object.defineProperty(this,js,{value:Zs});Object.defineProperty(this,xs,{value:Js});Object.defineProperty(this,Is,{value:Ys});Object.defineProperty(this,Es,{value:Qs});Object.defineProperty(this,_s,{value:qs});Object.defineProperty(this,Os,{value:zs});Object.defineProperty(this,Cs,{value:Vs});Object.defineProperty(this,ws,{value:Xs});Object.defineProperty(this,gs,{value:Us});Object.defineProperty(this,ms,{value:Ws});Object.defineProperty(this,ys,{value:Gs});Object.defineProperty(this,fs,{value:$s});Object.defineProperty(this,Bs,{value:Ds});Object.defineProperty(this,Fs,{value:Ns});Object.defineProperty(this,Hs,{value:Rs});Object.defineProperty(this,Ls,{value:Ss});Object.defineProperty(this,Ps,{value:As});Object.defineProperty(this,hs,{value:Ms});Object.defineProperty(this,us,{value:ks});Object.defineProperty(this,vs,{value:Ks});Object.defineProperty(this,ss,{writable:true,value:void 0});Object.defineProperty(this,as,{writable:true,value:void 0});Object.defineProperty(this,ls,{writable:true,value:void 0});Object.defineProperty(this,ts,{writable:true,value:void 0});Object.defineProperty(this,is,{writable:true,value:void 0});Object.defineProperty(this,rs,{writable:true,value:true});Object.defineProperty(this,os,{writable:true,value:false});Object.defineProperty(this,ns,{writable:true,value:void 0});Object.defineProperty(this,bs,{writable:true,value:true});Object.defineProperty(this,cs,{writable:true,value:void 0});Object.defineProperty(this,ds,{writable:true,value:void 0});Object.defineProperty(this,ps,{writable:true,value:void 0});this.setEventNamespace("AI.Copilot.Menu");babelHelpers.classPrivateFieldLooseBase(this,as)[as]=e.items;babelHelpers.classPrivateFieldLooseBase(this,ts)[ts]=(s=e.cacheable)!=null?s:true;babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]=e.forceTop===undefined?babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]:e.forceTop===true;babelHelpers.classPrivateFieldLooseBase(this,os)[os]=e.autoHide===true;babelHelpers.classPrivateFieldLooseBase(this,ns)[ns]=e.angle;babelHelpers.classPrivateFieldLooseBase(this,bs)[bs]=(a=e.bordered)!=null?a:babelHelpers.classPrivateFieldLooseBase(this,bs)[bs];babelHelpers.classPrivateFieldLooseBase(this,js)[js](e.roleInfo);if(e.keyboardControlOptions){babelHelpers.classPrivateFieldLooseBase(this,is)[is]=e.keyboardControlOptions}else{babelHelpers.classPrivateFieldLooseBase(this,is)[is]={canGoOutFromTop:true,highlightFirstItemAfterShow:false,clearHighlightAfterType:false}}}open(){babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().show();this.adjustPosition();this.emit(es.open)}show(){var e,s,a;L.Dom.style((e=this.getPopup())==null?void 0:e.getPopupContainer(),"border",null);(s=this.getPopup())==null?void 0:s.setMaxWidth(null);(a=this.getPopup())==null?void 0:a.setMinWidth(258);this.adjustPosition();this.enableArrowsKey()}close(){babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().close();babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]();this.emit(es.close)}hide(){var e,s,a;L.Dom.style((e=this.getPopup())==null?void 0:e.getPopupContainer(),"border","none");(s=this.getPopup())==null?void 0:s.setMaxWidth(0);(a=this.getPopup())==null?void 0:a.setMinWidth(0);this.adjustPosition();babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]();this.disableArrowsKey()}contains(e){for(const l of babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getMenuItems()){var s,a;const t=(s=l.getSubMenu())==null?void 0:s.getPopupWindow();if(t!=null&&(a=t.getPopupContainer())!=null&&a.contains(e)){return true}}return this.getPopup().getPopupContainer().contains(e)}isShown(){var e,s,a;return(e=babelHelpers.classPrivateFieldLooseBase(this,ss)[ss])==null?void 0:(s=e.getMenu())==null?void 0:(a=s.getPopupWindow())==null?void 0:a.isShown()}setFilter(e){return;babelHelpers.classPrivateFieldLooseBase(this,ls)[ls]=L.Type.isString(e)?e:"";if(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]()){babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]();babelHelpers.classPrivateFieldLooseBase(this,us)[us]()}}setBindElement(e,s){babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getPopupWindow().setBindElement(e);babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getPopupWindow().setOffset({offsetLeft:s==null?void 0:s.left,offsetTop:s==null?void 0:s.top});babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getPopupWindow().adjustPosition()}getPopup(){return babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getPopupWindow()}adjustPosition(){babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getPopupWindow().adjustPosition({forceBindPosition:true,forceTop:babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]})}replaceMenuItemSubmenu(e){const s=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getMenuItems().find((s=>e.code===s.getId()));s.destroySubMenu();s._items=babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs](e.children,true);s.addSubMenu(babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs](e.children,true))}enableArrowsKey(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,ss)[ss])==null?void 0:e.enableArrows()}disableArrowsKey(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,ss)[ss])==null?void 0:e.disableArrows()}markMenuItemSelected(e){const s=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getMenuItem(e);const a=s.getContainer().querySelector(".ai__copilot-menu_item");L.Dom.addClass(a,"--selected")}unmarkMenuItemSelected(e){const s=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getMenuItem(e);const a=s.getContainer().querySelector(".ai__copilot-menu_item");L.Dom.removeClass(a,"--selected")}updateRoleInfo(e){babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].avatar=e.avatar;babelHelpers.classPrivateFieldLooseBase(this,ds)[ds].name=e.name}}function Ks(){babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getMenuItems().forEach((e=>{e.closeSubMenu()}))}function ks(){babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().menuItems=[];const e=babelHelpers.classPrivateFieldLooseBase(this,as)[as].filter((e=>e.text.toLowerCase().indexOf(babelHelpers.classPrivateFieldLooseBase(this,ls)[ls]?babelHelpers.classPrivateFieldLooseBase(this,ls)[ls].toLowerCase():"")===0||e.separator));const s=e.filter(((e,s,a)=>!e.separator||a[s+1]&&!a[s+1].separator));babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().layout.itemsContainer.innerHTML="";if(s.length===0){L.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().layout.menuContainer,"padding",0);L.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getPopupWindow().getPopupContainer(),"border",0)}else{L.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getPopupWindow().getPopupContainer(),"border",null);L.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().layout.menuContainer,"padding",null)}babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs](s).forEach((e=>{babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().addMenuItem(e)}))}function Ms(){if(!babelHelpers.classPrivateFieldLooseBase(this,ss)[ss]){babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]()}return babelHelpers.classPrivateFieldLooseBase(this,ss)[ss].getMenu()}function As(){const e=new h.Menu({minWidth:258,maxHeight:372,angle:babelHelpers.classPrivateFieldLooseBase(this,ns)[ns],closeByEsc:false,closeIcon:false,items:babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs](babelHelpers.classPrivateFieldLooseBase(this,as)[as]),toFrontOnShow:true,autoHide:babelHelpers.classPrivateFieldLooseBase(this,os)[os],className:`ai__copilot-scope ai__copilot-menu-popup ${babelHelpers.classPrivateFieldLooseBase(this,bs)[bs]?"--bordered":""}`,cacheable:babelHelpers.classPrivateFieldLooseBase(this,ts)[ts],events:{onPopupClose:e=>{this.emit(es.close);L.Dom.style(e.getPopupContainer(),"border","none")},onPopupAfterClose:e=>{L.Dom.style(e.getPopupContainer(),"border",null)},onPopupShow:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]&&babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]()===false){babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]()}}}});const s=new Oe({menu:e,...babelHelpers.classPrivateFieldLooseBase(this,is)[is]});s.subscribe(z.clearHighlight,(()=>{this.emit(es.clearHighlight)}));s.subscribe(z.highlightMenuItem,(()=>{this.emit(es.highlightMenuItem)}));babelHelpers.classPrivateFieldLooseBase(this,ss)[ss]=s}function Ss(){const e=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getPopupWindow().getPopupContainer();const s=e.getBoundingClientRect();return s.bottom<window.innerHeight}function Rs(){const e=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]().getPopupWindow().getPopupContainer();const s=L.Dom.getPosition(e);window.scrollTo({top:s.bottom+20-window.innerHeight,behavior:"smooth"});if(s.bottom>document.body.scrollHeight){L.Dom.style(document.body,"min-height",`${s.bottom}px`)}}function Ns(e,s=false){if(!e){return[]}const a=e.map((e=>babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs](e,s)));if(babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]&&s===false){a.unshift(babelHelpers.classPrivateFieldLooseBase(this,ms)[ms]())}return a}function Ds(e,s){return babelHelpers.classPrivateFieldLooseBase(this,fs)[fs](e)?babelHelpers.classPrivateFieldLooseBase(this,xs)[xs](e):babelHelpers.classPrivateFieldLooseBase(this,ys)[ys](e,s)}function $s(e){return e.separator}function Gs(e,s=false){const a=babelHelpers.classPrivateFieldLooseBase(this,ws)[ws](e);const l=babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs]();const i=e.icon?L.Tag.render(Qe||(Qe=qe`<div class="ai__copilot-menu_item-icon">${0}</div>`),a):null;const r=e.labelText?new t.Label({text:e.labelText,color:t.LabelColor.PRIMARY,fill:true,size:t.LabelSize.SM}).render():null;const o=r?L.Tag.render(`<div>${r}</div>`):null;const n=L.Tag.render(Ye||(Ye=qe`
			<div class="${0}">
				<div class="ai__copilot-menu_item-left">
					${0}
					<div class="ai__copilot-menu_item-text">${0}</div>
				</div>
				<div class="ai__copilot-menu_item-check">
					${0}
				</div>
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Os)[Os](e,s,e.selected),i,L.Text.encode(e.text),l.render(),o);return{html:n,id:e.code||"",text:e.text,href:e.href,className:`menu-popup-no-icon ${e.arrow?"menu-popup-item-submenu":""}`,onclick:babelHelpers.classPrivateFieldLooseBase(this,_s)[_s](e.command).bind(this),items:babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs](e.children,true),cacheable:false,disabled:e.disabled}}function Ws(){return{html:babelHelpers.classPrivateFieldLooseBase(this,gs)[gs](),className:`menu-popup-no-icon ${babelHelpers.classPrivateFieldLooseBase(this,cs)[cs].onclick?"menu-popup-item-submenu":""} --role-item`,onclick:babelHelpers.classPrivateFieldLooseBase(this,_s)[_s](babelHelpers.classPrivateFieldLooseBase(this,cs)[cs].onclick).bind(this)}}function Us(){const{name:e,avatar:s}=babelHelpers.classPrivateFieldLooseBase(this,cs)[cs].role;const a=babelHelpers.classPrivateFieldLooseBase(this,cs)[cs].subtitle;babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]=L.Tag.render(Je||(Je=qe`
			<div class="ai__copilot-menu_item">
				<div class="ai__copilot-menu_role">
					<div class="ai__copilot-menu_role-left">
						<img class="ai__copilot-menu_role-avatar" src="${0}" alt="">
					</div>
					<div class="ai__copilot-menu_role-right">
						<span
							class="ai__copilot-menu_role-title"
							title="${0}"
						>
							${0}
						</span>
						<span class="ai__copilot-menu_role-subtitle">${0}</span>
					</div>
				</div>
			</div>
		`),s.small,e,e,a);return babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]}function Xs(e){let s=null;if(e.icon){try{const a=new P.Icon({size:24,icon:e.icon||undefined});s=a.render()}catch{s=null}}return s}function Vs(){const e=getComputedStyle(document.body).getPropertyValue("--ui-color-link-primary-base");return new P.Icon({icon:P.Main.CHECK,size:18,color:e})}function zs(e,s){let a=["ai__copilot-menu_item"];if(s){a=[...a,"--no-icon"]}if(e.notHighlight){a=[...a,"--system"]}if(e.selected){a=[...a,"--selected"]}return a.join(" ")}function qs(e){return async(s,a)=>{var l,t;if(a!=null&&a.hasSubMenu()){return}(l=a.getMenuWindow())==null?void 0:(t=l.getParentMenuItem())==null?void 0:t.closeSubMenu();if(a.href){return}babelHelpers.classPrivateFieldLooseBase(this,Es)[Es](a);if(L.Type.isFunction(e)){await e(s,a,this)}else{await(e==null?void 0:e.execute())}babelHelpers.classPrivateFieldLooseBase(this,Is)[Is](a)}}function Qs(e){const s=18;const a=getComputedStyle(document.body.querySelector(".ai__copilot-scope")).getPropertyValue("--ai__copilot_color-main");const l=L.Tag.render(Ze||(Ze=qe`<div class="ai__copilot-menu_item-loader" style="position: relative; width: ${0}px; height: ${0}px;"></div>`),s,s);const t=e.getContainer().querySelector(".ai__copilot-menu_item");L.Dom.addClass(e.getContainer(),"menu-popup-item-loading");L.Dom.append(l,t);const r=new i.Loader({size:s,target:l,color:a});r.show()}function Ys(e){const s=e.getContainer().querySelector(".ai__copilot-menu_item-loader");L.Dom.removeClass(e.getContainer(),"menu-popup-item-loading");L.Dom.remove(s)}function Js(e){return{id:e.title||"",text:e.title,title:e.title,delimiter:true}}function Zs(e){if(e){babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]=e;babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]=new Proxy(e.role,{set:(e,s,a)=>{if(babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]&&s==="name"){const e=babelHelpers.classPrivateFieldLooseBase(this,ps)[ps].querySelector(".ai__copilot-menu_role-title");L.Dom.attr(e,"title",a);e.innerText=a}if(babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]&&s==="avatar"){const e=babelHelpers.classPrivateFieldLooseBase(this,ps)[ps].querySelector(".ai__copilot-menu_role-avatar");e.src=a.small}return Reflect.set(e,s,a)}})}}class ea{execute(){throw new Error("You must implement this method.")}}class sa extends u.EventEmitter{constructor(e){var s;super();this.setEventNamespace("AI.CopilotMenuItem");this.code=e.code;this.text=e.text;this.icon=e.icon;this.href=e.href;this.children=(s=e.children)!=null?s:[];this.onClick=e.onClick;this.disabled=e.disabled}getOptions(){return{code:this.code,text:this.text,icon:this.icon,href:this.href,command:this.onClick,disabled:this.disabled,children:this.children.map((e=>{if(e instanceof sa){return e.getOptions()}return e}))}}}let aa=e=>e,la;var ta=babelHelpers.classPrivateFieldLooseKey("container");var ia=babelHelpers.classPrivateFieldLooseKey("rawResult");class ra{constructor(){Object.defineProperty(this,ta,{writable:true,value:void 0});Object.defineProperty(this,ia,{writable:true,value:void 0})}render(){babelHelpers.classPrivateFieldLooseBase(this,ta)[ta]=L.Tag.render(la||(la=aa`<div class="ai__copilot-result"></div>`));babelHelpers.classPrivateFieldLooseBase(this,ia)[ia]="";return babelHelpers.classPrivateFieldLooseBase(this,ta)[ta]}addResult(e){babelHelpers.classPrivateFieldLooseBase(this,ia)[ia]=e;babelHelpers.classPrivateFieldLooseBase(this,ta)[ta].innerHTML+=String(L.Text.encode(e).replaceAll(/(\r\n|\r|\n)/g,"<br>"))}clearResult(){babelHelpers.classPrivateFieldLooseBase(this,ia)[ia]="";babelHelpers.classPrivateFieldLooseBase(this,ta)[ta].innerHTML=""}getResult(){return babelHelpers.classPrivateFieldLooseBase(this,ia)[ia]}}let oa=e=>e,na;const ba=e=>{const s=e.target;const a=e.text;return new h.Popup({content:L.Tag.render(na||(na=oa`<div style="padding-right: 20px;">${0}</div>`),a),darkMode:true,borderRadius:"4px",animation:"fading-slide",autoHide:true,events:{onPopupShow:ca(s)}})};const ca=e=>s=>{const a=L.Dom.getPosition(e);const l=L.Dom.getPosition(s.getPopupContainer());const t=h.Popup.getOption("angleLeftOffset");s.setAngle({offset:l.width/2-a.width/2-4});s.setBindElement({left:a.left-l.width/2+a.width/2+t,top:a.bottom});s.adjustPosition({forceBindPosition:true,forceLeft:true,forceTop:true})};var da=babelHelpers.classPrivateFieldLooseKey("popup");class pa{constructor(e){Object.defineProperty(this,da,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,da)[da]=ba(e)}static addHintOnTargetHover(e){const s=ba(e);const a=e.target;L.Event.bind(a,"mouseenter",(()=>{s.show()}));L.Event.bind(a,"mouseleave",(()=>{s.close()}))}show(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,da)[da])==null?void 0:e.show()}hide(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,da)[da])==null?void 0:e.close()}isShown(){var e;return Boolean((e=babelHelpers.classPrivateFieldLooseBase(this,da)[da])==null?void 0:e.isShown())}}function va(e,s){const a=document.createRange();a.selectNode(e);a.setStart(e,0);let l=0;const t=[e];while(t.length>0){const e=t.pop();if(e.nodeType===Node.TEXT_NODE){const t=e.textContent.length;if(l+t>=s){a.setStart(e,s-l);a.setEnd(e,s-l);return a}l+=t}else if(e.childNodes&&e.childNodes.length>0){for(let s=e.childNodes.length-1;s>=0;s--){t.push(e.childNodes[s])}}}a.setStart(e,e.childNodes.length);a.setEnd(e,e.childNodes.length);return a}function ua(e,s){const a=va(e,s);const l=window.getSelection();l.removeAllRanges();l.addRange(a)}function ha(e){const s=window.getSelection();const a=s.getRangeAt(0);const l=a.cloneRange();l.selectNodeContents(e);l.setEnd(a.endContainer,a.endOffset);return l.toString().length}let Pa=e=>e,La;var Ha=babelHelpers.classPrivateFieldLooseKey("container");var Fa=babelHelpers.classPrivateFieldLooseKey("handlePasteEvent");var Ba=babelHelpers.classPrivateFieldLooseKey("handleInputEvent");class fa extends u.EventEmitter{constructor(e){super(e);Object.defineProperty(this,Ba,{value:ma});Object.defineProperty(this,Fa,{value:ya});Object.defineProperty(this,Ha,{writable:true,value:void 0});this.value="";this.setEventNamespace("AI.CopilotInputFieldTextarea")}getContainer(){return babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha]}render(){babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha]=L.Tag.render(La||(La=Pa`
			<div
				class="ai__copilot_input"
				contenteditable="true"></div>
		`));const e=new MutationObserver((e=>{for(const a of e){var s;if(((s=a.target.parentElement)==null?void 0:s.tagName)!=="STRONG"){continue}const e=a.target.nodeValue||"";const l=[...e].indexOf("[");const t=[...e].indexOf("]");if(t===-1||l===-1){const e=this.getCursorPosition();a.target.parentElement.replaceWith(...a.target.parentElement.childNodes);this.setCursorPosition(e)}}}));e.observe(babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha],{childList:true,subtree:true,characterDataOldValue:true});L.bind(babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha],"input",babelHelpers.classPrivateFieldLooseBase(this,Ba)[Ba].bind(this));L.bind(babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha],"paste",babelHelpers.classPrivateFieldLooseBase(this,Fa)[Fa].bind(this));L.bind(babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha],"focus",(e=>{this.emit("focus")}));return babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha]}set value(e){if(babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha]){babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha].innerText=e}}get value(){return babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha].innerText}get disabled(){var e;return((e=babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha])==null?void 0:e.getAttribute("contenteditable"))==="false"}set disabled(e){if(e===false){L.Dom.attr(babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha],"contenteditable",true)}else{L.Dom.attr(babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha],"contenteditable",false)}}focus(e){var s;const a=e?0:999;(s=babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha])==null?void 0:s.focus();this.setCursorPosition(a)}getComputedStyle(){return getComputedStyle(babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha])}addClass(e){L.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha],e)}removeClass(e){L.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha],e)}setStyle(e,s){L.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha],e,s)}get scrollHeight(){var e;return((e=babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha])==null?void 0:e.scrollHeight)||0}isCursorInTheEnd(){const e=this.getCursorPosition();const s=babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha].innerText.length;return e>=s}getCursorPosition(){return ha(babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha])}setCursorPosition(e){ua(babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha],e)}setHtmlContent(e){babelHelpers.classPrivateFieldLooseBase(this,Ha)[Ha].innerHTML=e;this.focus();this.emit("input",this.value)}}function ya(e){e.preventDefault();const s=e.clipboardData.getData("text/plain");document.execCommand("insertText",false,s)}function ma(e){var s;if(e.inputType==="deleteContentBackward"||e.inputType==="deleteWordBackward"||e.inputType==="deleteContentForward"){this.emit("input",this.value);return}const a=window.getSelection();const l=this.getCursorPosition();if(((s=a.anchorNode.parentElement)==null?void 0:s.tagName)==="STRONG"&&a.baseOffset===a.anchorNode.length){let s=a.anchorNode.parentElement.nextSibling;if(!s){s=document.createTextNode(" ");L.Dom.append(s,a.anchorNode.parentNode.parentNode)}a.anchorNode.textContent=a.anchorNode.textContent.slice(0,-1);s.textContent=e.data+s.textContent;this.setCursorPosition(l);e.preventDefault();e.stopPropagation();return}this.emit("input",this.value)}var ga="18";var wa="5.9.6";var Ca=60;var Oa=0;var _a=539;var Ea=210;var Ia=210;var xa=0;var ja=[];var Ta=[{nm:"[FRAME] 18 - Null / left-star - Null / left-star / right-star - Null / right-star / round - Null / round / Ellipse 2 - Null / Ellipse 2 - Stroke",fr:60,id:"lo8h9rmzawnjrpxsxm9",layers:[{ty:3,ddd:0,ind:4,hd:false,nm:"18 - Null",ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[0,0]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ty:3,ddd:0,ind:5,hd:false,nm:"left-star - Null",parent:4,ks:{a:{a:0,k:[37.7244,37.5291]},o:{a:0,k:100},p:{a:0,k:[95.78874400000001,95.16759099999999]},r:{a:0,k:0},s:{a:0,k:[101,101]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ty:4,ddd:0,ind:6,hd:false,nm:"left-star",parent:5,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:0,op:540,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:1,k:[{t:25.89,s:[{c:true,v:[[39.4485,.9376],[36.0004,.9376],[29.4602,18.5122],[18.5993,29.3117],[.9248,35.8149],[.9248,39.2435],[18.5994,45.7467],[29.4603,56.5462],[36.0005,74.1208],[39.4486,74.1208],[45.9888,56.5462],[56.8497,45.7467],[74.5243,39.2435],[74.5243,35.8149],[56.8498,29.3117],[45.9889,18.5122],[39.4485,.9376]],i:[[0,0],[.5922,-1.5914],[0,0],[5.0318,-1.8514],[0,0],[-1.6004,-.5889],[0,0],[-1.8619,-5.0033],[0,0],[-.5922,1.5914],[0,0],[-5.0318,1.8514],[0,0],[1.6004,.5889],[0,0],[1.8619,5.0033],[0,0]],o:[[-.5922199999999975,-1.5914],[0,0],[-1.8619200000000014,5.003299999999999],[0,0],[-1.60045,.58887],[0,0],[5.031760000000002,1.851390000000002],[0,0],[.5922199999999975,1.591399999999993],[0,0],[1.8619199999999978,-5.003300000000003],[0,0],[1.600449999999995,-.58887],[0,0],[-5.031770000000002,-1.8513899999999985],[0,0],[0,0]]}],o:{x:[.3],y:[0]},i:{x:[1],y:[1]}},{t:145.224,s:[{c:true,v:[[38.4952,21.1678],[36.9535,21.1678],[34.0294,29.026],[29.1734,33.8548],[21.271,36.7626],[21.271,38.2956],[29.1734,41.2034],[34.0294,46.0322],[36.9536,53.8904],[38.4953,53.8904],[41.4194,46.0322],[46.2754,41.2034],[54.1778,38.2956],[54.1778,36.7626],[46.2754,33.8548],[41.4194,29.026],[38.4952,21.1678]],i:[[0,0],[.2648,-.7116],[0,0],[2.2497,-.8278],[0,0],[-.7156,-.2633],[0,0],[-.8325,-2.2371],[0,0],[-.2648,.7116],[0,0],[-2.2497,.8278],[0,0],[.7156,.2633],[0,0],[.8325,2.2371],[0,0]],o:[[-.26478999999999786,-.7115700000000018],[0,0],[-.8324799999999968,2.2371499999999997],[0,0],[-.7155699999999996,.263300000000001],[0,0],[2.2497299999999996,.8278200000000027],[0,0],[.26478999999999786,.7115700000000018],[0,0],[.8324799999999968,-2.2371499999999997],[0,0],[.7155699999999996,-.263300000000001],[0,0],[-2.2497299999999996,-.8278200000000027],[0,0],[0,0]]}],o:{x:[.3],y:[0]},i:{x:[1],y:[1]}},{t:245.88,s:[{c:true,v:[[39.3124,3.8283],[36.1365,3.8283],[30.1127,20.0145],[20.1092,29.9608],[3.83,35.9502],[3.83,39.1079],[20.1092,45.0973],[30.1127,55.0436],[36.1366,71.2297],[39.3125,71.2297],[45.3363,55.0435],[55.3398,45.0972],[71.619,39.1078],[71.619,35.9501],[55.3398,29.9607],[45.3363,20.0144],[39.3124,3.8283]],i:[[0,0],[.5455,-1.4657],[0,0],[4.6345,-1.7051],[0,0],[-1.4741,-.5423],[0,0],[-1.7149,-4.608],[0,0],[-.5455,1.4657],[0,0],[-4.6345,1.7051],[0,0],[1.4741,.5423],[0,0],[1.7149,4.608],[0,0]],o:[[-.5454700000000017,-1.4656800000000003],[0,0],[-1.714929999999999,4.608029999999999],[0,0],[-1.4741,.542349999999999],[0,0],[4.634520000000002,1.705129999999997],[0,0],[.5454700000000017,1.465680000000006],[0,0],[1.7149300000000025,-4.608029999999999],[0,0],[1.4740999999999929,-.542349999999999],[0,0],[-4.634520000000002,-1.7051300000000005],[0,0],[0,0]]}],o:{x:[.3],y:[0]},i:{x:[1],y:[1]}},{t:356.178,s:[{c:true,v:[[38.4728,21.6471],[36.9761,21.6471],[34.1372,29.2751],[29.4227,33.9624],[21.7506,36.785],[21.7506,38.2731],[29.4228,41.0957],[34.1373,45.7831],[36.9763,53.4111],[38.4731,53.4111],[41.3121,45.7831],[46.0266,41.0958],[53.6988,38.2732],[53.6988,36.7851],[46.0266,33.9625],[41.3121,29.2751],[38.4728,21.6471]],i:[[0,0],[.2571,-.6907],[0,0],[2.1842,-.8036],[0,0],[-.6947,-.2556],[0,0],[-.8082,-2.1716],[0,0],[-.2571,.6907],[0,0],[-2.1842,.8036],[0,0],[.6947,.2556],[0,0],[.8082,2.1716],[0,0]],o:[[-.2570699999999988,-.6907199999999989],[0,0],[-.8082199999999986,2.1716000000000015],[0,0],[-.6947200000000002,.255589999999998],[0,0],[2.1841800000000013,.8035700000000006],[0,0],[.2570699999999988,.6907199999999989],[0,0],[.8082199999999986,-2.171599999999998],[0,0],[.6947199999999967,-.255589999999998],[0,0],[-2.184179999999998,-.8035700000000006],[0,0],[0,0]]}],o:{x:[.3],y:[0]},i:{x:[1],y:[1]}},{t:474.312,s:[{c:true,v:[[39.4485,.9397],[36.0004,.9397],[29.4602,18.5132],[18.5993,29.3121],[.9248,35.8149],[.9248,39.2433],[18.5994,45.7461],[29.4603,56.545],[36.0005,74.1185],[39.4486,74.1185],[45.9888,56.545],[56.8497,45.7462],[74.5243,39.2434],[74.5243,35.815],[56.8498,29.3122],[45.9889,18.5133],[39.4485,.9397]],i:[[0,0],[.5922,-1.5913],[0,0],[5.0318,-1.8513],[0,0],[-1.6004,-.5888],[0,0],[-1.8619,-5.003],[0,0],[-.5922,1.5913],[0,0],[-5.0318,1.8513],[0,0],[1.6004,.5888],[0,0],[1.8619,5.003],[0,0]],o:[[-.5922199999999975,-1.59131],[0,0],[-1.8619200000000014,5.00301],[0,0],[-1.60045,.5888399999999976],[0,0],[5.031760000000002,1.8512800000000027],[0,0],[.5922199999999975,1.591310000000007],[0,0],[1.8619199999999978,-5.003],[0,0],[1.600449999999995,-.5888399999999976],[0,0],[-5.031770000000002,-1.8512799999999991],[0,0],[0,0]]}]}]}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[1,1,1,1]},nm:"Fill",hd:false,r:2},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:7,hd:false,nm:"right-star - Null",parent:4,ks:{a:{a:0,k:[21.7973,21.6844]},o:{a:0,k:100},p:{a:0,k:[128.4094,121.8898]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ty:4,ddd:0,ind:8,hd:false,nm:"right-star",parent:7,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:0,op:540,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:1,k:[{t:66.27,s:[{c:true,v:[[22.6367,3.8608],[20.958,3.8608],[17.774,12.4213],[12.4865,17.6817],[3.8818,20.8494],[3.8818,22.5195],[12.4865,25.6872],[17.774,30.9476],[20.958,39.5081],[22.6367,39.5081],[25.8207,30.9476],[31.1083,25.6872],[39.713,22.5195],[39.713,20.8495],[31.1083,17.6818],[25.8208,12.4214],[22.6367,3.8608]],i:[[0,0],[.2883,-.7752],[0,0],[2.4497,-.9018],[0,0],[-.7792,-.2868],[0,0],[-.9065,-2.4371],[0,0],[-.2883,.7752],[0,0],[-2.4497,.9018],[0,0],[.7792,.2868],[0,0],[.9065,2.4371],[0,0]],o:[[-.2883199999999988,-.7751600000000001],[0,0],[-.9064599999999992,2.4370899999999995],[0,0],[-.7791700000000001,.28684000000000154],[0,0],[2.4496800000000007,.9018100000000011],[0,0],[.2883199999999988,.7751700000000028],[0,0],[.9064599999999992,-2.4370900000000013],[0,0],[.7791599999999974,-.28684000000000154],[0,0],[-2.4496800000000007,-.9018100000000011],[0,0],[0,0]]}],o:{x:[0],y:[0]},i:{x:[0],y:[1]}},{t:156.072,s:[{c:true,v:[[23.2285,-8.7091],[20.3661,-8.7091],[14.9369,5.8887],[5.9209,14.8589],[-8.7513,20.2606],[-8.7513,23.1084],[5.9209,28.5101],[14.9369,37.4804],[20.3661,52.0782],[23.2285,52.0782],[28.6577,37.4805],[37.6737,28.5103],[52.3459,23.1086],[52.3459,20.2608],[37.6737,14.8591],[28.6577,5.8889],[23.2285,-8.7091]],i:[[0,0],[.4916,-1.3218],[0,0],[4.177,-1.5378],[0,0],[-1.3286,-.4891],[0,0],[-1.5456,-4.1558],[0,0],[-.4916,1.3218],[0,0],[-4.177,1.5378],[0,0],[1.3286,.4891],[0,0],[1.5456,4.1558],[0,0]],o:[[-.49162000000000106,-1.32184],[0,0],[-1.5456400000000006,4.155840000000001],[0,0],[-1.3285900000000002,.4891299999999994],[0,0],[4.17703,1.5378000000000007],[0,0],[.49162000000000106,1.3218499999999977],[0,0],[1.5456399999999988,-4.155839999999998],[0,0],[1.3285699999999991,-.4891299999999994],[0,0],[-4.177030000000002,-1.5378000000000007],[0,0],[0,0]]}],o:{x:[0],y:[0]},i:{x:[0],y:[1]}},{t:283.854,s:[{c:true,v:[[22.5686,5.3037],[21.026,5.3037],[18.1001,13.1712],[13.2413,18.0057],[5.3343,20.9169],[5.3343,22.4517],[13.2413,25.3629],[18.1001,30.1974],[21.026,38.0649],[22.5686,38.0649],[25.4945,30.1974],[30.3533,25.3629],[38.2603,22.4517],[38.2603,20.9169],[30.3533,18.0057],[25.4945,13.1712],[22.5686,5.3037]],i:[[0,0],[.2649,-.7124],[0,0],[2.251,-.8288],[0,0],[-.716,-.2636],[0,0],[-.833,-2.2398],[0,0],[-.2649,.7124],[0,0],[-2.251,.8288],[0,0],[.716,.2636],[0,0],[.833,2.2398],[0,0]],o:[[-.2649399999999993,-.7124100000000002],[0,0],[-.8329599999999999,2.2398000000000007],[0,0],[-.7159899999999997,.2636199999999995],[0,0],[2.251050000000001,.8288000000000011],[0,0],[.2649399999999993,.7124099999999984],[0,0],[.8329599999999999,-2.239799999999999],[0,0],[.7159800000000018,-.2636199999999995],[0,0],[-2.2510499999999993,-.8288000000000011],[0,0],[0,0]]}],o:{x:[0],y:[0]},i:{x:[0],y:[1]}},{t:379.08,s:[{c:true,v:[[23.233,-8.8011],[20.3615,-8.8011],[14.9151,5.8409],[5.8706,14.8383],[-8.8481,20.2563],[-8.8481,23.1128],[5.8706,28.5308],[14.9152,37.5282],[20.3616,52.1701],[23.2331,52.1701],[28.6795,37.5282],[37.7241,28.5308],[52.4428,23.1128],[52.4428,20.2563],[37.7241,14.8383],[28.6795,5.8409],[23.233,-8.8011]],i:[[0,0],[.4932,-1.3258],[0,0],[4.1903,-1.5425],[0,0],[-1.3328,-.4906],[0,0],[-1.5505,-4.1684],[0,0],[-.4932,1.3259],[0,0],[-4.1903,1.5425],[0,0],[1.3328,.4906],[0,0],[1.5505,4.1684],[0,0]],o:[[-.49317999999999884,-1.3258399999999995],[0,0],[-1.5505399999999998,4.16842],[0,0],[-1.3328000000000007,.4906100000000002],[0,0],[4.19027,1.5424499999999988],[0,0],[.49317999999999884,1.3258500000000026],[0,0],[1.5505400000000016,-4.168419999999998],[0,0],[1.3327799999999996,-.4906100000000002],[0,0],[-4.190269999999998,-1.5424500000000005],[0,0],[0,0]]}],o:{x:[0],y:[0]},i:{x:[0],y:[1]}},{t:472.04999999999995,s:[{c:true,v:[[22.6367,3.8608],[20.958,3.8608],[17.774,12.4213],[12.4865,17.6817],[3.8818,20.8494],[3.8818,22.5195],[12.4865,25.6872],[17.774,30.9476],[20.958,39.5081],[22.6367,39.5081],[25.8207,30.9476],[31.1083,25.6872],[39.713,22.5195],[39.713,20.8495],[31.1083,17.6818],[25.8208,12.4214],[22.6367,3.8608]],i:[[0,0],[.2883,-.7752],[0,0],[2.4497,-.9018],[0,0],[-.7792,-.2868],[0,0],[-.9065,-2.4371],[0,0],[-.2883,.7752],[0,0],[-2.4497,.9018],[0,0],[.7792,.2868],[0,0],[.9065,2.4371],[0,0]],o:[[-.2883199999999988,-.7751600000000001],[0,0],[-.9064599999999992,2.4370899999999995],[0,0],[-.7791700000000001,.28684000000000154],[0,0],[2.4496800000000007,.9018100000000011],[0,0],[.2883199999999988,.7751700000000028],[0,0],[.9064599999999992,-2.4370900000000013],[0,0],[.7791599999999974,-.28684000000000154],[0,0],[-2.4496800000000007,-.9018100000000011],[0,0],[0,0]]}]}]}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[1,1,1,1]},nm:"Fill",hd:false,r:2},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:9,hd:false,nm:"round - Null",parent:4,ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[42.3225,39.1459]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ty:4,ddd:0,ind:10,hd:false,nm:"round",parent:9,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:0,op:540,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[65.2256,129.7757],[130.4512,64.8878],[65.2256,-1e-4],[0,64.8878],[65.2256,129.7757],[65.2256,129.7757]],i:[[0,0],[0,35.8366],[36.0231,0],[0,-35.8366],[-36.0231,0],[0,0]],o:[[36.023129999999995,0],[0,-35.83657],[-36.02312,0],[0,35.836569999999995],[0,0],[0,0]]}}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[.5764705882352941,.3568627450980392,.9254901960784314,1]},nm:"Fill",hd:false,r:2},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:11,hd:false,nm:"Ellipse 2 - Null",parent:4,ks:{a:{a:0,k:[91.5,91.5]},o:{a:0,k:100},p:{a:0,k:[106.27800025906815,104.90813283170486]},r:{a:1,k:[{t:107.532,s:[-179],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:227.298,s:[-70],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:360.204,s:[-104.87],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:442.95000000000005,s:[17.67],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:537,s:[181]}]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ddd:0,ind:12,hd:false,nm:"Ellipse 2 - Stroke",parent:11,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:0,op:540,bm:0,sr:1,ty:4,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[183,91.5],[91.5,183],[0,91.5],[91.5,0],[183,91.5],[183,91.5]],i:[[0,0],[50.5355,0],[0,50.5355],[-50.5355,0],[0,-50.5355],[0,0]],o:[[0,50.53550000000001],[-50.5355,0],[0,-50.5355],[50.53550000000001,0],[0,0],[0,0]]}}},{ty:"st",o:{a:0,k:100},w:{a:0,k:22},c:{a:0,k:[.5764705882352941,.3568627450980392,.9254901960784314,1]},ml:4,lc:2,lj:2,nm:"Stroke",hd:false,d:[{n:"o",nm:"Offset",v:{a:0,k:60}},{n:"d",nm:"Dash",v:{a:1,k:[{t:6.702,s:[277],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:155.184,s:[133.4122],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:226.644,s:[133.4122],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:294.36600000000004,s:[133],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:460.524,s:[155],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:531.972,s:[277]}]}},{n:"g",nm:"Gap",v:{a:1,k:[{t:6.6,s:[90],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:117.576,s:[80],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:226.644,s:[86],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:320.694,s:[56],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:399.072,s:[56],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:507.528,s:[90]}]}}]},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]},{ty:"tm",s:{a:0,k:0},e:{a:0,k:100},o:{a:0,k:0},m:1},{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"rc",nm:"Rectangle",hd:false,p:{a:0,k:[102.5,102.5]},s:{a:0,k:[410,410]},r:{a:0,k:0}},{ty:"fl",o:{a:0,k:0},c:{a:0,k:[0,1,0,1]},nm:"Fill",hd:false,r:1},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]}]}];var Ka=[{ddd:0,ind:1,ty:0,nm:"18",refId:"lo8h9rmzawnjrpxsxm9",sr:1,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,w:210,h:210,ip:0,op:540,st:0,hd:false,bm:0}];var ka={a:"",d:"",tc:"",g:"Aninix"};var Ma={nm:ga,v:wa,fr:Ca,ip:Oa,op:_a,w:Ea,h:Ia,ddd:xa,markers:ja,assets:Ta,layers:Ka,meta:ka};let Aa=e=>e,Sa,Ra,Na;var Da=babelHelpers.classPrivateFieldLooseKey("container");var $a=babelHelpers.classPrivateFieldLooseKey("stopRecordingButton");var Ga=babelHelpers.classPrivateFieldLooseKey("startRecordingButton");var Wa=babelHelpers.classPrivateFieldLooseKey("disabled");var Ua=babelHelpers.classPrivateFieldLooseKey("initContainer");var Xa=babelHelpers.classPrivateFieldLooseKey("renderStartRecordingButton");var Va=babelHelpers.classPrivateFieldLooseKey("renderStopRecordingButton");var za=babelHelpers.classPrivateFieldLooseKey("enableStartRecordingButton");var qa=babelHelpers.classPrivateFieldLooseKey("disableStartRecordingButton");var Qa=babelHelpers.classPrivateFieldLooseKey("enableStopRecordingButton");var Ya=babelHelpers.classPrivateFieldLooseKey("disableStopRecordingButton");class Ja extends u.EventEmitter{constructor(e){super(e);Object.defineProperty(this,Ya,{value:il});Object.defineProperty(this,Qa,{value:tl});Object.defineProperty(this,qa,{value:ll});Object.defineProperty(this,za,{value:al});Object.defineProperty(this,Va,{value:sl});Object.defineProperty(this,Xa,{value:el});Object.defineProperty(this,Ua,{value:Za});Object.defineProperty(this,Da,{writable:true,value:void 0});Object.defineProperty(this,$a,{writable:true,value:void 0});Object.defineProperty(this,Ga,{writable:true,value:void 0});Object.defineProperty(this,Wa,{writable:true,value:void 0});this.setEventNamespace("AI:Copilot:VoiceButton");babelHelpers.classPrivateFieldLooseBase(this,Wa)[Wa]=false;babelHelpers.classPrivateFieldLooseBase(this,Da)[Da]=null}start(){L.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Da)[Da],"--recording")}stop(){L.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,Da)[Da],"--recording")}enable(){babelHelpers.classPrivateFieldLooseBase(this,Wa)[Wa]=false;babelHelpers.classPrivateFieldLooseBase(this,za)[za]();babelHelpers.classPrivateFieldLooseBase(this,Qa)[Qa]()}disable(){babelHelpers.classPrivateFieldLooseBase(this,Wa)[Wa]=true;babelHelpers.classPrivateFieldLooseBase(this,qa)[qa]();babelHelpers.classPrivateFieldLooseBase(this,Ya)[Ya]()}isDisabled(){return babelHelpers.classPrivateFieldLooseBase(this,Wa)[Wa]}getContainer(){if(!babelHelpers.classPrivateFieldLooseBase(this,Da)[Da]){babelHelpers.classPrivateFieldLooseBase(this,Ua)[Ua]()}return babelHelpers.classPrivateFieldLooseBase(this,Da)[Da]}render(){return this.getContainer()}}function Za(){babelHelpers.classPrivateFieldLooseBase(this,Da)[Da]=L.Tag.render(Sa||(Sa=Aa`
			<div class="ai__copilot-voice-input-btn-container">
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Xa)[Xa](),babelHelpers.classPrivateFieldLooseBase(this,Va)[Va]())}function el(){const e=new P.Icon({icon:P.Main.MICROPHONE_ON,size:20});babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]=L.Tag.render(Ra||(Ra=Aa`
			<button
				class="ai__copilot-voice-input-btn --start"
			>
				${0}
			</button>
		`),e.render());babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].disabled=babelHelpers.classPrivateFieldLooseBase(this,Wa)[Wa];L.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga],"click",(()=>{this.emit("start")}));return babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]}function sl(){const e=new P.Icon({icon:P.Actions.STOP,size:17,color:getComputedStyle(document.body).getPropertyValue("--ui-color-on-primary")});babelHelpers.classPrivateFieldLooseBase(this,$a)[$a]=L.Tag.render(Na||(Na=Aa`
			<button
				class="ai__copilot-voice-input-btn --stop"
			>
				${0}
			</button>
		`),e.render());babelHelpers.classPrivateFieldLooseBase(this,$a)[$a].disabled=babelHelpers.classPrivateFieldLooseBase(this,Wa)[Wa];L.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,$a)[$a],"click",(()=>{this.emit("stop")}));return babelHelpers.classPrivateFieldLooseBase(this,$a)[$a]}function al(){if(babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]){babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].disabled=false}}function ll(){if(babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga]){babelHelpers.classPrivateFieldLooseBase(this,Ga)[Ga].disabled=true}}function tl(){if(babelHelpers.classPrivateFieldLooseBase(this,$a)[$a]){babelHelpers.classPrivateFieldLooseBase(this,$a)[$a].disabled=false}}function il(){if(babelHelpers.classPrivateFieldLooseBase(this,$a)[$a]){babelHelpers.classPrivateFieldLooseBase(this,$a)[$a].disabled=true}}let rl=e=>e,ol,nl,bl,cl,dl;var pl=babelHelpers.classPrivateFieldLooseKey("errors");var vl=babelHelpers.classPrivateFieldLooseKey("detailedErrorInfoPopup");var ul=babelHelpers.classPrivateFieldLooseKey("initDetailerErrorInfoPopup");var hl=babelHelpers.classPrivateFieldLooseKey("getDetailedErrorInfoPopupContent");class Pl{constructor(e){Object.defineProperty(this,hl,{value:Hl});Object.defineProperty(this,ul,{value:Ll});Object.defineProperty(this,pl,{writable:true,value:void 0});Object.defineProperty(this,vl,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,pl)[pl]=e.errors}render(){var e;let s=babelHelpers.classPrivateFieldLooseBase(this,pl)[pl][babelHelpers.classPrivateFieldLooseBase(this,pl)[pl].length-1].message;const a=babelHelpers.classPrivateFieldLooseBase(this,pl)[pl][babelHelpers.classPrivateFieldLooseBase(this,pl)[pl].length-1].code;let l=null;if(((e=babelHelpers.classPrivateFieldLooseBase(this,pl)[pl][0])==null?void 0:e.code)==="AI_ENGINE_ERROR_OTHER"){var t,i;s=L.Loc.getMessage("AI_COPILOT_ERROR_OTHER");s=s.replace("[feedback_form]",'<span class="ai__copilot_input-field-error-detail">');s=s.replace("[/feedback_form]","</span>");l=L.Tag.render(ol||(ol=rl`
				<div class="ai__copilot_input-field-error">
					${0}
				</div>
			`),s);L.Event.bind(l.getElementsByClassName("ai__copilot_input-field-error-detail")[0],"click",(t=babelHelpers.classPrivateFieldLooseBase(this,pl)[pl][0])==null?void 0:(i=t.customData)==null?void 0:i.clickHandler)}else if(top.BX&&top.BX.Helper&&a==="AI_ENGINE_ERROR_PROVIDER"){s=L.Loc.getMessage("AI_COPILOT_ERROR_PROVIDER");s=s.replace("[link]",'<span class="ai__copilot_input-field-error-detail">');s=s.replace("[/link]","</span>");l=L.Tag.render(nl||(nl=rl`
				<div class="ai__copilot_input-field-error">
					${0}
				</div>
			`),s);L.Event.bind(l.getElementsByClassName("ai__copilot_input-field-error-detail")[0],"click",(e=>{top.BX.Helper.show("redirect=detail&code=20267044")}))}else{l=L.Tag.render(bl||(bl=rl`
				<div class="ai__copilot_input-field-error">
					${0}
				</div>
			`),s)}return L.Tag.render(cl||(cl=rl`
			<div class="ai__copilot_input-field-error">
				<span class="ai__copilot_input-field-error-title">
					${0}
				</span>
			</div>
		`),l)}setErrors(e){babelHelpers.classPrivateFieldLooseBase(this,pl)[pl]=e}getErrors(){return babelHelpers.classPrivateFieldLooseBase(this,pl)[pl]}}function Ll(){if(babelHelpers.classPrivateFieldLooseBase(this,vl)[vl]){return}babelHelpers.classPrivateFieldLooseBase(this,vl)[vl]=new h.Popup({id:"ai__copilot_error-popup",content:babelHelpers.classPrivateFieldLooseBase(this,hl)[hl](),darkMode:true,maxWidth:300,autoHide:true,closeByEsc:true,closeIcon:true,cacheable:true})}function Hl(){return L.Tag.render(dl||(dl=rl`
			<div class="ai__copilot_error-popup-content">
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,pl)[pl][babelHelpers.classPrivateFieldLooseBase(this,pl)[pl].length-1].message)}let Fl=e=>e,Bl;const fl=Object.freeze({});var yl=babelHelpers.classPrivateFieldLooseKey("container");var ml=babelHelpers.classPrivateFieldLooseKey("readonly");var gl=babelHelpers.classPrivateFieldLooseKey("useForImages");var wl=babelHelpers.classPrivateFieldLooseKey("updatePlaceholder");var Cl=babelHelpers.classPrivateFieldLooseKey("getPlaceholderText");class Ol extends u.EventEmitter{constructor(e){super(e);Object.defineProperty(this,Cl,{value:El});Object.defineProperty(this,wl,{value:_l});Object.defineProperty(this,yl,{writable:true,value:void 0});Object.defineProperty(this,ml,{writable:true,value:false});Object.defineProperty(this,gl,{writable:true,value:false});this.setEventNamespace("AI.Copilot.InputPlaceholder");babelHelpers.classPrivateFieldLooseBase(this,ml)[ml]=e.readonly===true}render(){babelHelpers.classPrivateFieldLooseBase(this,yl)[yl]=this.getContainer();return babelHelpers.classPrivateFieldLooseBase(this,yl)[yl]}getContainer(){if(!babelHelpers.classPrivateFieldLooseBase(this,yl)[yl]){const e=babelHelpers.classPrivateFieldLooseBase(this,Cl)[Cl]();babelHelpers.classPrivateFieldLooseBase(this,yl)[yl]=L.Tag.render(Bl||(Bl=Fl`
				<div class="ai_copilot_placeholder">
					<span>${0}</span>
				</div>
			`),e)}return babelHelpers.classPrivateFieldLooseBase(this,yl)[yl]}setUseForImages(e){babelHelpers.classPrivateFieldLooseBase(this,gl)[gl]=e;babelHelpers.classPrivateFieldLooseBase(this,wl)[wl]()}}function _l(){babelHelpers.classPrivateFieldLooseBase(this,yl)[yl].querySelector("span").innerText=babelHelpers.classPrivateFieldLooseBase(this,Cl)[Cl]()}function El(){if(babelHelpers.classPrivateFieldLooseBase(this,ml)[ml]){return L.Loc.getMessage("AI_COPILOT_SELECT_COMMAND_BELOW")}if(babelHelpers.classPrivateFieldLooseBase(this,gl)[gl]){return L.Loc.getMessage("AI_COPILOT_IMAGE_INPUT_START_PLACEHOLDER")}return L.Loc.getMessage("AI_COPILOT_INPUT_START_PLACEHOLDER")}let Il=e=>e,xl,jl,Tl;const Kl=Object.freeze({submit:"submit"});var kl=babelHelpers.classPrivateFieldLooseKey("submitBtn");var Ml=babelHelpers.classPrivateFieldLooseKey("container");var Al=babelHelpers.classPrivateFieldLooseKey("renderHotKeyTag");var Sl=babelHelpers.classPrivateFieldLooseKey("renderSubmitBtn");class Rl extends u.EventEmitter{constructor(e){super(e);Object.defineProperty(this,Sl,{value:Dl});Object.defineProperty(this,Al,{value:Nl});Object.defineProperty(this,kl,{writable:true,value:void 0});Object.defineProperty(this,Ml,{writable:true,value:void 0});this.setEventNamespace("AI:Copilot:SubmitBtn")}render(){babelHelpers.classPrivateFieldLooseBase(this,Ml)[Ml]=L.Tag.render(xl||(xl=Il`
			<div
				class="ai__copilot_input-submit-btn-container"
			>
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Al)[Al](),babelHelpers.classPrivateFieldLooseBase(this,Sl)[Sl]());return babelHelpers.classPrivateFieldLooseBase(this,Ml)[Ml]}disable(){L.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Ml)[Ml],"--disabled");babelHelpers.classPrivateFieldLooseBase(this,kl)[kl].disabled=true}enable(){L.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,Ml)[Ml],"--disabled");babelHelpers.classPrivateFieldLooseBase(this,kl)[kl].disabled=false}}function Nl(){const e=new P.Icon({size:20,icon:P.Actions.ARROW_TOP_2});return L.Tag.render(jl||(jl=Il`
			<div class="ai__copilot_input-submit-hotkey">
				<div class="ai__copilot_input-submit-hotkey-icon">
					${0}
				</div>
				<div class="ai__copilot_input-submit-hotkey-text">Enter</div>
			</div>
		`),e.render())}function Dl(){const e=new P.Icon({size:18,icon:P.Actions.ARROW_TOP,color:"#fff"});babelHelpers.classPrivateFieldLooseBase(this,kl)[kl]=L.Tag.render(Tl||(Tl=Il`
			<button class="ai__copilot_input-submit-btn">
				${0}
			</button>
		`),e.render());L.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,kl)[kl],"click",(e=>{this.emit(Kl.submit);e.preventDefault()}));return babelHelpers.classPrivateFieldLooseBase(this,kl)[kl]}let $l=e=>e,Gl,Wl,Ul,Xl,Vl,zl,ql;const Ql=Object.freeze({submit:"submit",cancelLoading:"cancelLoading",focus:"focus",input:"input",goOutFromBottom:"goOutFromBottom",startRecording:"startRecording",stopRecording:"stopRecording",adjustHeight:"adjustHeight",containerClick:"containerClick"});var Yl=babelHelpers.classPrivateFieldLooseKey("textarea");var Jl=babelHelpers.classPrivateFieldLooseKey("container");var Zl=babelHelpers.classPrivateFieldLooseKey("isLoading");var et=babelHelpers.classPrivateFieldLooseKey("placeholder");var st=babelHelpers.classPrivateFieldLooseKey("loaderTextContainer");var at=babelHelpers.classPrivateFieldLooseKey("errorContainer");var lt=babelHelpers.classPrivateFieldLooseKey("inputError");var tt=babelHelpers.classPrivateFieldLooseKey("textareaOldValue");var it=babelHelpers.classPrivateFieldLooseKey("disableEnterAndArrows");var rt=babelHelpers.classPrivateFieldLooseKey("copilotLottieAnimation");var ot=babelHelpers.classPrivateFieldLooseKey("lottieIconContainer");var nt=babelHelpers.classPrivateFieldLooseKey("speechConverter");var bt=babelHelpers.classPrivateFieldLooseKey("submitBtn");var ct=babelHelpers.classPrivateFieldLooseKey("voiceButton");var dt=babelHelpers.classPrivateFieldLooseKey("readonly");var pt=babelHelpers.classPrivateFieldLooseKey("useForImages");var vt=babelHelpers.classPrivateFieldLooseKey("isGoOutFromBottomEnabled");var ut=babelHelpers.classPrivateFieldLooseKey("usedVoiceRecord");var ht=babelHelpers.classPrivateFieldLooseKey("usedTextInput");var Pt=babelHelpers.classPrivateFieldLooseKey("setErrorIcon");var Lt=babelHelpers.classPrivateFieldLooseKey("setInputIcon");var Ht=babelHelpers.classPrivateFieldLooseKey("setIcon");var Ft=babelHelpers.classPrivateFieldLooseKey("getIconContainer");var Bt=babelHelpers.classPrivateFieldLooseKey("renderLoader");var ft=babelHelpers.classPrivateFieldLooseKey("renderErrorContainer");var yt=babelHelpers.classPrivateFieldLooseKey("renderTextArea");var mt=babelHelpers.classPrivateFieldLooseKey("handleKeyDownEvent");var gt=babelHelpers.classPrivateFieldLooseKey("isArrowKey");var wt=babelHelpers.classPrivateFieldLooseKey("handleEnterKeyDownEvent");var Ct=babelHelpers.classPrivateFieldLooseKey("handleArrowKeyDownEvent");var Ot=babelHelpers.classPrivateFieldLooseKey("isCursorInTextareaEnd");var _t=babelHelpers.classPrivateFieldLooseKey("renderPlaceholder");var Et=babelHelpers.classPrivateFieldLooseKey("updateContainerClassname");var It=babelHelpers.classPrivateFieldLooseKey("renderInputIcon");var xt=babelHelpers.classPrivateFieldLooseKey("getLottieIconContainer");var jt=babelHelpers.classPrivateFieldLooseKey("renderErrorIcon");var Tt=babelHelpers.classPrivateFieldLooseKey("renderSubmitButton");var Kt=babelHelpers.classPrivateFieldLooseKey("initVoiceButton");var kt=babelHelpers.classPrivateFieldLooseKey("initDisabledVoiceButton");var Mt=babelHelpers.classPrivateFieldLooseKey("initEnabledVoiceButton");var At=babelHelpers.classPrivateFieldLooseKey("initSubmitButton");var St=babelHelpers.classPrivateFieldLooseKey("initSpeechConverter");var Rt=babelHelpers.classPrivateFieldLooseKey("handleSpeechConverterStartEvent");var Nt=babelHelpers.classPrivateFieldLooseKey("handleSpeechConverterErrorEvent");var Dt=babelHelpers.classPrivateFieldLooseKey("showErrorHintForVoiceButton");var $t=babelHelpers.classPrivateFieldLooseKey("handleSpeechConverterResultEvent");var Gt=babelHelpers.classPrivateFieldLooseKey("handleSpeechConverterStopEvent");var Wt=babelHelpers.classPrivateFieldLooseKey("setTextareaValue");var Ut=babelHelpers.classPrivateFieldLooseKey("adjustTextareaHeight");class Xt extends u.EventEmitter{constructor(e={}){super(e);Object.defineProperty(this,Ut,{value:yi});Object.defineProperty(this,Wt,{value:fi});Object.defineProperty(this,Gt,{value:Bi});Object.defineProperty(this,$t,{value:Fi});Object.defineProperty(this,Dt,{value:Hi});Object.defineProperty(this,Nt,{value:Li});Object.defineProperty(this,Rt,{value:Pi});Object.defineProperty(this,St,{value:hi});Object.defineProperty(this,At,{value:ui});Object.defineProperty(this,Mt,{value:vi});Object.defineProperty(this,kt,{value:pi});Object.defineProperty(this,Kt,{value:di});Object.defineProperty(this,Tt,{value:ci});Object.defineProperty(this,jt,{value:bi});Object.defineProperty(this,xt,{value:ni});Object.defineProperty(this,It,{value:oi});Object.defineProperty(this,Et,{value:ri});Object.defineProperty(this,_t,{value:ii});Object.defineProperty(this,Ot,{value:ti});Object.defineProperty(this,Ct,{value:li});Object.defineProperty(this,wt,{value:ai});Object.defineProperty(this,gt,{value:si});Object.defineProperty(this,mt,{value:ei});Object.defineProperty(this,yt,{value:Zt});Object.defineProperty(this,ft,{value:Jt});Object.defineProperty(this,Bt,{value:Yt});Object.defineProperty(this,Ft,{value:Qt});Object.defineProperty(this,Ht,{value:qt});Object.defineProperty(this,Lt,{value:zt});Object.defineProperty(this,Pt,{value:Vt});Object.defineProperty(this,Yl,{writable:true,value:void 0});Object.defineProperty(this,Jl,{writable:true,value:void 0});Object.defineProperty(this,Zl,{writable:true,value:void 0});Object.defineProperty(this,et,{writable:true,value:void 0});Object.defineProperty(this,st,{writable:true,value:void 0});Object.defineProperty(this,at,{writable:true,value:void 0});Object.defineProperty(this,lt,{writable:true,value:void 0});Object.defineProperty(this,tt,{writable:true,value:""});Object.defineProperty(this,it,{writable:true,value:false});Object.defineProperty(this,rt,{writable:true,value:null});Object.defineProperty(this,ot,{writable:true,value:void 0});Object.defineProperty(this,nt,{writable:true,value:null});Object.defineProperty(this,bt,{writable:true,value:null});Object.defineProperty(this,ct,{writable:true,value:null});Object.defineProperty(this,dt,{writable:true,value:false});Object.defineProperty(this,pt,{writable:true,value:false});Object.defineProperty(this,vt,{writable:true,value:true});Object.defineProperty(this,ut,{writable:true,value:void 0});Object.defineProperty(this,ht,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,dt)[dt]=e.readonly===true;babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]=false;babelHelpers.classPrivateFieldLooseBase(this,at)[at]=null;babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]=null;babelHelpers.classPrivateFieldLooseBase(this,rt)[rt]=null;babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]=null;babelHelpers.classPrivateFieldLooseBase(this,ut)[ut]=false;babelHelpers.classPrivateFieldLooseBase(this,ht)[ht]=false;this.setEventNamespace("AI.Copilot.Input")}render(){babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]=L.Tag.render(Gl||(Gl=$l`
			<div class="ai__copilot_input-field">
				<div ref="icon" class="ai__copilot_input-field-icon">
					${0}
				</div>
				${0}
				<div class="ai__copilot_input-field-content">
					${0}
					${0}
					${0}
				</div>
				${0}
				<div class="ai__copilot_input-field-baas-point"></div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,It)[It](),babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt](),babelHelpers.classPrivateFieldLooseBase(this,yt)[yt](),babelHelpers.classPrivateFieldLooseBase(this,_t)[_t](),babelHelpers.classPrivateFieldLooseBase(this,ft)[ft](),babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt]());L.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl].root,"click",(()=>{this.emit(Ql.containerClick)}));babelHelpers.classPrivateFieldLooseBase(this,Et)[Et]();return babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl].root}usedTextInput(){return babelHelpers.classPrivateFieldLooseBase(this,ht)[ht]}usedVoiceRecord(){return babelHelpers.classPrivateFieldLooseBase(this,ut)[ut]}setValue(e){babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt](e)}getValue(){return babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].value}focus(e){if(babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl]){babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].focus(e);babelHelpers.classPrivateFieldLooseBase(this,it)[it]=false}}getContainer(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl])==null?void 0:e.root}clear(){var e;babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt]("",false);(e=babelHelpers.classPrivateFieldLooseBase(this,ct)[ct])==null?void 0:e.enable()}startGenerating(){babelHelpers.classPrivateFieldLooseBase(this,rt)[rt].play();this.clearErrors();this.enable();babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].disabled=true;babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]=true;babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt]("",false);L.Dom.addClass(this.getContainer(),"--loading");L.Dom.removeClass(this.getContainer(),"--error")}finishGenerating(){babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].disabled=false;babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]=false;babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt](babelHelpers.classPrivateFieldLooseBase(this,tt)[tt],false);L.Dom.removeClass(this.getContainer(),"--loading");setTimeout((()=>{babelHelpers.classPrivateFieldLooseBase(this,rt)[rt].stop()}),550)}stopRecording(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,nt)[nt])==null?void 0:e.stop()}setErrors(e){L.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,at)[at]);if(babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]){babelHelpers.classPrivateFieldLooseBase(this,lt)[lt].setErrors(e)}else{babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]=new Pl({errors:e})}babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]();L.Dom.addClass(this.getContainer(),"--error");const s=babelHelpers.classPrivateFieldLooseBase(this,lt)[lt].render();L.Dom.append(s,babelHelpers.classPrivateFieldLooseBase(this,at)[at]);babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].disabled=true;requestAnimationFrame((()=>{babelHelpers.classPrivateFieldLooseBase(this,Ut)[Ut]()}))}clearErrors(){if(babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]&&babelHelpers.classPrivateFieldLooseBase(this,lt)[lt].getErrors().length>0){babelHelpers.classPrivateFieldLooseBase(this,lt)[lt].setErrors([]);L.Dom.removeClass(this.getContainer(),"--error");babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].disabled=false;babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]()}babelHelpers.classPrivateFieldLooseBase(this,Ut)[Ut]()}enableEnterAndArrows(){babelHelpers.classPrivateFieldLooseBase(this,it)[it]=false}disableEnterAndArrows(){babelHelpers.classPrivateFieldLooseBase(this,it)[it]=true}disable(){L.Dom.addClass(this.getContainer(),"--disabled");babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].disabled=true;L.Dom.style(this.getContainer(),"opacity",.7);this.disableEnterAndArrows()}enable(){L.Dom.removeClass(this.getContainer(),"--disabled");babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].disabled=false;L.Dom.style(this.getContainer(),"opacity",1);this.enableEnterAndArrows()}isDisabled(){return babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].disabled}setUseForImages(e){babelHelpers.classPrivateFieldLooseBase(this,pt)[pt]=e;babelHelpers.classPrivateFieldLooseBase(this,et)[et].setUseForImages(e);if(e){babelHelpers.classPrivateFieldLooseBase(this,vt)[vt]=false;babelHelpers.classPrivateFieldLooseBase(this,st)[st].innerText=L.Loc.getMessage("AI_COPILOT_INPUT_IMAGE_LOADER_TEXT")}else{babelHelpers.classPrivateFieldLooseBase(this,vt)[vt]=true;babelHelpers.classPrivateFieldLooseBase(this,st)[st].innerText=L.Loc.getMessage("AI_COPILOT_INPUT_LOADER_TEXT")}}setHtmlContent(e){let s=L.Text.encode(e);s=s.replaceAll("[","<strong>[");s=s.replaceAll("]","]</strong>");s=s.replaceAll("\n","<br />");babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].setHtmlContent(s)}}function Vt(){babelHelpers.classPrivateFieldLooseBase(this,Ht)[Ht](babelHelpers.classPrivateFieldLooseBase(this,jt)[jt]())}function zt(){babelHelpers.classPrivateFieldLooseBase(this,Ht)[Ht](babelHelpers.classPrivateFieldLooseBase(this,It)[It]())}function qt(e){if(e.className===babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft]().firstElementChild.className){return}L.Event.bindOnce(babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft](),"transitionend",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft]().innerHTML="";L.Dom.append(e,babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft]());L.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft](),"opacity",1)}));L.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft](),"opacity",0)}function Qt(){return babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl].icon}function Yt(){const e=L.Tag.render(Wl||(Wl=$l`
			<button class="ai__copilot_loader-cancel-btn">
				${0}
			</button>
		`),L.Loc.getMessage("AI_COPILOT_INPUT_LOADER_CANCEL"));L.Event.bind(e,"click",(()=>{this.emit(Ql.cancelLoading)}));const s=L.Tag.render(Ul||(Ul=$l`
			<div class="ai__copilot_loader">
				<div class="ai__copilot_loader-left">
					<div ref="loaderText" class="ai__copilot_loader-text">${0}</div>
					<div class="ai__copilot_loader-dot dot-flashing"></div>
				</div>
				${0}
			</div>
		`),L.Loc.getMessage("AI_COPILOT_INPUT_LOADER_TEXT"),e);babelHelpers.classPrivateFieldLooseBase(this,st)[st]=s.loaderText;return s.root}function Jt(){babelHelpers.classPrivateFieldLooseBase(this,at)[at]=L.Tag.render(Xl||(Xl=$l`
			<div class="ai__copilot_input-field-error-container"></div>
		`));return babelHelpers.classPrivateFieldLooseBase(this,at)[at]}function Zt(){babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl]=new fa({});babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].subscribe("focus",(()=>{this.emit(Ql.focus)}));babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].subscribe("input",(e=>{const s=e.getData();babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt](s);if(babelHelpers.classPrivateFieldLooseBase(this,nt)[nt]&&babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].isRecording()===false){babelHelpers.classPrivateFieldLooseBase(this,ht)[ht]=true;if(s){babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].disable()}else{babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].enable()}}}));const e=babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].render();L.Event.bind(e,"keydown",babelHelpers.classPrivateFieldLooseBase(this,mt)[mt].bind(this));const s=new MutationObserver((s=>{s.forEach((s=>{if(s.type==="attributes"&&s.attributeName==="disabled"){if(babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].disabled===true){L.Dom.style(e,"z-index",-1)}else{L.Dom.style(e,"z-index",1)}}}))}));s.observe(e,{attributes:true});return e}function ei(e){if((e.key==="Enter"||babelHelpers.classPrivateFieldLooseBase(this,gt)[gt](e.key))&&babelHelpers.classPrivateFieldLooseBase(this,it)[it]){e.preventDefault();return false}if(e.key==="Enter"){return babelHelpers.classPrivateFieldLooseBase(this,wt)[wt](e)}if(babelHelpers.classPrivateFieldLooseBase(this,gt)[gt](e.key)){return babelHelpers.classPrivateFieldLooseBase(this,Ct)[Ct](e)}babelHelpers.classPrivateFieldLooseBase(this,it)[it]=false;return true}function si(e){return e==="ArrowDown"||e==="ArrowUp"||e==="ArrowLeft"||e==="ArrowRight"}function ai(e){if(e.key==="Enter"&&!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.repeat&&!babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]&&!babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].disabled){this.emit(Ql.submit);e.preventDefault();return false}return true}function li(e){if(e.key==="ArrowDown"&&babelHelpers.classPrivateFieldLooseBase(this,Ot)[Ot]()&&babelHelpers.classPrivateFieldLooseBase(this,vt)[vt]){babelHelpers.classPrivateFieldLooseBase(this,it)[it]=true;this.emit(Ql.goOutFromBottom);return false}return true}function ti(){return babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].isCursorInTheEnd()}function ii(){babelHelpers.classPrivateFieldLooseBase(this,et)[et]=new Ol({readonly:babelHelpers.classPrivateFieldLooseBase(this,dt)[dt],useForImages:babelHelpers.classPrivateFieldLooseBase(this,pt)[pt]});L.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,et)[et].getContainer(),"click",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,dt)[dt]===false){babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].focus()}}));return babelHelpers.classPrivateFieldLooseBase(this,et)[et].render()}function ri(){if(babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].value.length===0){L.Dom.addClass(this.getContainer(),"--show-placeholder")}else{L.Dom.removeClass(this.getContainer(),"--show-placeholder")}}function oi(){return L.Tag.render(Vl||(Vl=$l`
			<div class="" style="width: 24px; height: 24px; position: relative;">
				<div class="ai__copilot_static-icon-wrapper">
					<div class="ai__copilot_static-icon"></div>
				</div>
				<div class="ai__copilot_loading-icon-wrapper">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,xt)[xt]())}function ni(){if(!babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]){const e=21;babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]=L.Tag.render(zl||(zl=$l`
				<div class="" style="width: ${0}px; height: ${0}px;"></div>
			`),e,e);babelHelpers.classPrivateFieldLooseBase(this,rt)[rt]=d.Lottie.loadAnimation({container:babelHelpers.classPrivateFieldLooseBase(this,ot)[ot],renderer:"svg",animationData:Ma,autoplay:false})}return babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]}function bi(){const e=new P.Icon({icon:P.Main.WARNING,size:24});return e.render()}function ci(){if(babelHelpers.classPrivateFieldLooseBase(this,dt)[dt]){return null}babelHelpers.classPrivateFieldLooseBase(this,Kt)[Kt]();babelHelpers.classPrivateFieldLooseBase(this,At)[At]();return L.Tag.render(ql||(ql=$l`
			<div class="ai__copilot_input-submit-block">
				${0}
				<div class="ai__copilot_input-submit-block-voice-btn">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,bt)[bt].render(),babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].render())}function di(){babelHelpers.classPrivateFieldLooseBase(this,ct)[ct]=new Ja;if(r.SpeechConverter.isBrowserSupport()===false){babelHelpers.classPrivateFieldLooseBase(this,kt)[kt]()}else{babelHelpers.classPrivateFieldLooseBase(this,Mt)[Mt]()}}function pi(){babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].disable();pa.addHintOnTargetHover({target:babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].getContainer(),text:L.Loc.getMessage("AI_COPILOT_VOICE_INPUT_NOT_SUPPORT")})}function vi(){babelHelpers.classPrivateFieldLooseBase(this,St)[St]();L.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].getContainer(),"click",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].isDisabled()||babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].isRecording()){return}babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].start()}));babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].subscribe("stop",(()=>{babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].stop();if(babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].value){babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].disable()}babelHelpers.classPrivateFieldLooseBase(this,ut)[ut]=true}))}function ui(){babelHelpers.classPrivateFieldLooseBase(this,bt)[bt]=new Rl;babelHelpers.classPrivateFieldLooseBase(this,bt)[bt].subscribe(Kl.submit,(()=>{this.emit(Ql.submit)}))}function hi(){if(r.SpeechConverter.isBrowserSupport()===false){return}babelHelpers.classPrivateFieldLooseBase(this,nt)[nt]=new r.SpeechConverter;babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].subscribe(r.speechConverterEvents.start,babelHelpers.classPrivateFieldLooseBase(this,Rt)[Rt].bind(this));babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].subscribe(r.speechConverterEvents.error,babelHelpers.classPrivateFieldLooseBase(this,Nt)[Nt].bind(this));babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].subscribe(r.speechConverterEvents.result,babelHelpers.classPrivateFieldLooseBase(this,$t)[$t].bind(this));babelHelpers.classPrivateFieldLooseBase(this,nt)[nt].subscribe(r.speechConverterEvents.stop,babelHelpers.classPrivateFieldLooseBase(this,Gt)[Gt].bind(this))}function Pi(){babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].start();babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].disabled=true;babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].addClass("--recording");this.emit(Ql.startRecording);babelHelpers.classPrivateFieldLooseBase(this,bt)[bt].disable()}function Li(e){const{error:s}=e.getData();if(s==="aborted"){return}if(s==="not-allowed"){babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt](L.Loc.getMessage("AI_COPILOT_VOICE_INPUT_MICRO_NOT_ALLOWED"))}else{babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt](L.Loc.getMessage("AI_COPILOT_VOICE_INPUT_UNKNOWN_ERROR"))}}function Hi(e){const s=new pa({text:e,target:babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].getContainer()});s.show();setTimeout((()=>{s.hide()}),1500)}function Fi(e){this.setValue(e.getData().text);babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].value=e.getData().text}function Bi(){babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].removeClass("--recording");babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].disabled=false;babelHelpers.classPrivateFieldLooseBase(this,ct)[ct].stop();babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].focus();this.emit(Ql.stopRecording);babelHelpers.classPrivateFieldLooseBase(this,bt)[bt].enable()}function fi(e,s=true){babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]=babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].value;babelHelpers.classPrivateFieldLooseBase(this,Ut)[Ut]();babelHelpers.classPrivateFieldLooseBase(this,Et)[Et]();if(s){this.emit(Ql.input,new u.BaseEvent({data:e}))}}function yi(){babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].setStyle("height","auto");const e=parseInt(babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].getComputedStyle().getPropertyValue("padding-bottom"),10);const s=L.Dom.getPosition(babelHelpers.classPrivateFieldLooseBase(this,at)[at]).height;const a=babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].scrollHeight;const l=a-e>40;if(l){babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].addClass("--with-padding-bottom")}else{babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].removeClass("--with-padding-bottom")}if(babelHelpers.classPrivateFieldLooseBase(this,Zl)[Zl]){const e=L.Dom.getPosition(babelHelpers.classPrivateFieldLooseBase(this,st)[st]).height;babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].setStyle("height",`${e}px`)}else{const e=babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]&&babelHelpers.classPrivateFieldLooseBase(this,lt)[lt].getErrors().length>0?s:babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].scrollHeight;babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl].setStyle("height",`${e}px`)}this.emit(Ql.adjustHeight)}let mi=e=>e,gi,wi;var Ci=babelHelpers.classPrivateFieldLooseKey("container");var Oi=babelHelpers.classPrivateFieldLooseKey("renderReadMoreLink");class _i{constructor(){Object.defineProperty(this,Oi,{value:Ei});Object.defineProperty(this,Ci,{writable:true,value:null})}render(e=false){const s=new P.Icon({color:getComputedStyle(document.body).getPropertyValue("--ui-color-base-40"),size:22,icon:P.Main.WARNING});babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci]=L.Tag.render(gi||(gi=mi`
			<div class="ai__copilot_waning-field ${0}">
				<span class="ai__copilot_waning-field-icon">
					${0}
				</span>
				<span class="ai__copilot_waning-field-text">
					${0}
				</span>
				${0}
			</div>
		`),e?"--expanded":"",s.render(),L.Loc.getMessage("AI_COPILOT_RESULT_WARNING"),babelHelpers.classPrivateFieldLooseBase(this,Oi)[Oi]());return babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci]}getInfoSliderContainer(){var e;return(e=top.BX.Helper.getSlider())==null?void 0:e.getContainer()}expand(){L.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci],"--expanded")}collapse(){L.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,Ci)[Ci],"--expanded")}}function Ei(){const e=L.Tag.render(wi||(wi=mi`
			<span class="ai__copilot_waning-field-link">
				${0}
			</span>
		`),L.Loc.getMessage("AI_COPILOT_RESULT_WARNING_MORE"));L.Event.bind(e,"click",(()=>{const e=20412666;if(top.BX&&top.BX.Helper){top.BX.Helper.show(`redirect=detail&code=${e}`)}}));return e}let Ii=e=>e,xi;const ji=Object.freeze({TEXT:"text",IMAGE:"image",TEXT_AND_IMAGE:"text-and-image"});const Ti={START_INIT:"start-init",FINISH_INIT:"finish-init",FAILED_INIT:"failed-init",HIDE:"hide",IMAGE_SAVE:"save-image",TEXT_SAVE:"save",IMAGE_PLACE_ABOVE:"place-image-above",IMAGE_PLACE_UNDER:"place-image-under",IMAGE_CANCEL:"cancel-image",TEXT_CANCEL:"cancel",IMAGE_COMPLETION_RESULT:"image-completion-result",TEXT_COMPLETION_RESULT:"text-completion-result",TEXT_PLACE_BELOW:"add_below"};const Ki=new L.Cache.MemoryCache;async function ki(e){return Ki.remember(e,(()=>L.Runtime.loadExtension(e)))}var Mi=babelHelpers.classPrivateFieldLooseKey("copilotPopup");var Ai=babelHelpers.classPrivateFieldLooseKey("inputField");var Si=babelHelpers.classPrivateFieldLooseKey("resultField");var Ri=babelHelpers.classPrivateFieldLooseKey("engine");var Ni=babelHelpers.classPrivateFieldLooseKey("preventAutoHide");var Di=babelHelpers.classPrivateFieldLooseKey("autoHide");var $i=babelHelpers.classPrivateFieldLooseKey("container");var Gi=babelHelpers.classPrivateFieldLooseKey("warningField");var Wi=babelHelpers.classPrivateFieldLooseKey("copilotBanner");var Ui=babelHelpers.classPrivateFieldLooseKey("copilotAgreementWasApplied");var Xi=babelHelpers.classPrivateFieldLooseKey("copilotImageController");var Vi=babelHelpers.classPrivateFieldLooseKey("copilotTextController");var zi=babelHelpers.classPrivateFieldLooseKey("readonly");var qi=babelHelpers.classPrivateFieldLooseKey("category");var Qi=babelHelpers.classPrivateFieldLooseKey("selectedText");var Yi=babelHelpers.classPrivateFieldLooseKey("context");var Ji=babelHelpers.classPrivateFieldLooseKey("analytics");var Zi=babelHelpers.classPrivateFieldLooseKey("useText");var er=babelHelpers.classPrivateFieldLooseKey("useImage");var sr=babelHelpers.classPrivateFieldLooseKey("staticEulaRestrictCallback");var ar=babelHelpers.classPrivateFieldLooseKey("getBaasPopup");var lr=babelHelpers.classPrivateFieldLooseKey("initCopilotPopup");var tr=babelHelpers.classPrivateFieldLooseKey("showCopilotAfterCopilotBanner");var ir=babelHelpers.classPrivateFieldLooseKey("initEngine");var rr=babelHelpers.classPrivateFieldLooseKey("initCopilotImageController");var or=babelHelpers.classPrivateFieldLooseKey("initCopilotTextController");var nr=babelHelpers.classPrivateFieldLooseKey("initCopilotTextControllerMenu");var br=babelHelpers.classPrivateFieldLooseKey("getOpenMenu");var cr=babelHelpers.classPrivateFieldLooseKey("mouseDownHandler");var dr=babelHelpers.classPrivateFieldLooseKey("autoHideHandler");var pr=babelHelpers.classPrivateFieldLooseKey("hideMenus");var vr=babelHelpers.classPrivateFieldLooseKey("adjustMenus");var ur=babelHelpers.classPrivateFieldLooseKey("getAnalytics");var hr=babelHelpers.classPrivateFieldLooseKey("initAnalyticForText");var Pr=babelHelpers.classPrivateFieldLooseKey("initAnalyticForReadOnly");var Lr=babelHelpers.classPrivateFieldLooseKey("showCopilotAfterApplyAgreement");class Hr extends u.EventEmitter{static async checkEulaRestrict(){var e;const s=await ki("bitrix24.license.feature");if(!(s!=null&&s.Feature)){return false}const a=L.Type.isFunction((e=babelHelpers.classPrivateFieldLooseBase(Hr,sr)[sr])==null?void 0:e.then);const l=babelHelpers.classPrivateFieldLooseBase(Hr,sr)[sr]===null;if(l||a){try{if(l){babelHelpers.classPrivateFieldLooseBase(Hr,sr)[sr]=s.Feature.checkEulaRestrictions("ai_available_by_version")}await babelHelpers.classPrivateFieldLooseBase(Hr,sr)[sr];babelHelpers.classPrivateFieldLooseBase(Hr,sr)[sr]=false;return false}catch(e){if(e.callback){babelHelpers.classPrivateFieldLooseBase(Hr,sr)[sr]=e.callback;return true}console.error(e);return false}}return L.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(Hr,sr)[sr])}constructor(e){var s;super(e);Object.defineProperty(this,Lr,{value:Kr});Object.defineProperty(this,Pr,{value:Tr});Object.defineProperty(this,hr,{value:jr});Object.defineProperty(this,ur,{value:xr});Object.defineProperty(this,vr,{value:Ir});Object.defineProperty(this,pr,{value:Er});Object.defineProperty(this,dr,{value:_r});Object.defineProperty(this,cr,{value:Or});Object.defineProperty(this,br,{value:Cr});Object.defineProperty(this,nr,{value:wr});Object.defineProperty(this,or,{value:gr});Object.defineProperty(this,rr,{value:mr});Object.defineProperty(this,ir,{value:yr});Object.defineProperty(this,tr,{value:fr});Object.defineProperty(this,lr,{value:Br});Object.defineProperty(this,ar,{value:Fr});Object.defineProperty(this,Mi,{writable:true,value:void 0});Object.defineProperty(this,Ai,{writable:true,value:void 0});Object.defineProperty(this,Si,{writable:true,value:void 0});Object.defineProperty(this,Ri,{writable:true,value:void 0});Object.defineProperty(this,Ni,{writable:true,value:void 0});Object.defineProperty(this,Di,{writable:true,value:void 0});Object.defineProperty(this,$i,{writable:true,value:null});Object.defineProperty(this,Gi,{writable:true,value:null});Object.defineProperty(this,Wi,{writable:true,value:void 0});Object.defineProperty(this,Ui,{writable:true,value:void 0});Object.defineProperty(this,Xi,{writable:true,value:void 0});Object.defineProperty(this,Vi,{writable:true,value:void 0});Object.defineProperty(this,zi,{writable:true,value:void 0});Object.defineProperty(this,qi,{writable:true,value:void 0});Object.defineProperty(this,Qi,{writable:true,value:void 0});Object.defineProperty(this,Yi,{writable:true,value:void 0});Object.defineProperty(this,Ji,{writable:true,value:void 0});Object.defineProperty(this,Zi,{writable:true,value:void 0});Object.defineProperty(this,er,{writable:true,value:void 0});this.setEventNamespace("AI.Copilot");babelHelpers.classPrivateFieldLooseBase(this,qi)[qi]=e.category;babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi]=e.selectedText;babelHelpers.classPrivateFieldLooseBase(this,zi)[zi]=e.readonly===true;babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi]=e.context;babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]=L.Type.isBoolean(e.useText)?e.useText:true;babelHelpers.classPrivateFieldLooseBase(this,er)[er]=e.useImage===true;babelHelpers.classPrivateFieldLooseBase(this,ir)[ir]({category:e.category,contextId:e.contextId,moduleId:e.moduleId,contextParameters:e.contextParameters});babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai]=new Xt({readonly:e.readonly===true});babelHelpers.classPrivateFieldLooseBase(this,Si)[Si]=new ra;babelHelpers.classPrivateFieldLooseBase(this,Gi)[Gi]=new _i;babelHelpers.classPrivateFieldLooseBase(this,Di)[Di]=(s=e.autoHide)!=null?s:false;babelHelpers.classPrivateFieldLooseBase(this,Ni)[Ni]=L.Type.isFunction(e.preventAutoHide)?e.preventAutoHide:()=>false}render(){babelHelpers.classPrivateFieldLooseBase(this,$i)[$i]=L.Tag.render(xi||(xi=Ii`
			<div class="ai__copilot ai__copilot-scope">
				${0}
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Si)[Si].render(),babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai].render(),babelHelpers.classPrivateFieldLooseBase(this,Gi)[Gi].render());return babelHelpers.classPrivateFieldLooseBase(this,$i)[$i]}async init(){this.emit(Ti.START_INIT);try{if(L.Extension.getSettings("ai.copilot").isRestrictByEula){await Hr.checkEulaRestrict()}if(babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]){await babelHelpers.classPrivateFieldLooseBase(this,or)[or]({readonly:babelHelpers.classPrivateFieldLooseBase(this,zi)[zi],category:babelHelpers.classPrivateFieldLooseBase(this,qi)[qi],selectedText:babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi],context:babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi],addImageMenuItem:babelHelpers.classPrivateFieldLooseBase(this,er)[er]});await babelHelpers.classPrivateFieldLooseBase(this,nr)[nr]();if(babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].isFirstLaunch()){const{AppsInstallerBanner:e}=await L.Runtime.loadExtension("ai.copilot-banner");babelHelpers.classPrivateFieldLooseBase(this,Wi)[Wi]=new e({})}}else{await babelHelpers.classPrivateFieldLooseBase(this,rr)[rr]()}this.emit(Ti.FINISH_INIT)}catch(e){console.error(e);this.emit(Ti.FAILED_INIT)}}show(e){var s;if(this.isInitFinished()===false){console.error("AI.Copilot: The copilot cannot be opened until initialization is complete.");return}if(babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi]&&babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].isPromptsLoaded()===false){console.error("AI.Copilot: Prompts were not loaded!");return}if(babelHelpers.classPrivateFieldLooseBase(this,Wi)[Wi]){babelHelpers.classPrivateFieldLooseBase(this,tr)[tr](e);return}if(L.Extension.getSettings("ai.copilot").get("isShowAgreementPopup")&&!babelHelpers.classPrivateFieldLooseBase(this,Ui)[Ui]){babelHelpers.classPrivateFieldLooseBase(this,Lr)[Lr](e);return}if(L.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(Hr,sr)[sr])){babelHelpers.classPrivateFieldLooseBase(Hr,sr)[sr]();babelHelpers.classPrivateFieldLooseBase(this,ur)[ur](true).sendEventOpen("error_agreement");return}if(!babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi]){L.Event.bind(document,"mousedown",babelHelpers.classPrivateFieldLooseBase(this,cr)[cr].bind(this))}(s=babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi])==null?void 0:s.destroy();babelHelpers.classPrivateFieldLooseBase(this,lr)[lr]({width:e.width,bindElement:e.bindElement});babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi].show();if(babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]){var a,l;(a=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi])==null?void 0:a.setCopilotContainer(babelHelpers.classPrivateFieldLooseBase(this,$i)[$i]);(l=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi])==null?void 0:l.start();babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai].setUseForImages(false)}else{babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi].setCopilotContainer(babelHelpers.classPrivateFieldLooseBase(this,$i)[$i]);babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi].start();babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai].setUseForImages(true)}babelHelpers.classPrivateFieldLooseBase(this,ur)[ur](true).sendEventOpen("success");babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai].focus();babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]()}hide(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi])==null?void 0:e.close()}isShown(){var e,s;return(e=(s=babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi])==null?void 0:s.isShown())!=null?e:false}isInitFinished(){if(babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]){var e;return Boolean((e=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi])==null?void 0:e.isInitFinished())}return true}adjustWidth(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi])==null?void 0:s.setWidth(e)}adjust(e){var s;if(!babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi]||(s=babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi])!=null&&s.isDestroyed()){return}if(e.hide){var a,l,t;(a=babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi])==null?void 0:a.setMaxWidth(0);(l=babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi])==null?void 0:l.setMinWidth(0);babelHelpers.classPrivateFieldLooseBase(this,pr)[pr]();this.adjustPosition(e.position);(t=babelHelpers.classPrivateFieldLooseBase(this,ar)[ar]())==null?void 0:t.close()}else{var i,r,o,n,b;(i=babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi])==null?void 0:i.setMaxWidth(null);(r=babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi])==null?void 0:r.setMinWidth(null);this.adjustPosition(e.position);babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]();(o=babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi])==null?void 0:o.showMenu();(n=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi])==null?void 0:n.showMenu();(b=babelHelpers.classPrivateFieldLooseBase(this,ar)[ar]())==null?void 0:b.adjustPosition()}}adjustPosition(e){var s;if(!babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi]){return}if(e){babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi].setBindElement(e)}babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi].adjustPosition({forceBindPosition:true});(s=babelHelpers.classPrivateFieldLooseBase(this,ar)[ar]())==null?void 0:s.adjustPosition({forceBindPosition:true,forceTop:true});babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]()}setSelectedText(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi])==null?void 0:s.setSelectedText(e)}setContext(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi])==null?void 0:s.setContext(e)}setContextParameters(e){babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri].setContextParameters(e)}getPosition(){var e;return{inputField:L.Dom.getPosition(babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi].getPopupContainer()),menu:L.Dom.getPosition((e=babelHelpers.classPrivateFieldLooseBase(this,br)[br]())==null?void 0:e.getPopupContainer())}}}function Fr(){return h.PopupManager.getPopups().find((e=>e.getId().includes("baas")))}function Br(e){babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi]=new h.Popup({className:"ai__copilot_input-popup",bindElement:e.bindElement,content:this.render(),padding:0,width:e.width,contentNoPaddings:true,borderRadius:"0px",autoHide:babelHelpers.classPrivateFieldLooseBase(this,Di)[Di],closeByEsc:true,cacheable:false,autoHideHandler:e=>babelHelpers.classPrivateFieldLooseBase(this,dr)[dr](e),events:{onPopupClose:()=>{var e,s,a;L.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,$i)[$i],"--error");(e=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi])==null?void 0:e.finish();(s=babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi])==null?void 0:s.finish();babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai].stopRecording();(a=babelHelpers.classPrivateFieldLooseBase(this,ar)[ar]())==null?void 0:a.close();this.emit(Ti.HIDE)}}})}function fr(e){babelHelpers.classPrivateFieldLooseBase(this,Wi)[Wi].show();babelHelpers.classPrivateFieldLooseBase(this,Wi)[Wi].subscribe("action-finish-success",(()=>{Hr.showBanner=false;babelHelpers.classPrivateFieldLooseBase(this,Wi)[Wi]=null;babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri].setBannerLaunched();setTimeout((()=>{this.show(e)}),300)}))}function yr(e){babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri]=new s.Engine;babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri].setModuleId(e.moduleId).setContextId(e.contextId).setContextParameters(e.contextParameters).setParameters({promptCategory:e.category})}async function mr(){const{CopilotImageController:e}=await ki("ai.copilot.copilot-image-controller");babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi]=new e({inputField:babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai],engine:babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri],copilotContainer:babelHelpers.classPrivateFieldLooseBase(this,$i)[$i],copilotInputEvents:Ql,copilotMenu:Ts,popupWithoutBackBtn:babelHelpers.classPrivateFieldLooseBase(this,er)[er]&&babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]===false,useInsertAboveAndUnderMenuItems:babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi],analytics:babelHelpers.classPrivateFieldLooseBase(this,ur)[ur](true)});babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi].subscribe("back",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi].finish();babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].start();babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai].setUseForImages(false)}));babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi].subscribe("close",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi].finish();this.hide()}));babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi].subscribe("save",(e=>{this.emit(Ti.IMAGE_SAVE,new u.BaseEvent({data:{imageUrl:e.getData().imageUrl}}))}));babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi].subscribe("place-above",(()=>{this.emit(Ti.IMAGE_PLACE_ABOVE)}));babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi].subscribe("place-under",(()=>{this.emit(Ti.IMAGE_PLACE_UNDER)}));babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi].subscribe("cancel",(()=>{this.emit(Ti.IMAGE_CANCEL)}));babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi].subscribe("completion-result",(e=>{this.emit(Ti.IMAGE_COMPLETION_RESULT,new u.BaseEvent({data:{imageUrl:e.getData().imageUrl}}))}))}async function gr(e){const{CopilotTextController:s}=await L.Runtime.loadExtension("ai.copilot.copilot-text-controller");babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi]=new s({engine:babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri],inputField:babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai],readonly:e.readonly,category:e.category,selectedText:e.selectedText,context:e.context,addImageMenuItem:e.addImageMenuItem,warningField:babelHelpers.classPrivateFieldLooseBase(this,Gi)[Gi],resultField:babelHelpers.classPrivateFieldLooseBase(this,Si)[Si],copilotInputEvents:Ql,copilotMenu:Ts,copilotMenuEvents:es,analytics:babelHelpers.classPrivateFieldLooseBase(this,ur)[ur]()});babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].subscribe("aiResult",(e=>{this.emit("aiResult",{result:e.getData().result});this.emit(Ti.TEXT_COMPLETION_RESULT,{result:e.getData().result})}));babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].subscribe("close",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].finish();this.hide()}));babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].subscribe("save",(e=>{this.emit(Ti.TEXT_SAVE,{...e.getData()})}));babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].subscribe("add_below",(e=>{this.emit(Ti.TEXT_PLACE_BELOW,{...e.getData()})}));babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].subscribe("show-image-configurator",(async()=>{await babelHelpers.classPrivateFieldLooseBase(this,rr)[rr]();babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].finish();babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai].setUseForImages(true);babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi].start();babelHelpers.classPrivateFieldLooseBase(this,Ai)[Ai].focus()}));babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].subscribe("cancel",(()=>{this.emit(Ti.TEXT_CANCEL)}))}async function wr(){await babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].init()}function Cr(){var e,s,a;return((e=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi])==null?void 0:(s=e.getOpenMenu())==null?void 0:s.getPopup())||((a=babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi])==null?void 0:a.getOpenMenuPopup())}function Or(e){var s;this.wasMouseDownOnSelf=(s=babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi].getPopupContainer())==null?void 0:s.contains(e.target)}function _r(e){var s,a,l,t;const i=e.target;const r=babelHelpers.classPrivateFieldLooseBase(this,Mi)[Mi].getPopupContainer().contains(i);const o=(s=babelHelpers.classPrivateFieldLooseBase(this,Gi)[Gi].getInfoSliderContainer())==null?void 0:s.contains(i);const n=babelHelpers.classPrivateFieldLooseBase(this,Ni)[Ni](e);const b=Boolean(e.target.closest(".side-panel"));const c=Boolean(e.target.closest(".ai_roles-dialog_popup"));const d=Boolean((a=babelHelpers.classPrivateFieldLooseBase(this,ar)[ar]())==null?void 0:a.getPopupContainer().contains(i));const p=!r&&!((l=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi])!=null&&l.isContainsElem(i))&&!((t=babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi])!=null&&t.isContainsTarget(i))&&!n&&!this.wasMouseDownOnSelf&&!o&&!b&&!c&&!d;if(p){this.hide()}this.wasMouseDownOnSelf=false;return false}function Er(){var e,s;(e=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi])==null?void 0:e.hideAllMenus();(s=babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi])==null?void 0:s.hideAllMenus()}function Ir(){var e,s;(e=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi])==null?void 0:e.adjustMenusPosition();(s=babelHelpers.classPrivateFieldLooseBase(this,Xi)[Xi])==null?void 0:s.adjustMenusPosition()}function xr(e=false){if(!babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji]||e){babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji]=new N;babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji].setContextSection(babelHelpers.classPrivateFieldLooseBase(this,qi)[qi]);if(babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]){if(babelHelpers.classPrivateFieldLooseBase(this,zi)[zi]){babelHelpers.classPrivateFieldLooseBase(this,Pr)[Pr]()}else{babelHelpers.classPrivateFieldLooseBase(this,hr)[hr]()}}else if(babelHelpers.classPrivateFieldLooseBase(this,er)[er]){babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji].setCategoryImage()}}return babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji]}function jr(){var e,s;babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji].setCategoryText();if(!babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi]){return}if(!((e=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].getSelectedText())!=null&&e.trim())&&!((s=babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].getContext())!=null&&s.trim())){babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji].setTypeTextNew()}else if(babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].getSelectedText()){babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji].setTypeTextEdit()}else{babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji].setTypeTextReply()}if(babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].getSelectedText()){babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji].setContextElementPopupButton()}else{babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji].setContextElementSpaceButton()}}function Tr(){babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji].setCategoryReadonly();if(!babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi]){return}if(babelHelpers.classPrivateFieldLooseBase(this,Vi)[Vi].getSelectedText()){babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji].setContextElementReadonlyQuote()}else{babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji].setContextElementReadonlyCommon()}}async function Kr(e){babelHelpers.classPrivateFieldLooseBase(this,Ui)[Ui]=await F({moduleId:babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri].getModuleId(),contextId:babelHelpers.classPrivateFieldLooseBase(this,Ri)[Ri].getContextId(),events:{onAccept:()=>{babelHelpers.classPrivateFieldLooseBase(this,Ui)[Ui]=true;this.show(e)},onCancel:()=>{babelHelpers.classPrivateFieldLooseBase(this,Ui)[Ui]=false;babelHelpers.classPrivateFieldLooseBase(this,Ui)[Ui]=undefined}}});if(babelHelpers.classPrivateFieldLooseBase(this,Ui)[Ui]){this.show(e)}}Object.defineProperty(Hr,sr,{writable:true,value:null});Hr.showBanner=null;class kr{constructor(e){this.copilotTextController=e==null?void 0:e.copilotTextController}}var Mr=babelHelpers.classPrivateFieldLooseKey("copilotContainer");var Ar=babelHelpers.classPrivateFieldLooseKey("inputField");var Sr=babelHelpers.classPrivateFieldLooseKey("inputField");var Rr=babelHelpers.classPrivateFieldLooseKey("copilotContainer");var Nr=babelHelpers.classPrivateFieldLooseKey("commandCode");var Dr=babelHelpers.classPrivateFieldLooseKey("commandCode");var $r=babelHelpers.classPrivateFieldLooseKey("prompts");var Gr=babelHelpers.classPrivateFieldLooseKey("category");var Wr=babelHelpers.classPrivateFieldLooseKey("isBeforeGeneration");var Ur=babelHelpers.classPrivateFieldLooseKey("openFeedbackForm");class Xr extends kr{constructor(e){super(e);Object.defineProperty(this,Ur,{value:Vr});Object.defineProperty(this,Gr,{writable:true,value:void 0});Object.defineProperty(this,Wr,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Gr)[Gr]=e.category;babelHelpers.classPrivateFieldLooseBase(this,Wr)[Wr]=e.isBeforeGeneration}async execute(){await babelHelpers.classPrivateFieldLooseBase(this,Ur)[Ur]()}}async function Vr(){var e,s,a,l,t;const i=`${babelHelpers.classPrivateFieldLooseBase(this,Gr)[Gr]},${babelHelpers.classPrivateFieldLooseBase(this,Wr)[Wr]?"before":"after"}`;let r=null;if(babelHelpers.classPrivateFieldLooseBase(this,Wr)[Wr]===false){r=await this.copilotTextController.getDataForFeedbackForm()}const o=((e=r)==null?void 0:(s=e.context_messages)==null?void 0:s.length)>0?JSON.stringify((a=r)==null?void 0:a.context_messages):undefined;const n=(l=(t=r)==null?void 0:t.author_message)!=null?l:undefined;const b=Math.round(Math.random()*1e3);L.Runtime.loadExtension(["ui.feedback.form"]).then((()=>{var e,s,a,l,t,c,d,p;BX.UI.Feedback.Form.open({id:`ai.copilot.feedback-${b}`,forms:[{zones:["es"],id:684,lang:"es",sec:"svvq1x"},{zones:["en"],id:686,lang:"en",sec:"tjwodz"},{zones:["de"],id:688,lang:"de",sec:"nrwksg"},{zones:["com.br"],id:690,lang:"com.br",sec:"kpte6m"},{zones:["ru","by","kz"],id:692,lang:"ru",sec:"jbujn0"}],presets:{sender_page:i,prompt_code:(e=r)==null?void 0:(s=e.prompt)==null?void 0:s.code,user_message:(a=r)==null?void 0:a.user_message,original_message:(l=r)==null?void 0:l.original_message,author_message:n,context_messages:o,last_result0:(t=r)==null?void 0:(c=t.current_result)==null?void 0:c[1],language:L.Loc.getMessage("LANGUAGE_ID"),cp_answer:(d=r)==null?void 0:(p=d.current_result)==null?void 0:p[0]}})})).catch((e=>{console.err(e)}))}var zr=babelHelpers.classPrivateFieldLooseKey("engineCode");let qr=e=>e,Qr,Yr;const Jr={SAVE:"save",CANCEL:"cancel",CHANGE_REQUEST:"change-request",CLOSE:"close"};var Zr=babelHelpers.classPrivateFieldLooseKey("popup");var eo=babelHelpers.classPrivateFieldLooseKey("bindElement");var so=babelHelpers.classPrivateFieldLooseKey("resultContainer");var ao=babelHelpers.classPrivateFieldLooseKey("resultText");var lo=babelHelpers.classPrivateFieldLooseKey("resultMenu");var to=babelHelpers.classPrivateFieldLooseKey("additionalResultMenuItems");var io=babelHelpers.classPrivateFieldLooseKey("engine");var ro=babelHelpers.classPrivateFieldLooseKey("analytics");var oo=babelHelpers.classPrivateFieldLooseKey("initPopup");var no=babelHelpers.classPrivateFieldLooseKey("initResultMenu");var bo=babelHelpers.classPrivateFieldLooseKey("renderPopupContent");var co=babelHelpers.classPrivateFieldLooseKey("renderResultContainer");class po extends u.EventEmitter{constructor(e){super();Object.defineProperty(this,co,{value:Po});Object.defineProperty(this,bo,{value:ho});Object.defineProperty(this,no,{value:uo});Object.defineProperty(this,oo,{value:vo});Object.defineProperty(this,Zr,{writable:true,value:null});Object.defineProperty(this,eo,{writable:true,value:void 0});Object.defineProperty(this,so,{writable:true,value:void 0});Object.defineProperty(this,ao,{writable:true,value:""});Object.defineProperty(this,lo,{writable:true,value:void 0});Object.defineProperty(this,to,{writable:true,value:[]});Object.defineProperty(this,io,{writable:true,value:void 0});Object.defineProperty(this,ro,{writable:true,value:void 0});this.setEventNamespace("AI.CopilotReadonly:ResultPopup");babelHelpers.classPrivateFieldLooseBase(this,eo)[eo]=e.bindElement;babelHelpers.classPrivateFieldLooseBase(this,to)[to]=e.additionalResultMenuItems.map((e=>({...e,command:()=>{e.command(babelHelpers.classPrivateFieldLooseBase(this,ao)[ao])}})));babelHelpers.classPrivateFieldLooseBase(this,ro)[ro]=e.analytics;babelHelpers.classPrivateFieldLooseBase(this,io)[io]=e.engine}show(){if(!babelHelpers.classPrivateFieldLooseBase(this,Zr)[Zr]){babelHelpers.classPrivateFieldLooseBase(this,oo)[oo]();babelHelpers.classPrivateFieldLooseBase(this,Zr)[Zr].setOffset({offsetTop:6})}if(!babelHelpers.classPrivateFieldLooseBase(this,lo)[lo]){babelHelpers.classPrivateFieldLooseBase(this,no)[no]()}babelHelpers.classPrivateFieldLooseBase(this,Zr)[Zr].show();babelHelpers.classPrivateFieldLooseBase(this,lo)[lo].setBindElement(babelHelpers.classPrivateFieldLooseBase(this,Zr)[Zr].getPopupContainer(),{top:4});babelHelpers.classPrivateFieldLooseBase(this,lo)[lo].open()}isShown(){var e;return Boolean((e=babelHelpers.classPrivateFieldLooseBase(this,Zr)[Zr])==null?void 0:e.isShown())}adjustPosition(){var e,s;(e=babelHelpers.classPrivateFieldLooseBase(this,Zr)[Zr])==null?void 0:e.adjustPosition();(s=babelHelpers.classPrivateFieldLooseBase(this,lo)[lo])==null?void 0:s.adjustPosition()}destroy(){var e,s;(e=babelHelpers.classPrivateFieldLooseBase(this,Zr)[Zr])==null?void 0:e.destroy();babelHelpers.classPrivateFieldLooseBase(this,Zr)[Zr]=null;(s=babelHelpers.classPrivateFieldLooseBase(this,lo)[lo])==null?void 0:s.close();babelHelpers.classPrivateFieldLooseBase(this,lo)[lo]=null;babelHelpers.classPrivateFieldLooseBase(this,so)[so]=null}setBindElement(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,Zr)[Zr])==null?void 0:s.setBindElement(e);this.adjustPosition()}getResult(){return babelHelpers.classPrivateFieldLooseBase(this,ao)[ao]}setResult(e){babelHelpers.classPrivateFieldLooseBase(this,ao)[ao]=e;if(babelHelpers.classPrivateFieldLooseBase(this,so)[so]){babelHelpers.classPrivateFieldLooseBase(this,so)[so].innerText=e}}}function vo(){babelHelpers.classPrivateFieldLooseBase(this,Zr)[Zr]=new h.Popup({content:babelHelpers.classPrivateFieldLooseBase(this,bo)[bo](),bindElement:babelHelpers.classPrivateFieldLooseBase(this,eo)[eo],cacheable:false,className:"ai__copilot-scope ai__copilot-context-menu__result-popup",width:530,closeIcon:true,closeIconSize:"large",events:{onPopupShow:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,so)[so].scrollHeight>babelHelpers.classPrivateFieldLooseBase(this,so)[so].offsetHeight){L.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,so)[so],"--with-scroll")}},onPopupClose:()=>{babelHelpers.classPrivateFieldLooseBase(this,lo)[lo].close();this.emit(Jr.CLOSE)},onPopupAfterClose:()=>{this.destroy()}}})}function uo(){babelHelpers.classPrivateFieldLooseBase(this,lo)[lo]=new p.CopilotMenu({bindElement:babelHelpers.classPrivateFieldLooseBase(this,so)[so],cacheable:false,forceTop:false,items:[new v.ChangeRequestMenuItem({icon:null,onClick:()=>{this.emit(Jr.CHANGE_REQUEST);babelHelpers.classPrivateFieldLooseBase(this,ro)[ro].sendEventCancel()}}).getOptions(),{separator:true},new v.CopyResultMenuItem({getText:()=>{babelHelpers.classPrivateFieldLooseBase(this,ro)[ro].sendEventCopyResult();return babelHelpers.classPrivateFieldLooseBase(this,ao)[ao]}}).getOptions(),...babelHelpers.classPrivateFieldLooseBase(this,to)[to],{separator:true},new v.FeedbackMenuItem({icon:null,isBeforeGeneration:false,engine:babelHelpers.classPrivateFieldLooseBase(this,io)[io]}).getOptions()]})}function ho(){const e=new _i;return L.Tag.render(Qr||(Qr=qr`
			<div class="ai__copilot-context-menu__result-popup-content">
				${0}
				<div class="ai__copilot-context-menu_result-popup-warning">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,co)[co](),e.render(true))}function Po(){babelHelpers.classPrivateFieldLooseBase(this,so)[so]=L.Tag.render(Yr||(Yr=qr`
			<div class="ai__copilot-context-menu__result-popup-text">${0}</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,ao)[ao]);return babelHelpers.classPrivateFieldLooseBase(this,so)[so]}let Lo=e=>e,Ho,Fo,Bo;const fo={CANCEL:"cancel"};var yo=babelHelpers.classPrivateFieldLooseKey("popup");var mo=babelHelpers.classPrivateFieldLooseKey("bindElement");var go=babelHelpers.classPrivateFieldLooseKey("lottieLoaderIcon");var wo=babelHelpers.classPrivateFieldLooseKey("initPopup");var Co=babelHelpers.classPrivateFieldLooseKey("getPopupContent");class Oo extends u.EventEmitter{constructor(e){super(e);Object.defineProperty(this,Co,{value:Eo});Object.defineProperty(this,wo,{value:_o});Object.defineProperty(this,yo,{writable:true,value:null});Object.defineProperty(this,mo,{writable:true,value:void 0});Object.defineProperty(this,go,{writable:true,value:void 0});this.setEventNamespace("AI.CopilotContextMenu:Loader");babelHelpers.classPrivateFieldLooseBase(this,mo)[mo]=e.bindElement}show(){if(!babelHelpers.classPrivateFieldLooseBase(this,yo)[yo]){babelHelpers.classPrivateFieldLooseBase(this,wo)[wo]();babelHelpers.classPrivateFieldLooseBase(this,yo)[yo].setOffset({offsetTop:6})}babelHelpers.classPrivateFieldLooseBase(this,yo)[yo].show()}destroy(){babelHelpers.classPrivateFieldLooseBase(this,yo)[yo].destroy();babelHelpers.classPrivateFieldLooseBase(this,yo)[yo]=null}isShown(){var e;return Boolean((e=babelHelpers.classPrivateFieldLooseBase(this,yo)[yo])==null?void 0:e.isShown())}adjustPosition(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,yo)[yo])==null?void 0:e.adjustPosition()}setBindElement(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,yo)[yo])==null?void 0:s.setBindElement(e);this.adjustPosition()}}function _o(){babelHelpers.classPrivateFieldLooseBase(this,yo)[yo]=new h.Popup({content:babelHelpers.classPrivateFieldLooseBase(this,Co)[Co](),bindElement:babelHelpers.classPrivateFieldLooseBase(this,mo)[mo],cacheable:false,minWidth:282,minHeight:42,padding:6,className:"ai__copilot-scope ai__copilot-context-menu_loader-popup",events:{onPopupShow:()=>{babelHelpers.classPrivateFieldLooseBase(this,go)[go].play()},onPopupClose:()=>{babelHelpers.classPrivateFieldLooseBase(this,go)[go].stop()}}})}function Eo(){const e=21.5;const s=L.Tag.render(Ho||(Ho=Lo`
			<div class="" style="width: ${0}px; height: ${0}px;"></div>
		`),e,e);babelHelpers.classPrivateFieldLooseBase(this,go)[go]=d.Lottie.loadAnimation({container:s,renderer:"svg",animationData:Ma,autoplay:false});const a=L.Tag.render(Fo||(Fo=Lo`
			<button style="opacity: 1;" class="ai__copilot_loader-cancel-btn">
				${0}
			</button>
		`),L.Loc.getMessage("AI_COPILOT_INPUT_LOADER_CANCEL"));L.Event.bind(a,"click",(()=>{this.emit(fo.CANCEL)}));return L.Tag.render(Bo||(Bo=Lo`
			<div class="ai__copilot-context-menu-loader-content">
				<div class="ai__copilot_loader-left">
					<div class="ai__copilot-context-menu-loader-icon">
						${0}
					</div>
					<div class="ai__copilot-context-menu-loader-text-with-dots">
						<span class="ai__copilot_loader-text">${0}</span>
						<div class="ai__copilot-context-menu-loader_dots">
							<div class="dot-flashing"></div>
						</div>
					</div>
				</div>
				${0}
			</div>
		`),s,L.Loc.getMessage("AI_COPILOT_INPUT_LOADER_TEXT"),a)}let Io=e=>e,xo;const jo={CANCEL:"cancel",REPEAT:"repeat",CHANGE_REQUEST:"change-request"};var To=babelHelpers.classPrivateFieldLooseKey("error");var Ko=babelHelpers.classPrivateFieldLooseKey("bindElement");var ko=babelHelpers.classPrivateFieldLooseKey("popup");var Mo=babelHelpers.classPrivateFieldLooseKey("menu");var Ao=babelHelpers.classPrivateFieldLooseKey("errorField");var So=babelHelpers.classPrivateFieldLooseKey("initPopup");var Ro=babelHelpers.classPrivateFieldLooseKey("getPopupContent");var No=babelHelpers.classPrivateFieldLooseKey("showMenu");var Do=babelHelpers.classPrivateFieldLooseKey("hideMenu");var $o=babelHelpers.classPrivateFieldLooseKey("initMenu");var Go=babelHelpers.classPrivateFieldLooseKey("getMenuItems");class Wo extends u.EventEmitter{constructor(e){super(e);Object.defineProperty(this,Go,{value:Qo});Object.defineProperty(this,$o,{value:qo});Object.defineProperty(this,Do,{value:zo});Object.defineProperty(this,No,{value:Vo});Object.defineProperty(this,Ro,{value:Xo});Object.defineProperty(this,So,{value:Uo});Object.defineProperty(this,To,{writable:true,value:void 0});Object.defineProperty(this,Ko,{writable:true,value:void 0});Object.defineProperty(this,ko,{writable:true,value:void 0});Object.defineProperty(this,Mo,{writable:true,value:void 0});Object.defineProperty(this,Ao,{writable:true,value:void 0});this.setEventNamespace("AI.CopilotContextMenu:ErrorPopup");babelHelpers.classPrivateFieldLooseBase(this,Ko)[Ko]=e.bindElement;babelHelpers.classPrivateFieldLooseBase(this,To)[To]=e.error;babelHelpers.classPrivateFieldLooseBase(this,Ao)[Ao]=new Pl({errors:[babelHelpers.classPrivateFieldLooseBase(this,To)[To]]})}setError(e){babelHelpers.classPrivateFieldLooseBase(this,To)[To]=e;babelHelpers.classPrivateFieldLooseBase(this,Ao)[Ao].setErrors([babelHelpers.classPrivateFieldLooseBase(this,To)[To]])}show(){if(!babelHelpers.classPrivateFieldLooseBase(this,ko)[ko]){babelHelpers.classPrivateFieldLooseBase(this,So)[So]()}babelHelpers.classPrivateFieldLooseBase(this,ko)[ko].show()}destroy(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,ko)[ko])==null?void 0:e.destroy();babelHelpers.classPrivateFieldLooseBase(this,ko)[ko]=null}isShown(){var e;return Boolean((e=babelHelpers.classPrivateFieldLooseBase(this,ko)[ko])==null?void 0:e.isShown())}adjustPosition(){var e,s;(e=babelHelpers.classPrivateFieldLooseBase(this,ko)[ko])==null?void 0:e.adjustPosition();(s=babelHelpers.classPrivateFieldLooseBase(this,Mo)[Mo])==null?void 0:s.adjustPosition()}setBindElement(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,ko)[ko])==null?void 0:s.setBindElement(e);this.adjustPosition()}}function Uo(){if(babelHelpers.classPrivateFieldLooseBase(this,ko)[ko]){return}babelHelpers.classPrivateFieldLooseBase(this,ko)[ko]=new h.Popup({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Ko)[Ko],content:babelHelpers.classPrivateFieldLooseBase(this,Ro)[Ro](),className:"ai__copilot-scope ai__copilot-context-menu_error-popup",maxWidth:600,minHeight:42,padding:6,events:{onAfterPopupShow:()=>{babelHelpers.classPrivateFieldLooseBase(this,No)[No]()},onPopupClose:()=>{babelHelpers.classPrivateFieldLooseBase(this,Do)[Do]()},onPopupDestroy:()=>{babelHelpers.classPrivateFieldLooseBase(this,Do)[Do]()}}});babelHelpers.classPrivateFieldLooseBase(this,ko)[ko].setOffset({offsetTop:6})}function Xo(){const e=new P.Icon({icon:P.Main.WARNING,color:getComputedStyle(document.body).getPropertyValue("--ui-color-text-alert"),size:24});return L.Tag.render(xo||(xo=Io`
			<div class="ai__copilot-context-menu-error-content">
				<div class="ai__copilot-context-menu-error-content-icon">
					${0}
				</div>
				<div class="ai__copilot-context-menu-error-content-text">
					${0}
				</div>
			</div>
		`),e.render(),babelHelpers.classPrivateFieldLooseBase(this,Ao)[Ao].render())}function Vo(){if(!babelHelpers.classPrivateFieldLooseBase(this,Mo)[Mo]){babelHelpers.classPrivateFieldLooseBase(this,$o)[$o]()}babelHelpers.classPrivateFieldLooseBase(this,Mo)[Mo].setBindElement(babelHelpers.classPrivateFieldLooseBase(this,ko)[ko].getPopupContainer(),{top:6});babelHelpers.classPrivateFieldLooseBase(this,Mo)[Mo].open();babelHelpers.classPrivateFieldLooseBase(this,Mo)[Mo].show()}function zo(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Mo)[Mo])==null?void 0:e.close();babelHelpers.classPrivateFieldLooseBase(this,Mo)[Mo]=null}function qo(){babelHelpers.classPrivateFieldLooseBase(this,Mo)[Mo]=new p.CopilotMenu({bindElement:babelHelpers.classPrivateFieldLooseBase(this,ko)[ko].getPopupContainer(),items:babelHelpers.classPrivateFieldLooseBase(this,Go)[Go](),cacheable:false,forceTop:false})}function Qo(){return[new v.RepeatCopilotMenuItem({icon:null,onClick:()=>{this.emit(jo.REPEAT)}}).getOptions(),new v.ChangeRequestMenuItem({icon:null,onClick:()=>{this.emit(jo.CHANGE_REQUEST)}}).getOptions(),new v.CancelCopilotMenuItem({icon:null,onClick:()=>{this.emit(jo.CANCEL)}}).getOptions()]}var Yo=babelHelpers.classPrivateFieldLooseKey("staticEulaRestrictCallback");class Jo{static async init(){var e;const s=await ki("bitrix24.license.feature");if(!(s!=null&&s.Feature)){return false}const a=L.Type.isFunction((e=babelHelpers.classPrivateFieldLooseBase(Jo,Yo)[Yo])==null?void 0:e.then);const l=babelHelpers.classPrivateFieldLooseBase(Jo,Yo)[Yo]===null;if(l||a){try{if(l){babelHelpers.classPrivateFieldLooseBase(Jo,Yo)[Yo]=s.Feature.checkEulaRestrictions("ai_available_by_version")}await babelHelpers.classPrivateFieldLooseBase(Jo,Yo)[Yo];babelHelpers.classPrivateFieldLooseBase(Jo,Yo)[Yo]=false;return false}catch(e){if(e.callback){babelHelpers.classPrivateFieldLooseBase(Jo,Yo)[Yo]=e.callback;return true}console.error(e);return false}}return L.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(Jo,Yo)[Yo])}static checkRestricted(){if(L.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(Jo,Yo)[Yo])){babelHelpers.classPrivateFieldLooseBase(Jo,Yo)[Yo]();return true}return false}}Object.defineProperty(Jo,Yo,{writable:true,value:void 0});var Zo=babelHelpers.classPrivateFieldLooseKey("bindElement");var en=babelHelpers.classPrivateFieldLooseKey("copilotTextControllerEngine");var sn=babelHelpers.classPrivateFieldLooseKey("context");var an=babelHelpers.classPrivateFieldLooseKey("selectedText");var ln=babelHelpers.classPrivateFieldLooseKey("generalMenu");var tn=babelHelpers.classPrivateFieldLooseKey("resultPopup");var rn=babelHelpers.classPrivateFieldLooseKey("loaderPopup");var on=babelHelpers.classPrivateFieldLooseKey("errorPopup");var nn=babelHelpers.classPrivateFieldLooseKey("extraResultMenuItems");var bn=babelHelpers.classPrivateFieldLooseKey("angle");var cn=babelHelpers.classPrivateFieldLooseKey("initEngineOptions");var dn=babelHelpers.classPrivateFieldLooseKey("copilotBanner");var pn=babelHelpers.classPrivateFieldLooseKey("isNeedToShowCopilotBanner");var vn=babelHelpers.classPrivateFieldLooseKey("isShowCopilotAgreementPopup");var un=babelHelpers.classPrivateFieldLooseKey("showAfterCopilotBanner");var hn=babelHelpers.classPrivateFieldLooseKey("completions");var Pn=babelHelpers.classPrivateFieldLooseKey("handleCompletionsError");var Ln=babelHelpers.classPrivateFieldLooseKey("getAnalyticParametersForCompletions");var Hn=babelHelpers.classPrivateFieldLooseKey("initEngine");var Fn=babelHelpers.classPrivateFieldLooseKey("getGeneralMenuItems");var Bn=babelHelpers.classPrivateFieldLooseKey("getPromptMenuItemFromPrompt");var fn=babelHelpers.classPrivateFieldLooseKey("getProviderMenuItems");var yn=babelHelpers.classPrivateFieldLooseKey("showResultPopup");var mn=babelHelpers.classPrivateFieldLooseKey("setResultPopupText");var gn=babelHelpers.classPrivateFieldLooseKey("initResultPopup");var wn=babelHelpers.classPrivateFieldLooseKey("initLoaderPopup");var Cn=babelHelpers.classPrivateFieldLooseKey("showLoaderPopup");var On=babelHelpers.classPrivateFieldLooseKey("hideLoaderPopup");var _n=babelHelpers.classPrivateFieldLooseKey("showGeneralMenu");var En=babelHelpers.classPrivateFieldLooseKey("destroyGeneralMenu");var In=babelHelpers.classPrivateFieldLooseKey("initGeneralMenu");var xn=babelHelpers.classPrivateFieldLooseKey("getGeneralMenuAngleOptions");var jn=babelHelpers.classPrivateFieldLooseKey("showErrorPopup");var Tn=babelHelpers.classPrivateFieldLooseKey("destroyErrorPopup");var Kn=babelHelpers.classPrivateFieldLooseKey("initErrorPopup");var kn=babelHelpers.classPrivateFieldLooseKey("validateOptions");var Mn=babelHelpers.classPrivateFieldLooseKey("validateContextOption");var An=babelHelpers.classPrivateFieldLooseKey("getAnalytics");class Sn extends u.EventEmitter{constructor(e){var s;super(e);Object.defineProperty(this,An,{value:cb});Object.defineProperty(this,Mn,{value:bb});Object.defineProperty(this,kn,{value:nb});Object.defineProperty(this,Kn,{value:ob});Object.defineProperty(this,Tn,{value:rb});Object.defineProperty(this,jn,{value:ib});Object.defineProperty(this,xn,{value:tb});Object.defineProperty(this,In,{value:lb});Object.defineProperty(this,En,{value:ab});Object.defineProperty(this,_n,{value:sb});Object.defineProperty(this,On,{value:eb});Object.defineProperty(this,Cn,{value:Zn});Object.defineProperty(this,wn,{value:Jn});Object.defineProperty(this,gn,{value:Yn});Object.defineProperty(this,mn,{value:Qn});Object.defineProperty(this,yn,{value:qn});Object.defineProperty(this,fn,{value:zn});Object.defineProperty(this,Bn,{value:Vn});Object.defineProperty(this,Fn,{value:Xn});Object.defineProperty(this,Hn,{value:Un});Object.defineProperty(this,Ln,{value:Wn});Object.defineProperty(this,Pn,{value:Gn});Object.defineProperty(this,hn,{value:$n});Object.defineProperty(this,un,{value:Dn});Object.defineProperty(this,vn,{value:Nn});Object.defineProperty(this,pn,{value:Rn});Object.defineProperty(this,Zo,{writable:true,value:void 0});Object.defineProperty(this,en,{writable:true,value:void 0});Object.defineProperty(this,sn,{writable:true,value:void 0});Object.defineProperty(this,an,{writable:true,value:void 0});Object.defineProperty(this,ln,{writable:true,value:void 0});Object.defineProperty(this,tn,{writable:true,value:void 0});Object.defineProperty(this,rn,{writable:true,value:void 0});Object.defineProperty(this,on,{writable:true,value:void 0});Object.defineProperty(this,nn,{writable:true,value:void 0});Object.defineProperty(this,bn,{writable:true,value:void 0});Object.defineProperty(this,cn,{writable:true,value:void 0});this.setEventNamespace("AI.CopilotReadonly");babelHelpers.classPrivateFieldLooseBase(this,kn)[kn](e);babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo]=e.bindElement;babelHelpers.classPrivateFieldLooseBase(this,sn)[sn]=e.context||"";babelHelpers.classPrivateFieldLooseBase(this,an)[an]=e.selectedText||"";babelHelpers.classPrivateFieldLooseBase(this,nn)[nn]=(s=e.extraResultMenuItems)!=null?s:[];babelHelpers.classPrivateFieldLooseBase(this,bn)[bn]=e.angle===true;babelHelpers.classPrivateFieldLooseBase(this,cn)[cn]={moduleId:e.moduleId,contextId:e.contextId,category:e.category,contextParameters:e.contextParameters}}async init(){if(L.Extension.getSettings("ai.copilot").isRestrictByEula){await Jo.init()}try{await babelHelpers.classPrivateFieldLooseBase(this,Hn)[Hn](babelHelpers.classPrivateFieldLooseBase(this,cn)[cn]);babelHelpers.classPrivateFieldLooseBase(this,In)[In]();if(babelHelpers.classPrivateFieldLooseBase(this,pn)[pn]()){const{AppsInstallerBanner:e}=await L.Runtime.loadExtension("ai.copilot-banner");babelHelpers.classPrivateFieldLooseBase(Sn,dn)[dn]=new e({})}}catch(e){console.error("Init error",e);throw e}}getResultText(){var e;return((e=babelHelpers.classPrivateFieldLooseBase(this,tn)[tn])==null?void 0:e.getResult())||null}show(){const e=Jo.checkRestricted();if(e){babelHelpers.classPrivateFieldLooseBase(this,An)[An]().sendEventOpen("error_agreement");return}if(babelHelpers.classPrivateFieldLooseBase(Sn,dn)[dn]){babelHelpers.classPrivateFieldLooseBase(this,un)[un]();return}if(babelHelpers.classPrivateFieldLooseBase(this,vn)[vn]()){const e=babelHelpers.classPrivateFieldLooseBase(this,cn)[cn].moduleId;const s=babelHelpers.classPrivateFieldLooseBase(this,cn)[cn].contextId;F({moduleId:e,contextId:s,events:{onAccept:()=>{babelHelpers.classPrivateFieldLooseBase(this,_n)[_n]();babelHelpers.classPrivateFieldLooseBase(this,An)[An]().sendEventOpen("success")}}}).then((e=>{if(e){babelHelpers.classPrivateFieldLooseBase(this,_n)[_n]();babelHelpers.classPrivateFieldLooseBase(this,An)[An]().sendEventOpen("success")}}));return}babelHelpers.classPrivateFieldLooseBase(this,_n)[_n]();babelHelpers.classPrivateFieldLooseBase(this,An)[An]().sendEventOpen("success")}hide(){var e;babelHelpers.classPrivateFieldLooseBase(this,En)[En]();(e=babelHelpers.classPrivateFieldLooseBase(this,tn)[tn])==null?void 0:e.destroy();babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn]()}isShown(){var e,s,a,l;return((e=babelHelpers.classPrivateFieldLooseBase(this,ln)[ln])==null?void 0:e.isShown())||((s=babelHelpers.classPrivateFieldLooseBase(this,tn)[tn])==null?void 0:s.isShown())||((a=babelHelpers.classPrivateFieldLooseBase(this,rn)[rn])==null?void 0:a.isShown())||((l=babelHelpers.classPrivateFieldLooseBase(this,on)[on])==null?void 0:l.isShown())}adjustPosition(){var e,s,a,l;(e=babelHelpers.classPrivateFieldLooseBase(this,ln)[ln])==null?void 0:e.adjustPosition();(s=babelHelpers.classPrivateFieldLooseBase(this,on)[on])==null?void 0:s.adjustPosition();(a=babelHelpers.classPrivateFieldLooseBase(this,rn)[rn])==null?void 0:a.adjustPosition();(l=babelHelpers.classPrivateFieldLooseBase(this,tn)[tn])==null?void 0:l.adjustPosition()}setContext(e){var s;babelHelpers.classPrivateFieldLooseBase(this,Mn)[Mn](e);babelHelpers.classPrivateFieldLooseBase(this,sn)[sn]=e||"";(s=babelHelpers.classPrivateFieldLooseBase(this,en)[en])==null?void 0:s.setContext(babelHelpers.classPrivateFieldLooseBase(this,sn)[sn])}setSelectedText(e){var s;babelHelpers.classPrivateFieldLooseBase(this,Mn)[Mn](e);babelHelpers.classPrivateFieldLooseBase(this,an)[an]=e||"";(s=babelHelpers.classPrivateFieldLooseBase(this,en)[en])==null?void 0:s.setContext(babelHelpers.classPrivateFieldLooseBase(this,an)[an])}setBindElement(e){var s,a,l,t;babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo]=e;(s=babelHelpers.classPrivateFieldLooseBase(this,ln)[ln])==null?void 0:s.setBindElement(e);(a=babelHelpers.classPrivateFieldLooseBase(this,on)[on])==null?void 0:a.setBindElement(e);(l=babelHelpers.classPrivateFieldLooseBase(this,tn)[tn])==null?void 0:l.setBindElement(e);(t=babelHelpers.classPrivateFieldLooseBase(this,rn)[rn])==null?void 0:t.setBindElement(e)}}function Rn(){return babelHelpers.classPrivateFieldLooseBase(this,en)[en].isCopilotFirstLaunch()&&babelHelpers.classPrivateFieldLooseBase(Sn,dn)[dn]===undefined}function Nn(){var e;return(e=L.Extension.getSettings("ai.copilot").isShowAgreementPopup)!=null?e:false}function Dn(){babelHelpers.classPrivateFieldLooseBase(Sn,dn)[dn].show();babelHelpers.classPrivateFieldLooseBase(Sn,dn)[dn].subscribe("action-finish-success",(()=>{babelHelpers.classPrivateFieldLooseBase(Sn,dn)[dn]=null;babelHelpers.classPrivateFieldLooseBase(this,en)[en].setCopilotBannerLaunchedFlag();setTimeout((()=>{this.show()}),300)}))}async function $n(){try{babelHelpers.classPrivateFieldLooseBase(this,En)[En]();babelHelpers.classPrivateFieldLooseBase(this,Cn)[Cn]();babelHelpers.classPrivateFieldLooseBase(this,en)[en].setAnalyticParameters(babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln]());const e=await babelHelpers.classPrivateFieldLooseBase(this,en)[en].completions();if(e){babelHelpers.classPrivateFieldLooseBase(this,mn)[mn](e);babelHelpers.classPrivateFieldLooseBase(this,On)[On]();babelHelpers.classPrivateFieldLooseBase(this,yn)[yn]()}}catch(e){babelHelpers.classPrivateFieldLooseBase(this,Pn)[Pn](e)}}function Gn(e){babelHelpers.classPrivateFieldLooseBase(this,On)[On]();const s=e.getCode();switch(s){case"AI_ENGINE_ERROR_OTHER":{e.setMessage(L.Loc.getMessage("AI_COPILOT_ERROR_OTHER"));const s=new Xr({category:babelHelpers.classPrivateFieldLooseBase(this,en)[en].getCategory(),isBeforeGeneration:false,copilotTextController:babelHelpers.classPrivateFieldLooseBase(this,en)[en]});e.setCustomData({clickHandler:()=>s.execute(),clickableText:L.Loc.getMessage("AI_COPILOT_ERROR_CONTACT_US")});babelHelpers.classPrivateFieldLooseBase(this,jn)[jn](e);break}case"LIMIT_IS_EXCEEDED_BAAS":{babelHelpers.classPrivateFieldLooseBase(this,jn)[jn](e);break}case"LIMIT_IS_EXCEEDED_MONTHLY":case"LIMIT_IS_EXCEEDED_DAILY":case"SERVICE_IS_NOT_AVAILABLE_BY_TARIFF":{this.hide();break}default:{if(L.Type.isStringFilled(e.getCode())===false){e.setCode("undefined")}babelHelpers.classPrivateFieldLooseBase(this,jn)[jn](e)}}requestAnimationFrame((()=>{H.AjaxErrorHandler.handleTextGenerateError({baasOptions:{bindElement:babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo],context:babelHelpers.classPrivateFieldLooseBase(this,en)[en].getContextId(),useAngle:true},errorCode:e.getCode()})}))}function Wn(){const e=babelHelpers.classPrivateFieldLooseBase(this,An)[An]();return{category:e.getCategory(),type:e.getType(),c_sub_section:e.getCSubSection(),c_element:e.getCElement()}}async function Un(e){const{CopilotTextControllerEngine:s}=await L.Runtime.loadExtension("ai.copilot.copilot-text-controller");babelHelpers.classPrivateFieldLooseBase(this,en)[en]=new s({moduleId:e.moduleId,contextParameters:e.contextParameters,contextId:e.contextId,category:e.category});babelHelpers.classPrivateFieldLooseBase(this,en)[en].setContext(babelHelpers.classPrivateFieldLooseBase(this,an)[an]||babelHelpers.classPrivateFieldLooseBase(this,sn)[sn]);await babelHelpers.classPrivateFieldLooseBase(this,en)[en].init()}function Xn(){const e=babelHelpers.classPrivateFieldLooseBase(this,en)[en].getPrompts().slice(1);const s=e.map((e=>babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn](e)));return[...s,{separator:true},new v.OpenCopilotMenuItem({children:babelHelpers.classPrivateFieldLooseBase(this,fn)[fn]()}).getOptions(),(new v.AboutCopilotMenuItem).getOptions(),new v.FeedbackMenuItem({engine:babelHelpers.classPrivateFieldLooseBase(this,en)[en],isBeforeGeneration:true}).getOptions()]}function Vn(e){const s=e.children||[];const a=new sa({code:e.code,text:e.title,icon:e.icon,onClick:()=>{babelHelpers.classPrivateFieldLooseBase(this,en)[en].setCommandCode(e.code);babelHelpers.classPrivateFieldLooseBase(this,en)[en].setContext(babelHelpers.classPrivateFieldLooseBase(this,an)[an]||babelHelpers.classPrivateFieldLooseBase(this,sn)[sn]);babelHelpers.classPrivateFieldLooseBase(this,hn)[hn]()},children:s.map((e=>babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn](e)))});if(e.separator){return{separator:true,section:e.section,title:e.title}}return a.getOptions()}function zn(){var e;const s=babelHelpers.classPrivateFieldLooseBase(this,en)[en].getEngines().map((e=>new v.ProviderMenuItem({code:e.code,text:e.title,selected:babelHelpers.classPrivateFieldLooseBase(this,en)[en].getSelectedEngineCode()===e.code,onClick:()=>{babelHelpers.classPrivateFieldLooseBase(this,en)[en].setSelectedEngineCode(e.code);babelHelpers.classPrivateFieldLooseBase(this,ln)[ln].replaceMenuItemSubmenu(new v.OpenCopilotMenuItem({children:babelHelpers.classPrivateFieldLooseBase(this,fn)[fn]()}).getOptions())}})));const a=[...s,{separator:true},new v.ConnectModelMenuItem,new v.MarketMenuItem];if((e=babelHelpers.classPrivateFieldLooseBase(this,en)[en].getPermissions())!=null&&e.can_edit_settings){a.push(new v.SettingsMenuItem)}return a}function qn(){if(!babelHelpers.classPrivateFieldLooseBase(this,tn)[tn]){babelHelpers.classPrivateFieldLooseBase(this,gn)[gn]()}babelHelpers.classPrivateFieldLooseBase(this,tn)[tn].show()}function Qn(e){if(!babelHelpers.classPrivateFieldLooseBase(this,tn)[tn]){babelHelpers.classPrivateFieldLooseBase(this,gn)[gn]()}babelHelpers.classPrivateFieldLooseBase(this,tn)[tn].setResult(e)}function Yn(){babelHelpers.classPrivateFieldLooseBase(this,tn)[tn]=new po({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo],additionalResultMenuItems:babelHelpers.classPrivateFieldLooseBase(this,nn)[nn],engine:babelHelpers.classPrivateFieldLooseBase(this,en)[en],analytics:babelHelpers.classPrivateFieldLooseBase(this,An)[An]()});babelHelpers.classPrivateFieldLooseBase(this,tn)[tn].subscribe(Jr.SAVE,(()=>{babelHelpers.classPrivateFieldLooseBase(this,tn)[tn].destroy();babelHelpers.classPrivateFieldLooseBase(this,on)[on].destroy();babelHelpers.classPrivateFieldLooseBase(this,En)[En]()}));babelHelpers.classPrivateFieldLooseBase(this,tn)[tn].subscribe(Jr.CANCEL,(()=>{this.hide()}));babelHelpers.classPrivateFieldLooseBase(this,tn)[tn].subscribe(Jr.CHANGE_REQUEST,(()=>{babelHelpers.classPrivateFieldLooseBase(this,tn)[tn].destroy();babelHelpers.classPrivateFieldLooseBase(this,_n)[_n]()}))}function Jn(){babelHelpers.classPrivateFieldLooseBase(this,rn)[rn]=new Oo({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo]});babelHelpers.classPrivateFieldLooseBase(this,rn)[rn].subscribe(fo.CANCEL,(()=>{babelHelpers.classPrivateFieldLooseBase(this,en)[en].cancelCompletion();babelHelpers.classPrivateFieldLooseBase(this,rn)[rn].destroy();babelHelpers.classPrivateFieldLooseBase(this,_n)[_n]()}))}function Zn(){if(!babelHelpers.classPrivateFieldLooseBase(this,rn)[rn]){babelHelpers.classPrivateFieldLooseBase(this,wn)[wn]()}babelHelpers.classPrivateFieldLooseBase(this,rn)[rn].show()}function eb(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,rn)[rn])==null?void 0:e.destroy()}function sb(){if(!babelHelpers.classPrivateFieldLooseBase(this,ln)[ln]){babelHelpers.classPrivateFieldLooseBase(this,In)[In]()}babelHelpers.classPrivateFieldLooseBase(this,ln)[ln].setBindElement(babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo]);babelHelpers.classPrivateFieldLooseBase(this,ln)[ln].adjustPosition();babelHelpers.classPrivateFieldLooseBase(this,ln)[ln].open()}function ab(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,ln)[ln])==null?void 0:e.close();babelHelpers.classPrivateFieldLooseBase(this,ln)[ln]=null}function lb(){babelHelpers.classPrivateFieldLooseBase(this,ln)[ln]=new Ts({items:babelHelpers.classPrivateFieldLooseBase(this,Fn)[Fn](),bindElement:babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo],cacheable:false,autoHide:true,forceTop:false,angle:babelHelpers.classPrivateFieldLooseBase(this,xn)[xn](),bordered:false});babelHelpers.classPrivateFieldLooseBase(this,ln)[ln].subscribe(es.close,(()=>{babelHelpers.classPrivateFieldLooseBase(this,ln)[ln]=null}))}function tb(){if(!babelHelpers.classPrivateFieldLooseBase(this,bn)[bn]){return null}if(L.Type.isElementNode(babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo])){return{offset:L.Dom.getPosition(babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo]).width,position:"top"}}if(L.Type.isObject(babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo])){return{position:"top"}}return null}function ib(e){if(!babelHelpers.classPrivateFieldLooseBase(this,on)[on]){babelHelpers.classPrivateFieldLooseBase(this,Kn)[Kn](e)}babelHelpers.classPrivateFieldLooseBase(this,on)[on].setError(e);babelHelpers.classPrivateFieldLooseBase(this,on)[on].show()}function rb(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,on)[on])==null?void 0:e.destroy()}function ob(e){babelHelpers.classPrivateFieldLooseBase(this,on)[on]=new Wo({error:e,bindElement:babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo]});babelHelpers.classPrivateFieldLooseBase(this,on)[on].subscribe(jo.CANCEL,(()=>{this.hide()}));babelHelpers.classPrivateFieldLooseBase(this,on)[on].subscribe(jo.CHANGE_REQUEST,(()=>{babelHelpers.classPrivateFieldLooseBase(this,on)[on].destroy();babelHelpers.classPrivateFieldLooseBase(this,_n)[_n]()}));babelHelpers.classPrivateFieldLooseBase(this,on)[on].subscribe(jo.REPEAT,(()=>{babelHelpers.classPrivateFieldLooseBase(this,on)[on].destroy();babelHelpers.classPrivateFieldLooseBase(this,hn)[hn]()}))}function nb(e){if(L.Type.isObject(e)===false){throw new L.BaseError("AI.CopilotContextMenu: options is required for constructor.")}if(L.Type.isStringFilled(e.moduleId)===false){throw new L.BaseError("AI.CopilotContextMenu: moduleId is required option and must be string.")}if(L.Type.isStringFilled(e.category)===false){throw new L.BaseError("AI.CopilotContextMenu: category is required option and must be string.")}if(L.Type.isStringFilled(e.contextId)===false){throw new L.BaseError("AI.CopilotContextMenu: contextId is required option and must be string")}babelHelpers.classPrivateFieldLooseBase(this,Mn)[Mn](e.context);if(e.angle&&L.Type.isBoolean(e.angle)===false){throw new L.BaseError("AI.CopilotContextMenu: angle option must be boolean")}}function bb(e){if(e&&L.Type.isString(e)===false){throw new L.BaseError("AI.CopilotContextMenu: context option must be string")}}function cb(){const e=(new N).setCategoryReadonly().setP1("prompt",babelHelpers.classPrivateFieldLooseBase(this,en)[en].getCommandCode()).setP2("provider",babelHelpers.classPrivateFieldLooseBase(this,en)[en].getSelectedEngineCode());if(babelHelpers.classPrivateFieldLooseBase(this,sn)[sn]){e.setContextElementReadonlyCommon()}else{e.setContextElementReadonlyQuote()}return e}Object.defineProperty(Sn,dn,{writable:true,value:void 0});e.Copilot=Hr;e.CopilotMode=ji;e.CopilotEvents=Ti;e.CopilotInput=Xt;e.CopilotInputEvents=Ql;e.CopilotMenu=Ts;e.CopilotMenuEvents=es;e.CopilotMenuCommand=ea;e.CopilotResult=ra;e.CopilotContextMenu=Sn})(this.BX.AI=this.BX.AI||{},BX.AI,BX,BX,BX.UI,BX,BX.AI,BX,BX,BX,BX.UI.Feedback,BX.UI,BX.AI,BX.AI,BX.Event,BX.Main,BX.UI.IconSet,BX,BX.AI);
//# sourceMappingURL=copilot.bundle.map.js