this.BX=this.BX||{};(function(e,s,t,l,a,i,o,r,n,c){"use strict";var b=babelHelpers.classPrivateFieldLooseKey("engine");var d=babelHelpers.classPrivateFieldLooseKey("category");var p=babelHelpers.classPrivateFieldLooseKey("context");var v=babelHelpers.classPrivateFieldLooseKey("useResultStack");var u=babelHelpers.classPrivateFieldLooseKey("selectedText");var h=babelHelpers.classPrivateFieldLooseKey("userMessage");var P=babelHelpers.classPrivateFieldLooseKey("commandCode");var L=babelHelpers.classPrivateFieldLooseKey("selectedEngineCode");var F=babelHelpers.classPrivateFieldLooseKey("currentGenerateRequestId");var H=babelHelpers.classPrivateFieldLooseKey("resultStack");var B=babelHelpers.classPrivateFieldLooseKey("toolingDataByCategory");var g=babelHelpers.classPrivateFieldLooseKey("addResultToStack");var m=babelHelpers.classPrivateFieldLooseKey("getSelectedEngineCode");var f=babelHelpers.classPrivateFieldLooseKey("getTooling");var y=babelHelpers.classPrivateFieldLooseKey("setEnginePayload");var C=babelHelpers.classPrivateFieldLooseKey("isCommandRequiredUserMessage");var O=babelHelpers.classPrivateFieldLooseKey("isCommandRequiredContextMessage");var _=babelHelpers.classPrivateFieldLooseKey("getPromptByCode");var I=babelHelpers.classPrivateFieldLooseKey("initEngine");class E{constructor(e){var s;Object.defineProperty(this,I,{value:K});Object.defineProperty(this,_,{value:j});Object.defineProperty(this,O,{value:R});Object.defineProperty(this,C,{value:w});Object.defineProperty(this,y,{value:A});Object.defineProperty(this,f,{value:T});Object.defineProperty(this,m,{value:x});Object.defineProperty(this,g,{value:M});Object.defineProperty(this,b,{writable:true,value:void 0});Object.defineProperty(this,d,{writable:true,value:void 0});Object.defineProperty(this,p,{writable:true,value:void 0});Object.defineProperty(this,v,{writable:true,value:true});Object.defineProperty(this,u,{writable:true,value:void 0});Object.defineProperty(this,h,{writable:true,value:void 0});Object.defineProperty(this,P,{writable:true,value:void 0});Object.defineProperty(this,L,{writable:true,value:void 0});Object.defineProperty(this,F,{writable:true,value:void 0});Object.defineProperty(this,H,{writable:true,value:[]});babelHelpers.classPrivateFieldLooseBase(this,d)[d]=e.category;babelHelpers.classPrivateFieldLooseBase(this,v)[v]=(s=e.useResultStack)!=null?s:babelHelpers.classPrivateFieldLooseBase(this,v)[v];babelHelpers.classPrivateFieldLooseBase(this,I)[I]({moduleId:e.moduleId,category:e.category,contextId:e.contextId,contextParameters:e.contextParameters})}async init(){if(babelHelpers.classPrivateFieldLooseBase(E,B)[B][babelHelpers.classPrivateFieldLooseBase(this,d)[d]]===undefined){babelHelpers.classPrivateFieldLooseBase(E,B)[B][babelHelpers.classPrivateFieldLooseBase(this,d)[d]]=babelHelpers.classPrivateFieldLooseBase(this,b)[b].getTooling("text")}const e=await babelHelpers.classPrivateFieldLooseBase(E,B)[B][babelHelpers.classPrivateFieldLooseBase(this,d)[d]];babelHelpers.classPrivateFieldLooseBase(E,B)[B][babelHelpers.classPrivateFieldLooseBase(this,d)[d]]=e;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=babelHelpers.classPrivateFieldLooseBase(this,m)[m](e.data.engines)}async completions(){babelHelpers.classPrivateFieldLooseBase(this,y)[y]();const e=Math.round(Math.random()*1e4);babelHelpers.classPrivateFieldLooseBase(this,F)[F]=e;try{const s=await babelHelpers.classPrivateFieldLooseBase(this,b)[b].textCompletions();const t=s.data.result||s.data.last.data;if(babelHelpers.classPrivateFieldLooseBase(this,F)[F]!==e){return null}if(babelHelpers.classPrivateFieldLooseBase(this,v)[v]){babelHelpers.classPrivateFieldLooseBase(this,g)[g](t)}return t}catch(s){if(babelHelpers.classPrivateFieldLooseBase(this,F)[F]!==e){return null}throw S(s)}}getPrompts(){return babelHelpers.classPrivateFieldLooseBase(this,f)[f]().prompts}getPermissions(){return babelHelpers.classPrivateFieldLooseBase(this,f)[f]().permissions}getEngines(){return babelHelpers.classPrivateFieldLooseBase(this,f)[f]().engines}setSelectedEngineCode(e){babelHelpers.classPrivateFieldLooseBase(this,L)[L]=e}getSelectedEngineCode(){return babelHelpers.classPrivateFieldLooseBase(this,L)[L]}getCategory(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d]}getContextId(){return babelHelpers.classPrivateFieldLooseBase(this,b)[b].getContextId()}setContext(e){babelHelpers.classPrivateFieldLooseBase(this,p)[p]=e}setSelectedText(e){babelHelpers.classPrivateFieldLooseBase(this,u)[u]=e}getOriginalMessage(){return babelHelpers.classPrivateFieldLooseBase(this,u)[u]||babelHelpers.classPrivateFieldLooseBase(this,p)[p]||""}setUserMessage(e){babelHelpers.classPrivateFieldLooseBase(this,h)[h]=e}getCommandCode(){return babelHelpers.classPrivateFieldLooseBase(this,P)[P]}setCommandCode(e){babelHelpers.classPrivateFieldLooseBase(this,P)[P]=e}cancelCompletion(){babelHelpers.classPrivateFieldLooseBase(this,F)[F]=-1}isCopilotFirstLaunch(){return Boolean(babelHelpers.classPrivateFieldLooseBase(this,f)[f]().first_launch)}setCopilotBannerLaunchedFlag(){babelHelpers.classPrivateFieldLooseBase(this,b)[b].setBannerLaunched()}setAnalyticParameters(e){babelHelpers.classPrivateFieldLooseBase(this,b)[b].setAnalyticParameters(e)}async getDataForFeedbackForm(){try{const e=await babelHelpers.classPrivateFieldLooseBase(this,b)[b].getFeedbackData();const s=e.data.context_messages;const t=e.data.original_message;const l=babelHelpers.classPrivateFieldLooseBase(this,b)[b].getPayload();return l?{context_messages:s,author_message:t,...l.getRawData(),...l.getMarkers()}:{}}catch(e){console.error(e);const s=babelHelpers.classPrivateFieldLooseBase(this,b)[b].getPayload();return s?{...s.getRawData(),...s.getMarkers()}:{}}}}function M(e){const s=3;babelHelpers.classPrivateFieldLooseBase(this,H)[H].unshift(e);if(babelHelpers.classPrivateFieldLooseBase(this,H)[H].length>s){babelHelpers.classPrivateFieldLooseBase(this,H)[H].pop()}}function x(e){var s;const t=e.find((e=>e.selected));return(t==null?void 0:t.code)||((s=e[0])==null?void 0:s.code)}function T(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(E,B)[B][babelHelpers.classPrivateFieldLooseBase(this,d)[d]])==null?void 0:e.data}function A(){const e=babelHelpers.classPrivateFieldLooseBase(this,P)[P];const s=babelHelpers.classPrivateFieldLooseBase(this,h)[h]||undefined;const l=this.getOriginalMessage();const a=new t.Text({prompt:{code:e},engineCode:babelHelpers.classPrivateFieldLooseBase(this,L)[L]});a.setMarkers({original_message:babelHelpers.classPrivateFieldLooseBase(this,O)[O](e)?l:undefined,user_message:babelHelpers.classPrivateFieldLooseBase(this,C)[C](e)?s:undefined,current_result:babelHelpers.classPrivateFieldLooseBase(this,H)[H]});babelHelpers.classPrivateFieldLooseBase(this,b)[b].setPayload(a)}function w(e){const s=babelHelpers.classPrivateFieldLooseBase(this,f)[f]().prompts;const t=babelHelpers.classPrivateFieldLooseBase(this,_)[_](s,e);if(!t){return false}return t.required.user_message}function R(e){const s=babelHelpers.classPrivateFieldLooseBase(this,f)[f]().prompts;const t=babelHelpers.classPrivateFieldLooseBase(this,_)[_](s,e);if(!t){return false}return t.required.context_message}function j(e,s){let t=null;e.some((e=>{var l;if(e.code===s){t=e;return true}return(l=e.children)==null?void 0:l.some((e=>{if(e.code===s){t=e;return true}return false}))}));return t}function K(e){babelHelpers.classPrivateFieldLooseBase(this,b)[b]=new t.Engine;babelHelpers.classPrivateFieldLooseBase(this,b)[b].setModuleId(e.moduleId).setContextId(e.contextId).setContextParameters(e.contextParameters).setParameters({promptCategory:e.category})}Object.defineProperty(E,B,{writable:true,value:{}});function S(e){if(e instanceof Error){return new n.BaseError(e.message,"undefined",{})}if(n.Type.isString(e)){return new n.BaseError(e,"undefined",{})}const s=e.errors[0];if(!s){return null}const{message:t,code:l,customData:a}=s;return new n.BaseError(t,l,a)}class D{constructor(e){this.copilotTextController=e==null?void 0:e.copilotTextController}}class k extends D{execute(){this.copilotTextController.emit("add_below",{result:this.copilotTextController.getAiResultText(),code:this.copilotTextController.getLastCommandCode()})}}var N=babelHelpers.classPrivateFieldLooseKey("copilotContainer");var G=babelHelpers.classPrivateFieldLooseKey("inputField");class U extends D{constructor(e){super(e);Object.defineProperty(this,N,{writable:true,value:void 0});Object.defineProperty(this,G,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,N)[N]=e.copilotContainer;babelHelpers.classPrivateFieldLooseBase(this,G)[G]=e.inputField}execute(){this.copilotTextController.destroyAllMenus();this.copilotTextController.openGeneralMenu();this.copilotTextController.clearResultStack();babelHelpers.classPrivateFieldLooseBase(this,G)[G].clearErrors();babelHelpers.classPrivateFieldLooseBase(this,G)[G].clear();if(this.copilotTextController.isReadonly()===false){babelHelpers.classPrivateFieldLooseBase(this,G)[G].enable()}this.copilotTextController.clearResultField();n.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,N)[N],"--error");this.copilotTextController.emit("cancel");babelHelpers.classPrivateFieldLooseBase(this,G)[G].focus();this.copilotTextController.getAnalytics().sendEventCancel()}}var X=babelHelpers.classPrivateFieldLooseKey("inputField");var q=babelHelpers.classPrivateFieldLooseKey("copilotContainer");class z extends D{constructor(e){super(e);Object.defineProperty(this,X,{writable:true,value:void 0});Object.defineProperty(this,q,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,X)[X]=e.inputField;babelHelpers.classPrivateFieldLooseBase(this,q)[q]=e.copilotContainer}execute(){this.copilotTextController.destroyAllMenus();babelHelpers.classPrivateFieldLooseBase(this,X)[X].enable();babelHelpers.classPrivateFieldLooseBase(this,X)[X].clearErrors();n.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,q)[q],"--error");this.copilotTextController.openGeneralMenu();babelHelpers.classPrivateFieldLooseBase(this,X)[X].focus();this.copilotTextController.getAnalytics().sendEventEditResult()}}var V=babelHelpers.classPrivateFieldLooseKey("commandCode");class W extends D{constructor(e){super(e);Object.defineProperty(this,V,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,V)[V]=e.commandCode}execute(){this.copilotTextController.generateWithRequiredUserMessage(babelHelpers.classPrivateFieldLooseBase(this,V)[V])}}var $=babelHelpers.classPrivateFieldLooseKey("commandCode");var Y=babelHelpers.classPrivateFieldLooseKey("prompts");class J extends D{constructor(e){super(e);Object.defineProperty(this,$,{writable:true,value:void 0});Object.defineProperty(this,Y,{writable:true,value:[]});babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=e.prompts;babelHelpers.classPrivateFieldLooseBase(this,$)[$]=e.commandCode}execute(){this.copilotTextController.generateWithoutRequiredUserMessage(babelHelpers.classPrivateFieldLooseBase(this,$)[$],babelHelpers.classPrivateFieldLooseBase(this,Y)[Y])}}class Q extends D{execute(){const e="19092894";const s=n.Reflection.getClass("top.BX.Helper");if(s){s.show(`redirect=detail&code=${e}`)}}}var Z=babelHelpers.classPrivateFieldLooseKey("category");var ee=babelHelpers.classPrivateFieldLooseKey("isBeforeGeneration");var se=babelHelpers.classPrivateFieldLooseKey("openFeedbackForm");class te extends D{constructor(e){super(e);Object.defineProperty(this,se,{value:le});Object.defineProperty(this,Z,{writable:true,value:void 0});Object.defineProperty(this,ee,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]=e.category;babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]=e.isBeforeGeneration}async execute(){await babelHelpers.classPrivateFieldLooseBase(this,se)[se]()}}async function le(){var e,s,t,l,a;const i=`${babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]},${babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]?"before":"after"}`;let o=null;if(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]===false){o=await this.copilotTextController.getDataForFeedbackForm()}const r=((e=o)==null?void 0:(s=e.context_messages)==null?void 0:s.length)>0?JSON.stringify((t=o)==null?void 0:t.context_messages):undefined;const c=(l=(a=o)==null?void 0:a.author_message)!=null?l:undefined;const b=Math.round(Math.random()*1e3);n.Runtime.loadExtension(["ui.feedback.form"]).then((()=>{var e,s,t,l,a,d,p,v;BX.UI.Feedback.Form.open({id:`ai.copilot.feedback-${b}`,forms:[{zones:["es"],id:684,lang:"es",sec:"svvq1x"},{zones:["en"],id:686,lang:"en",sec:"tjwodz"},{zones:["de"],id:688,lang:"de",sec:"nrwksg"},{zones:["com.br"],id:690,lang:"com.br",sec:"kpte6m"},{zones:["ru","by","kz"],id:692,lang:"ru",sec:"jbujn0"}],presets:{sender_page:i,prompt_code:(e=o)==null?void 0:(s=e.prompt)==null?void 0:s.code,user_message:(t=o)==null?void 0:t.user_message,original_message:(l=o)==null?void 0:l.original_message,author_message:c,context_messages:r,last_result0:(a=o)==null?void 0:(d=a.current_result)==null?void 0:d[1],language:n.Loc.getMessage("LANGUAGE_ID"),cp_answer:(p=o)==null?void 0:(v=p.current_result)==null?void 0:v[0]}})})).catch((e=>{console.err(e)}))}class ae extends D{execute(){this.copilotTextController.generate()}}class ie extends D{execute(){this.copilotTextController.adjustMenusPosition();this.copilotTextController.generate()}}class oe extends D{execute(){this.copilotTextController.emit("save",new o.BaseEvent({data:{result:this.copilotTextController.getAiResultText(),code:this.copilotTextController.getLastCommandCode()}}));this.copilotTextController.getAnalytics().sendEventSave()}}var re=babelHelpers.classPrivateFieldLooseKey("engineCode");class ne extends D{constructor(e){super(e);Object.defineProperty(this,re,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,re)[re]=e.engineCode}execute(){this.copilotTextController.setSelectedEngine(babelHelpers.classPrivateFieldLooseBase(this,re)[re])}}class ce extends D{execute(){this.copilotTextController.emit("close")}}class be extends D{execute(){this.copilotTextController.emit("show-image-configurator")}}class de{static getMenuItems(e){const{inputField:s,copilotTextController:t,copilotContainer:l}=e;return[{code:"repeat",text:n.Loc.getMessage("AI_COPILOT_COMMAND_REPEAT"),icon:"left-semicircular-anticlockwise-arrow-1",command:new ae({copilotTextController:t}),notHighlight:true},{text:n.Loc.getMessage("AI_COPILOT_COMMAND_EDIT"),code:"edit",icon:"pencil-60",command:new z({inputField:s,copilotTextController:t,copilotContainer:l}),notHighlight:true},{code:"cancel",text:n.Loc.getMessage("AI_COPILOT_COMMAND_CANCEL"),icon:"cross-45",command:new U({copilotTextController:t,inputField:s,copilotContainer:l}),notHighlight:true}]}}class pe{static getMenuItems(e){const{engines:s,selectedEngineCode:t,canEditSettings:l=false,copilotTextController:a}=e;const i={text:n.Loc.getMessage("AI_COPILOT_COMMAND_CONNECT_AI"),disabled:true,icon:c.Actions.PLUS_50};let o=[...ve(s,t,a),i,{separator:true},ue()];if(l){const e=n.Extension.getSettings("ai.copilot.copilot-text-controller").settingsPageLink;o=[...o,{code:"ai_settings",text:n.Loc.getMessage("AI_COPILOT_MENU_ITEM_AI_SETTINGS"),icon:c.Actions.SETTINGS_4,href:e}]}return o}}function ve(e,s,t){return e.map((l=>({code:l.code,text:l.title,icon:c.Main.ROBOT,selected:s===l.code,command:new ne({engines:e,copilotTextController:t,engineCode:l.code})})))}function ue(){return{code:"market",href:"/market/collection/ai_provider_partner_crm/",text:n.Loc.getMessage("AI_COPILOT_SEARCH_IN_MARKET"),icon:c.Main.MARKET_1,arrow:false}}class he{static getMenuItems(e){throw new Error("You must override method: getMenuItems")}}class Pe extends he{static getMenuItems(e,s){var t,l;const{prompts:a,selectedText:i,copilotContainer:o=null}=e;const r=(t=e.inputField)!=null?t:null;const c=(l=e.copilotTextController)!=null?l:null;const b=i?"AI_COPILOT_COMMAND_REPLACE":"AI_COPILOT_COMMAND_SAVE";const d={text:n.Loc.getMessage(b),code:"save",icon:"check",command:new oe({copilotTextController:c}),notHighlight:true};const p={text:n.Loc.getMessage("AI_COPILOT_COMMAND_EDIT"),code:"edit",icon:"pencil-60",command:new z({inputField:r,copilotTextController:c,copilotContainer:o}),notHighlight:true};const v=i?{text:n.Loc.getMessage("AI_COPILOT_COMMAND_ADD_BELOW"),code:"add_below",icon:"download",command:new k({copilotTextController:c}),notHighlight:true}:null;return[d,v,{separator:true},p,...Le(a),{text:n.Loc.getMessage("AI_COPILOT_COMMAND_REPEAT"),code:"repeat",icon:"left-semicircular-anticlockwise-arrow-1",command:new ie({copilotTextController:c}),notHighlight:true},{separator:true},Fe(s,c),{text:n.Loc.getMessage("AI_COPILOT_COMMAND_CANCEL"),code:"cancel",icon:"cross-45",notHighlight:true,command:new U({inputField:r,copilotTextController:c})}].filter((e=>e))}static getMenuItemsForReadonlyResult(e,s,t,l){return[{text:n.Loc.getMessage("AI_COPILOT_COMMAND_COPY"),code:"copy",icon:c.Actions.COPY_PLATES,notHighlight:true,command:{execute(){BX.clipboard.copy(s.getAiResultText());a.UI.Notification.Center.notify({content:n.Loc.getMessage("AI_COPILOT_TEXT_IS_COPIED")});s.getAnalytics().sendEventCopyResult()}}},{text:n.Loc.getMessage("AI_COPILOT_COMMAND_EDIT"),code:"cancel",icon:c.Actions.PENCIL_60,command:new U({inputField:t,copilotTextController:s,copilotContainer:l}),notHighlight:true},{separator:true},Fe(e,s),{text:n.Loc.getMessage("AI_COPILOT_COMMAND_CLOSE"),code:"close",icon:c.Actions.CROSS_45,notHighlight:true,command:new ce({copilotTextController:s})}]}}function Le(e){const s=e.filter((e=>e.workWithResult));return s.map((e=>({text:e.title,code:e.code,icon:e.icon})))}function Fe(e,s){return{code:"feedback",text:n.Loc.getMessage("AI_COPILOT_MENU_ITEM_AI_FEEDBACK"),icon:c.Main.FEEDBACK,notHighlight:true,command:new te({category:e,isBeforeGeneration:false,copilotTextController:s})}}class He extends he{static getMenuItems(e){const{prompts:s,engines:t,selectedEngineCode:l,canEditSettings:a=false,copilotTextController:i,addImageMenuItem:o=false}=e;const r=o?[{code:"image",text:n.Loc.getMessage("AI_COPILOT_MENU_ITEM_AI_IMAGE"),icon:c.Main.MAGIC_IMAGE,command:new be({copilotTextController:i}),labelText:n.Loc.getMessage("AI_COPILOT_MENU_ITEM_LABEL_NEW")}]:[];return[...r,...Be(s,i),...ge(t,l,i,a),{code:"about_open_copilot",text:n.Loc.getMessage("AI_COPILOT_MENU_ITEM_ABOUT_COPILOT"),icon:c.Main.INFO,command:new Q},{code:"feedback",text:n.Loc.getMessage("AI_COPILOT_MENU_ITEM_AI_FEEDBACK"),icon:c.Main.FEEDBACK,command:new te({copilotTextController:i,category:i.getCategory(),isBeforeGeneration:false})}]}}function Be(e,s){return e.map((t=>{let l=null;if(t.required){l=t.type==="simpleTemplate"?new W({copilotTextController:s,commandCode:t.code}):new J({copilotTextController:s,prompts:e,commandCode:t.code})}return{command:l,code:t.code,text:t.title,children:Be(t.children||[],s),separator:t.separator,title:t.title,icon:t.icon,section:t.section}})).filter((e=>e.code!=="zero_prompt"))}function ge(e,s,t,l=false){return[{separator:true,title:n.Loc.getMessage("AI_COPILOT_PROVIDER_MENU_SECTION"),text:n.Loc.getMessage("AI_COPILOT_PROVIDER_MENU_SECTION")},{code:"provider",text:n.Loc.getMessage("AI_COPILOT_MENU_ITEM_OPEN_COPILOT"),children:pe.getMenuItems({engines:e,selectedEngineCode:s,canEditSettings:l,copilotTextController:t}),icon:c.Main.COPILOT_AI}]}class me extends o.EventEmitter{constructor(e){var s;super();this.setEventNamespace("AI.CopilotMenuItem");this.code=e.code;this.text=e.text;this.icon=e.icon;this.href=e.href;this.children=(s=e.children)!=null?s:[];this.onClick=e.onClick;this.disabled=e.disabled}getOptions(){return{code:this.code,text:this.text,icon:this.icon,href:this.href,command:this.onClick,disabled:this.disabled,children:this.children.map((e=>{if(e instanceof me){return e.getOptions()}return e}))}}}class fe extends me{constructor(e){super({text:n.Loc.getMessage("AI_COPILOT_MENU_ITEM_ABOUT_COPILOT"),icon:c.Main.INFO,onClick:()=>{const e="19092894";const s=n.Reflection.getClass("top.BX.Helper");if(s){s.show(`redirect=detail&code=${e}`)}},...e})}}class ye extends me{constructor(e){super({text:n.Loc.getMessage("AI_COPILOT_READONLY_COMMAND_EDIT"),icon:c.Main.EDIT_PENCIL,...e})}}var Ce=babelHelpers.classPrivateFieldLooseKey("getText");class Oe extends me{constructor(e){super({text:n.Loc.getMessage("AI_COPILOT_COMMAND_COPY"),onClick:(e,s,t)=>{const l=BX.clipboard.copy(babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]());if(l===false){return}t.markMenuItemSelected(s.getId());setTimeout((()=>{t.unmarkMenuItemSelected(s.getId())}),800)},...e});Object.defineProperty(this,Ce,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]=e.getText}}var _e=babelHelpers.classPrivateFieldLooseKey("isOpenBeforeGeneration");var Ie=babelHelpers.classPrivateFieldLooseKey("engine");var Ee=babelHelpers.classPrivateFieldLooseKey("openFeedbackForm");class Me extends me{constructor(e){super({code:"feedback",icon:c.Main.FEEDBACK,text:n.Loc.getMessage("AI_COPILOT_MENU_ITEM_AI_FEEDBACK"),onClick:async()=>babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee](),...e});Object.defineProperty(this,Ee,{value:xe});Object.defineProperty(this,_e,{writable:true,value:void 0});Object.defineProperty(this,Ie,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]=e.isBeforeGeneration;babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie]=e.engine}}async function xe(){var e,s,t,l,a;const i=`${babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie].getCategory()},${babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]?"before":"after"}`;let o=null;if(babelHelpers.classPrivateFieldLooseBase(this,_e)[_e]===false){o=await babelHelpers.classPrivateFieldLooseBase(this,Ie)[Ie].getDataForFeedbackForm()}const r=((e=o)==null?void 0:(s=e.context_messages)==null?void 0:s.length)>0?(t=o)==null?void 0:t.context_messages:undefined;const c=(l=(a=o)==null?void 0:a.author_message)!=null?l:undefined;try{var b,d,p,v,u,h,P,L;await n.Runtime.loadExtension(["ui.feedback.form"]);BX.UI.Feedback.Form.open({id:"ai.copilot.feedback",forms:[{zones:["es"],id:684,lang:"es",sec:"svvq1x"},{zones:["en"],id:686,lang:"en",sec:"tjwodz"},{zones:["de"],id:688,lang:"de",sec:"nrwksg"},{zones:["com.br"],id:690,lang:"com.br",sec:"kpte6m"},{zones:["ru","by","kz"],id:692,lang:"ru",sec:"jbujn0"}],presets:{sender_page:i,prompt_code:(b=o)==null?void 0:(d=b.prompt)==null?void 0:d.code,user_message:(p=o)==null?void 0:p.user_message,original_message:(v=o)==null?void 0:v.original_message,author_message:c,context_messages:r,last_result0:(u=o)==null?void 0:(h=u.current_result)==null?void 0:h[1],language:n.Loc.getMessage("LANGUAGE_ID"),cp_answer:(P=o)==null?void 0:(L=P.current_result)==null?void 0:L[0]}})}catch(e){console.error(e)}}class Te extends me{constructor(e){super({icon:c.Main.MARKET_1,text:n.Loc.getMessage("AI_COPILOT_SEARCH_IN_MARKET"),href:"/market/collection/ai_provider_partner_crm/",...e})}}class Ae extends me{constructor(e){super({code:"open-copilot",icon:c.Main.COPILOT_AI,text:n.Loc.getMessage("AI_COPILOT_MENU_ITEM_OPEN_COPILOT"),...e})}}class we extends me{constructor(e){super({icon:c.Main.ROBOT,...e});this.selected=e.selected===true}getOptions(){return{...super.getOptions(),selected:this.selected}}}class Re extends me{constructor(e){super({icon:c.Actions.LEFT_SEMICIRCULAR_ANTICLOCKWISE_ARROW_1,text:n.Loc.getMessage("AI_COPILOT_COMMAND_REPEAT"),...e})}}class je extends me{constructor(e){const s=n.Extension.getSettings("ai.copilot.copilot-text-controller").settingsPageLink;super({text:n.Loc.getMessage("AI_COPILOT_MENU_ITEM_AI_SETTINGS"),icon:c.Main.SETTINGS,href:s,...e})}}class Ke extends me{constructor(e){super({icon:c.Actions.CROSS_45,text:n.Loc.getMessage("AI_COPILOT_COMMAND_CANCEL"),...e})}}class Se extends me{constructor(e){super({icon:c.Actions.PLUS_50,text:n.Loc.getMessage("AI_COPILOT_COMMAND_CONNECT_AI"),disabled:true,...e})}}var De=babelHelpers.classPrivateFieldLooseKey("engine");var ke=babelHelpers.classPrivateFieldLooseKey("inputField");var Ne=babelHelpers.classPrivateFieldLooseKey("resultField");var Ge=babelHelpers.classPrivateFieldLooseKey("copilotContainer");var Ue=babelHelpers.classPrivateFieldLooseKey("category");var Xe=babelHelpers.classPrivateFieldLooseKey("readonly");var qe=babelHelpers.classPrivateFieldLooseKey("selectedEngineCode");var ze=babelHelpers.classPrivateFieldLooseKey("selectedPromptCodeWithSimpleTemplate");var Ve=babelHelpers.classPrivateFieldLooseKey("generalMenu");var We=babelHelpers.classPrivateFieldLooseKey("resultMenu");var $e=babelHelpers.classPrivateFieldLooseKey("errorMenu");var Ye=babelHelpers.classPrivateFieldLooseKey("selectedText");var Je=babelHelpers.classPrivateFieldLooseKey("context");var Qe=babelHelpers.classPrivateFieldLooseKey("resultStack");var Ze=babelHelpers.classPrivateFieldLooseKey("currentGenerateRequestId");var es=babelHelpers.classPrivateFieldLooseKey("errorsCount");var ss=babelHelpers.classPrivateFieldLooseKey("generationResultText");var ts=babelHelpers.classPrivateFieldLooseKey("warningField");var ls=babelHelpers.classPrivateFieldLooseKey("addImageMenuItem");var as=babelHelpers.classPrivateFieldLooseKey("copilotInputEvents");var is=babelHelpers.classPrivateFieldLooseKey("CopilotMenu");var os=babelHelpers.classPrivateFieldLooseKey("copilotMenuEvents");var rs=babelHelpers.classPrivateFieldLooseKey("analytics");var ns=babelHelpers.classPrivateFieldLooseKey("currentRole");var cs=babelHelpers.classPrivateFieldLooseKey("rolesDialog");var bs=babelHelpers.classPrivateFieldLooseKey("inputFieldContainerClickEventHandler");var ds=babelHelpers.classPrivateFieldLooseKey("inputFieldSubmitEventHandler");var ps=babelHelpers.classPrivateFieldLooseKey("inputFieldInputEventHandler");var vs=babelHelpers.classPrivateFieldLooseKey("inputFieldGoOutFromBottomEventHandler");var us=babelHelpers.classPrivateFieldLooseKey("inputFieldStartRecordingEventHandler");var hs=babelHelpers.classPrivateFieldLooseKey("inputFieldStopRecordingEventHandler");var Ps=babelHelpers.classPrivateFieldLooseKey("inputFieldCancelLoadingEventHandler");var Ls=babelHelpers.classPrivateFieldLooseKey("inputFieldAdjustHeightEventHandler");var Fs=babelHelpers.classPrivateFieldLooseKey("toolingDataByCategory");var Hs=babelHelpers.classPrivateFieldLooseKey("subscribeToInputFieldEvents");var Bs=babelHelpers.classPrivateFieldLooseKey("unsubscribeToInputFieldEvents");var gs=babelHelpers.classPrivateFieldLooseKey("handleInputContainerClickEvent");var ms=babelHelpers.classPrivateFieldLooseKey("handleInputFieldGoOutFromBottomEvent");var fs=babelHelpers.classPrivateFieldLooseKey("handleInputFieldInputEvent");var ys=babelHelpers.classPrivateFieldLooseKey("handleInputFieldStartRecordingEvent");var Cs=babelHelpers.classPrivateFieldLooseKey("handleInputFieldStopRecordingEvent");var Os=babelHelpers.classPrivateFieldLooseKey("handleInputFieldCancelLoadingEvent");var _s=babelHelpers.classPrivateFieldLooseKey("handleInputFieldAdjustHeightEvent");var Is=babelHelpers.classPrivateFieldLooseKey("handleInputFieldSubmitEvent");var Es=babelHelpers.classPrivateFieldLooseKey("adjustMenus");var Ms=babelHelpers.classPrivateFieldLooseKey("getTooling");var xs=babelHelpers.classPrivateFieldLooseKey("getSelectedEngineCode");var Ts=babelHelpers.classPrivateFieldLooseKey("initGeneralMenu");var As=babelHelpers.classPrivateFieldLooseKey("showRolesDialog");var ws=babelHelpers.classPrivateFieldLooseKey("getPromptTitleByCommandFromPrompts");var Rs=babelHelpers.classPrivateFieldLooseKey("setEnginePayload");var js=babelHelpers.classPrivateFieldLooseKey("isCommandRequiredUserMessage");var Ks=babelHelpers.classPrivateFieldLooseKey("isCommandRequiredContextMessage");var Ss=babelHelpers.classPrivateFieldLooseKey("getPromptByCode");var Ds=babelHelpers.classPrivateFieldLooseKey("setSelectedEngine");var ks=babelHelpers.classPrivateFieldLooseKey("addResultToStack");var Ns=babelHelpers.classPrivateFieldLooseKey("handleGenerateError");var Gs=babelHelpers.classPrivateFieldLooseKey("initErrorMenu");var Us=babelHelpers.classPrivateFieldLooseKey("openResultMenu");var Xs=babelHelpers.classPrivateFieldLooseKey("initResultMenu");var qs=babelHelpers.classPrivateFieldLooseKey("getRoleInfoForMenu");var zs=babelHelpers.classPrivateFieldLooseKey("useRole");var Vs=babelHelpers.classPrivateFieldLooseKey("getResultMenuItems");class Ws extends o.EventEmitter{constructor(e){super();Object.defineProperty(this,Vs,{value:ft});Object.defineProperty(this,zs,{value:mt});Object.defineProperty(this,qs,{value:gt});Object.defineProperty(this,Xs,{value:Bt});Object.defineProperty(this,Us,{value:Ht});Object.defineProperty(this,Gs,{value:Ft});Object.defineProperty(this,Ns,{value:Lt});Object.defineProperty(this,ks,{value:Pt});Object.defineProperty(this,Ds,{value:ht});Object.defineProperty(this,Ss,{value:ut});Object.defineProperty(this,Ks,{value:vt});Object.defineProperty(this,js,{value:pt});Object.defineProperty(this,Rs,{value:dt});Object.defineProperty(this,ws,{value:bt});Object.defineProperty(this,As,{value:ct});Object.defineProperty(this,Ts,{value:nt});Object.defineProperty(this,xs,{value:rt});Object.defineProperty(this,Ms,{value:ot});Object.defineProperty(this,Es,{value:it});Object.defineProperty(this,Is,{value:at});Object.defineProperty(this,_s,{value:lt});Object.defineProperty(this,Os,{value:tt});Object.defineProperty(this,Cs,{value:st});Object.defineProperty(this,ys,{value:et});Object.defineProperty(this,fs,{value:Zs});Object.defineProperty(this,ms,{value:Qs});Object.defineProperty(this,gs,{value:Js});Object.defineProperty(this,Bs,{value:Ys});Object.defineProperty(this,Hs,{value:$s});Object.defineProperty(this,De,{writable:true,value:void 0});Object.defineProperty(this,ke,{writable:true,value:void 0});Object.defineProperty(this,Ne,{writable:true,value:void 0});Object.defineProperty(this,Ge,{writable:true,value:void 0});Object.defineProperty(this,Ue,{writable:true,value:void 0});Object.defineProperty(this,Xe,{writable:true,value:void 0});Object.defineProperty(this,qe,{writable:true,value:void 0});Object.defineProperty(this,ze,{writable:true,value:void 0});Object.defineProperty(this,Ve,{writable:true,value:void 0});Object.defineProperty(this,We,{writable:true,value:void 0});Object.defineProperty(this,$e,{writable:true,value:void 0});Object.defineProperty(this,Ye,{writable:true,value:void 0});Object.defineProperty(this,Je,{writable:true,value:void 0});Object.defineProperty(this,Qe,{writable:true,value:[]});Object.defineProperty(this,Ze,{writable:true,value:void 0});Object.defineProperty(this,es,{writable:true,value:0});Object.defineProperty(this,ss,{writable:true,value:null});Object.defineProperty(this,ts,{writable:true,value:void 0});Object.defineProperty(this,ls,{writable:true,value:void 0});Object.defineProperty(this,as,{writable:true,value:void 0});Object.defineProperty(this,is,{writable:true,value:void 0});Object.defineProperty(this,os,{writable:true,value:void 0});Object.defineProperty(this,rs,{writable:true,value:void 0});Object.defineProperty(this,ns,{writable:true,value:void 0});Object.defineProperty(this,cs,{writable:true,value:void 0});Object.defineProperty(this,bs,{writable:true,value:void 0});Object.defineProperty(this,ds,{writable:true,value:void 0});Object.defineProperty(this,ps,{writable:true,value:void 0});Object.defineProperty(this,vs,{writable:true,value:void 0});Object.defineProperty(this,us,{writable:true,value:void 0});Object.defineProperty(this,hs,{writable:true,value:void 0});Object.defineProperty(this,Ps,{writable:true,value:void 0});Object.defineProperty(this,Ls,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,De)[De]=e.engine;babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]=e.inputField;babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]=e.category;babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne]=e.resultField;babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]=e.readonly===true;babelHelpers.classPrivateFieldLooseBase(this,ts)[ts]=e.warningField;babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]=e.context;babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]=e.selectedText;babelHelpers.classPrivateFieldLooseBase(this,ls)[ls]=e.addImageMenuItem===true;babelHelpers.classPrivateFieldLooseBase(this,as)[as]=e.copilotInputEvents;babelHelpers.classPrivateFieldLooseBase(this,is)[is]=e.copilotMenu;babelHelpers.classPrivateFieldLooseBase(this,os)[os]=e.copilotMenuEvents;babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]=e.analytics;babelHelpers.classPrivateFieldLooseBase(this,bs)[bs]=babelHelpers.classPrivateFieldLooseBase(this,gs)[gs].bind(this);babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]=babelHelpers.classPrivateFieldLooseBase(this,Is)[Is].bind(this);babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]=babelHelpers.classPrivateFieldLooseBase(this,fs)[fs].bind(this);babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]=babelHelpers.classPrivateFieldLooseBase(this,ms)[ms].bind(this);babelHelpers.classPrivateFieldLooseBase(this,us)[us]=babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].bind(this);babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]=babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs].bind(this);babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]=babelHelpers.classPrivateFieldLooseBase(this,Os)[Os].bind(this);babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]=babelHelpers.classPrivateFieldLooseBase(this,_s)[_s].bind(this);this.setEventNamespace("AI.Copilot.TextController")}setSelectedPromptCodeWithSimpleTemplate(e){babelHelpers.classPrivateFieldLooseBase(this,ze)[ze]=e}getSelectedPromptCodeWithSimpleTemplate(){return babelHelpers.classPrivateFieldLooseBase(this,ze)[ze]}setCopilotContainer(e){babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge]=e}setSelectedText(e){if(n.Type.isString(e)){babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]=e}}getSelectedText(){return babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]}setContext(e){babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]=e}getContext(){return babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]}setSelectedEngine(e){babelHelpers.classPrivateFieldLooseBase(this,Ds)[Ds](e)}async init(){if(babelHelpers.classPrivateFieldLooseBase(Ws,Fs)[Fs][babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]]===undefined){babelHelpers.classPrivateFieldLooseBase(Ws,Fs)[Fs][babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]]=babelHelpers.classPrivateFieldLooseBase(this,De)[De].getTooling("text")}const e=await babelHelpers.classPrivateFieldLooseBase(Ws,Fs)[Fs][babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]];babelHelpers.classPrivateFieldLooseBase(Ws,Fs)[Fs][babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]]=e;babelHelpers.classPrivateFieldLooseBase(this,qe)[qe]=babelHelpers.classPrivateFieldLooseBase(this,xs)[xs](e.data.engines);babelHelpers.classPrivateFieldLooseBase(this,ns)[ns]=e.data.role}openGeneralMenu(){if(!babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve]){babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]()}babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].getPopup().subscribeFromOptions({onBeforeShow:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].disable()}},onAfterShow:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]===false){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].enable();babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].focus()}}});babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].setBindElement(babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge],{top:8});babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].open();babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].show()}clearResultStack(){babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe]=[]}showMenu(){var e,s,t;(e=babelHelpers.classPrivateFieldLooseBase(this,We)[We])==null?void 0:e.show();(s=babelHelpers.classPrivateFieldLooseBase(this,$e)[$e])==null?void 0:s.show();(t=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])==null?void 0:t.show()}getOpenMenu(){var e,s,t;if((e=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])!=null&&e.isShown()){return babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve]}if((s=babelHelpers.classPrivateFieldLooseBase(this,$e)[$e])!=null&&s.isShown()){return babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]}if((t=babelHelpers.classPrivateFieldLooseBase(this,We)[We])!=null&&t.isShown()){return babelHelpers.classPrivateFieldLooseBase(this,We)[We]}return null}getAiResultText(){return babelHelpers.classPrivateFieldLooseBase(this,ss)[ss]}getCategory(){return babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]}getLastCommandCode(){var e,s;return((e=babelHelpers.classPrivateFieldLooseBase(this,De)[De].getPayload().getRawData())==null?void 0:(s=e.prompt)==null?void 0:s.code)||""}isContainsElem(e){var s,t,l;return((s=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])==null?void 0:s.contains(e))||((t=babelHelpers.classPrivateFieldLooseBase(this,$e)[$e])==null?void 0:t.contains(e))||((l=babelHelpers.classPrivateFieldLooseBase(this,We)[We])==null?void 0:l.contains(e))}generateWithRequiredUserMessage(e){babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]({command:e,markers:{originalMessage:babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]||babelHelpers.classPrivateFieldLooseBase(this,Je)[Je],userMessage:babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].getValue()}});this.setSelectedPromptCodeWithSimpleTemplate(e);const s=babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss](babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]().prompts,e);if(s){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].setHtmlContent(s.text)}babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].focus(true)}generateWithoutRequiredUserMessage(e,s){babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]({command:e,markers:{originalMessage:babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]||babelHelpers.classPrivateFieldLooseBase(this,Je)[Je],userMessage:babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].getValue()}});const t=babelHelpers.classPrivateFieldLooseBase(this,ws)[ws](s,e);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].setValue(t);this.generate()}hideAllMenus(){var e,s,t,l;(e=babelHelpers.classPrivateFieldLooseBase(this,cs)[cs])==null?void 0:e.hide();babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]=null;(s=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])==null?void 0:s.hide();(t=babelHelpers.classPrivateFieldLooseBase(this,$e)[$e])==null?void 0:t.hide();(l=babelHelpers.classPrivateFieldLooseBase(this,We)[We])==null?void 0:l.hide()}destroyAllMenus(){var e,s,t,l;(e=babelHelpers.classPrivateFieldLooseBase(this,cs)[cs])==null?void 0:e.hide();babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]=null;(s=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])==null?void 0:s.close();(t=babelHelpers.classPrivateFieldLooseBase(this,$e)[$e])==null?void 0:t.close();(l=babelHelpers.classPrivateFieldLooseBase(this,We)[We])==null?void 0:l.close();babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve]=null;babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]=null;babelHelpers.classPrivateFieldLooseBase(this,We)[We]=null}start(){this.openGeneralMenu();babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]()}isFirstLaunch(){return babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]().first_launch}finish(){this.reset();this.destroyAllMenus();babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]()}reset(){var e;babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]="";babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]="";babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]=-1;babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe]=[];(e=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke])==null?void 0:e.clear()}isInitFinished(){return Boolean(babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]())}isPromptsLoaded(){var e;return Boolean((e=babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]())==null?void 0:e.prompts)}clearResultField(){babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne].clearResult();babelHelpers.classPrivateFieldLooseBase(this,Es)[Es]()}isReadonly(){return babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]===true}async getDataForFeedbackForm(){try{const e=await babelHelpers.classPrivateFieldLooseBase(this,De)[De].getFeedbackData();const s=e.data.context_messages;const t=e.data.original_message;const l=babelHelpers.classPrivateFieldLooseBase(this,De)[De].getPayload();return l?{context_messages:s,author_message:t,...l.getRawData(),...l.getMarkers()}:{}}catch(e){console.error(e);const s=babelHelpers.classPrivateFieldLooseBase(this,De)[De].getPayload();return s?{...s.getRawData(),...s.getMarkers()}:{}}}async generate(){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].startGenerating();n.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge],"--error");this.destroyAllMenus();const e=Math.round(Math.random()*1e4);babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]=e;try{var s;const a=await babelHelpers.classPrivateFieldLooseBase(this,De)[De].textCompletions();const i=a.data.result||a.data.last.data;if(babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]!==e){return}babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].finishGenerating();babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].disable();babelHelpers.classPrivateFieldLooseBase(this,ss)[ss]=a.data.result;if(babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]||babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]){var t,l;(t=babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne])==null?void 0:t.clearResult();(l=babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne])==null?void 0:l.addResult(babelHelpers.classPrivateFieldLooseBase(this,ss)[ss])}else{this.emit("aiResult",{result:i})}babelHelpers.classPrivateFieldLooseBase(this,ks)[ks](i);(s=babelHelpers.classPrivateFieldLooseBase(this,ts)[ts])==null?void 0:s.expand();babelHelpers.classPrivateFieldLooseBase(this,Us)[Us]()}catch(s){if(babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]!==e){return}this.getAnalytics().sendEventError();babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns](s)}}adjustMenusPosition(){var e,s,t;(e=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])==null?void 0:e.adjustPosition();(s=babelHelpers.classPrivateFieldLooseBase(this,$e)[$e])==null?void 0:s.adjustPosition();(t=babelHelpers.classPrivateFieldLooseBase(this,We)[We])==null?void 0:t.adjustPosition()}getAnalytics(){if(!babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]||babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]===""){babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].setTypeTextNew()}else if(babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]){babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].setTypeTextEdit()}else{babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].setTypeTextReply()}if(babelHelpers.classPrivateFieldLooseBase(this,De)[De]&&babelHelpers.classPrivateFieldLooseBase(this,De)[De].getPayload()){babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].setP1("prompt",this.getLastCommandCode()).setP2("provider",babelHelpers.classPrivateFieldLooseBase(this,qe)[qe])}const e=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].usedTextInput();const s=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].usedVoiceRecord();if(e&&s){babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].setContextTypeFromTextAndAudio()}else if(e){babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].setContextTypeFromText()}else if(s){babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].setContextTypeFromAudio()}if(this.getSelectedText()){babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].setContextElementPopupButton()}else{babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].setContextElementSpaceButton()}if(babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]){if(this.getSelectedText()){babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].setContextElementReadonlyQuote()}else{babelHelpers.classPrivateFieldLooseBase(this,rs)[rs].setContextElementReadonlyCommon()}}return babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]}}function $s(){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].subscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].containerClick,babelHelpers.classPrivateFieldLooseBase(this,bs)[bs]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].subscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].submit,babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].subscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].input,babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].subscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].goOutFromBottom,babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].subscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].startRecording,babelHelpers.classPrivateFieldLooseBase(this,us)[us]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].subscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].stopRecording,babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].subscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].cancelLoading,babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].subscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].adjustHeight,babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls])}function Ys(){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].unsubscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].containerClick,babelHelpers.classPrivateFieldLooseBase(this,bs)[bs]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].unsubscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].submit,babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].unsubscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].input,babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].unsubscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].goOutFromBottom,babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].unsubscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].startRecording,babelHelpers.classPrivateFieldLooseBase(this,us)[us]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].unsubscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].stopRecording,babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].unsubscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].cancelLoading,babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]);babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].unsubscribe(babelHelpers.classPrivateFieldLooseBase(this,as)[as].adjustHeight,babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls])}function Js(){var e;if(babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].isDisabled()&&(e=babelHelpers.classPrivateFieldLooseBase(this,We)[We])!=null&&e.isShown()&&babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]===false){const e=new z({copilotTextController:this,inputField:babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]});e.execute()}}function Qs(){babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].enableArrowsKey()}function Zs(e){var s;const t=e.getData();if(!t){babelHelpers.classPrivateFieldLooseBase(this,ze)[ze]=null}(s=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])==null?void 0:s.disableArrowsKey();requestAnimationFrame((()=>{babelHelpers.classPrivateFieldLooseBase(this,Es)[Es]()}))}function et(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])==null?void 0:e.hide()}function st(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])==null?void 0:e.show()}function tt(){babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]=-1;babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].finishGenerating();babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].focus();if(babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].clear()}this.openGeneralMenu()}function lt(){setTimeout((()=>{}),150)}function at(){const e=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].getValue();if(!e){return}babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs]({command:babelHelpers.classPrivateFieldLooseBase(this,ze)[ze]||"zero_prompt",markers:{userMessage:e,originalMessage:babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]||babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]||"",current_result:babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe]}});this.generate()}function it(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])==null?void 0:e.adjustPosition()}function ot(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(Ws,Fs)[Fs][babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue]])==null?void 0:e.data}function rt(e){var s;const t=e.find((e=>e.selected));return(t==null?void 0:t.code)||((s=e[0])==null?void 0:s.code)}function nt(){const{prompts:e,engines:s,permissions:t}=babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]();babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve]=new(babelHelpers.classPrivateFieldLooseBase(this,is)[is])({roleInfo:babelHelpers.classPrivateFieldLooseBase(this,qs)[qs]({withOpenRolesDialogAction:true,subtitle:n.Loc.getMessage("AI_COPILOT_GENERAL_MENU_ROLE_SUBTITLE")}),items:He.getMenuItems({prompts:e,engines:s,selectedEngineCode:babelHelpers.classPrivateFieldLooseBase(this,qe)[qe],canEditSettings:t.can_edit_settings===true,copilotTextController:this,addImageMenuItem:babelHelpers.classPrivateFieldLooseBase(this,ls)[ls]}),keyboardControlOptions:{clearHighlightAfterType:babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]===false,canGoOutFromTop:babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]===false,highlightFirstItemAfterShow:babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]===true},forceTop:true,cacheable:false});babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].subscribe(babelHelpers.classPrivateFieldLooseBase(this,os)[os].clearHighlight,(()=>{var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])==null?void 0:e.disableArrowsKey();babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].enableEnterAndArrows()}));babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].subscribe(babelHelpers.classPrivateFieldLooseBase(this,os)[os].highlightMenuItem,(()=>{var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])==null?void 0:e.enableArrowsKey();babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].disableEnterAndArrows()}))}async function ct(){var e;if(babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]){return Promise.resolve()}await n.Runtime.loadExtension("ui.vue3");const{RolesDialog:s,RolesDialogEvents:t}=await n.Runtime.loadExtension("ai.roles-dialog");const l={moduleId:babelHelpers.classPrivateFieldLooseBase(this,De)[De].getModuleId(),contextId:babelHelpers.classPrivateFieldLooseBase(this,De)[De].getContextId(),selectedRoleCode:(e=babelHelpers.classPrivateFieldLooseBase(this,ns)[ns])==null?void 0:e.code,title:n.Loc.getMessage("AI_COPILOT_ROLES_DIALOG_TITLE")};babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]=new s(l);babelHelpers.classPrivateFieldLooseBase(this,cs)[cs].subscribe(t.SELECT_ROLE,(e=>{var s,t;const l=e.getData().role;babelHelpers.classPrivateFieldLooseBase(this,ns)[ns]=l;(s=babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve])==null?void 0:s.updateRoleInfo(l);if((t=babelHelpers.classPrivateFieldLooseBase(this,cs)[cs])!=null&&t.hide){babelHelpers.classPrivateFieldLooseBase(this,cs)[cs].hide()}}));babelHelpers.classPrivateFieldLooseBase(this,cs)[cs].subscribe(t.HIDE,(()=>{babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]=null}));return babelHelpers.classPrivateFieldLooseBase(this,cs)[cs].show()}function bt(e,s){let t="";for(const l of e){if(l.code===s){t=l.title;break}const e=l.children;if(e&&e.length>0){const a=babelHelpers.classPrivateFieldLooseBase(this,ws)[ws](e,s);if(a){t=`${l.title} - ${a}`;break}}}return t}function dt(e={}){var s;const l=e.command||"";const a=e.markers||{};const i=a.userMessage||undefined;const o=a.originalMessage||undefined;const r=new t.Text({prompt:{code:l},engineCode:babelHelpers.classPrivateFieldLooseBase(this,qe)[qe],roleCode:babelHelpers.classPrivateFieldLooseBase(this,zs)[zs]()?(s=babelHelpers.classPrivateFieldLooseBase(this,ns)[ns])==null?void 0:s.code:undefined});r.setMarkers({original_message:babelHelpers.classPrivateFieldLooseBase(this,Ks)[Ks](l)?o:undefined,user_message:babelHelpers.classPrivateFieldLooseBase(this,js)[js](l)?i:undefined,current_result:babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe]});babelHelpers.classPrivateFieldLooseBase(this,De)[De].setPayload(r);const n=this.getAnalytics();babelHelpers.classPrivateFieldLooseBase(this,De)[De].setAnalyticParameters({category:n.getCategory(),type:n.getType(),c_sub_section:n.getCSubSection(),c_element:n.getCElement()})}function pt(e){const s=babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]().prompts;const t=babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss](s,e);if(!t){return false}return t.required.user_message}function vt(e){const s=babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]().prompts;const t=babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss](s,e);if(!t){return false}return t.required.context_message}function ut(e,s){let t=null;e.some((e=>{var l;if(e.code===s){t=e;return true}return(l=e.children)==null?void 0:l.some((e=>{if(e.code===s){t=e;return true}return false}))}));return t}function ht(e){const s=babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]();babelHelpers.classPrivateFieldLooseBase(this,qe)[qe]=e;babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].replaceMenuItemSubmenu({code:"provider",children:pe.getMenuItems({engines:s.engines,selectedEngineCode:e,canEditSettings:s.permissions.can_edit_settings,copilotTextController:this})})}function Pt(e){const s=3;babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe].unshift(e);if(babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe].length>s){babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe].pop()}}function Lt(e){var t,l;const a=4;const o=e==null?void 0:(t=e.errors)==null?void 0:(l=t[0])==null?void 0:l.code;if(e instanceof Error){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].setErrors([{message:e.message,code:-1,customData:{}}])}else if(n.Type.isString(e)){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].setErrors([{message:e,code:-1,customData:{}}])}else if(o===100&&babelHelpers.classPrivateFieldLooseBase(this,es)[es]<a){babelHelpers.classPrivateFieldLooseBase(this,es)[es]+=1;this.generate();return}else{switch(o){case"AI_ENGINE_ERROR_OTHER":{const s=new te({category:this.getCategory(),isBeforeGeneration:false,copilotTextController:this});e.errors[0].customData={clickHandler:()=>s.execute()};babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].setErrors([{code:"AI_ENGINE_ERROR_OTHER",message:n.Loc.getMessage("AI_COPILOT_ERROR_OTHER"),customData:{clickHandler:()=>s.execute()}}]);break}case"AI_ENGINE_ERROR_PROVIDER":{babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].setErrors([{code:"AI_ENGINE_ERROR_PROVIDER",message:n.Loc.getMessage("AI_COPILOT_ERROR_PROVIDER")}]);break}case"LIMIT_IS_EXCEEDED_BAAS":{break}default:{babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].setErrors(e.errors)}}}babelHelpers.classPrivateFieldLooseBase(this,es)[es]=0;babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].finishGenerating();if(o==="LIMIT_IS_EXCEEDED_BAAS"){babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].disable();setTimeout((()=>{const e=s.PopupManager.getPopups().find((e=>e.getId().includes("baas")));if(!e){return}const t=e.autoHide;e.subscribe("onClose",(s=>{e.setAutoHide(t)}));e==null?void 0:e.setAutoHide(false)}),200)}else if(o==="LIMIT_IS_EXCEEDED_MONTHLY"||o==="LIMIT_IS_EXCEEDED_DAILY"||o==="SERVICE_IS_NOT_AVAILABLE_BY_TARIFF"){this.emit("close")}else{babelHelpers.classPrivateFieldLooseBase(this,Gs)[Gs]();babelHelpers.classPrivateFieldLooseBase(this,$e)[$e].adjustPosition();babelHelpers.classPrivateFieldLooseBase(this,$e)[$e].open();n.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge],"--error")}i.AjaxErrorHandler.handleTextGenerateError({baasOptions:{bindElement:babelHelpers.classPrivateFieldLooseBase(this,ke)[ke].getContainer().querySelector(".ai__copilot_input-field-baas-point"),context:babelHelpers.classPrivateFieldLooseBase(this,De)[De].getContextId(),useAngle:false},errorCode:o})}function Ft(){babelHelpers.classPrivateFieldLooseBase(this,$e)[$e]=new(babelHelpers.classPrivateFieldLooseBase(this,is)[is])({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge],offsetTop:8,items:de.getMenuItems({inputField:babelHelpers.classPrivateFieldLooseBase(this,ke)[ke],copilotTextController:this,copilotContainer:babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge]}),keyboardControlOptions:{canGoOutFromTop:false,highlightFirstItemAfterShow:true,clearHighlightAfterType:false}});babelHelpers.classPrivateFieldLooseBase(this,$e)[$e].setBindElement(babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge],{top:8})}function Ht(){if(!babelHelpers.classPrivateFieldLooseBase(this,We)[We]){babelHelpers.classPrivateFieldLooseBase(this,Xs)[Xs]()}babelHelpers.classPrivateFieldLooseBase(this,We)[We].setBindElement(babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge],{top:8});babelHelpers.classPrivateFieldLooseBase(this,We)[We].open()}function Bt(){const e=babelHelpers.classPrivateFieldLooseBase(this,Vs)[Vs]();babelHelpers.classPrivateFieldLooseBase(this,We)[We]=new(babelHelpers.classPrivateFieldLooseBase(this,is)[is])({items:e,roleInfo:babelHelpers.classPrivateFieldLooseBase(this,qs)[qs]({withOpenRolesDialogAction:false,subtitle:n.Loc.getMessage("AI_COPILOT_RESULT_MENU_ROLE_SUBTITLE")}),keyboardControlOptions:{clearHighlightAfterType:false,canGoOutFromTop:false,highlightFirstItemAfterShow:true},cacheable:false})}function gt(e){if(babelHelpers.classPrivateFieldLooseBase(this,zs)[zs]()===false){return undefined}const s={role:babelHelpers.classPrivateFieldLooseBase(this,ns)[ns],subtitle:e.subtitle};if(e.withOpenRolesDialogAction){s.onclick=babelHelpers.classPrivateFieldLooseBase(this,As)[As].bind(this)}return s}function mt(){return n.Extension.getSettings("ai.copilot.copilot-text-controller").hasRoleSelect===true}function ft(){const e=babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms]().prompts;if(babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]){return Pe.getMenuItemsForReadonlyResult(babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue],this,babelHelpers.classPrivateFieldLooseBase(this,ke)[ke],babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge])}return Pe.getMenuItems({prompts:e,selectedText:babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye],copilotTextController:this,inputField:babelHelpers.classPrivateFieldLooseBase(this,ke)[ke],copilotContainer:babelHelpers.classPrivateFieldLooseBase(this,Ge)[Ge]},babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue])}Object.defineProperty(Ws,Fs,{writable:true,value:{}});e.CopilotTextControllerEngine=E;e.CopilotTextController=Ws;e.AboutCopilotMenuItem=fe;e.ChangeRequestMenuItem=ye;e.CopyResultMenuItem=Oe;e.FeedbackMenuItem=Me;e.MarketMenuItem=Te;e.OpenCopilotMenuItem=Ae;e.ProviderMenuItem=we;e.SettingsMenuItem=je;e.CancelCopilotMenuItem=Ke;e.RepeatCopilotMenuItem=Re;e.ConnectModelMenuItem=Se})(this.BX.AI=this.BX.AI||{},BX.Main,BX.AI,BX.UI.Feedback,BX,BX.AI,BX.Event,BX,BX,BX.UI.IconSet);
//# sourceMappingURL=copilot-text-controller.bundle.map.js