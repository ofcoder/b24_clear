{"version":3,"file":"copilot-image-controller.bundle.js","sources":["../src/menu-items-commands/base-command.js","../src/menu-items-commands/cancel-image-command.js","../src/menu-items-commands/place-image-under-command.js","../src/menu-items-commands/place-image-above-command.js","../src/menu-items-commands/save-image-command.js","../src/menu-items-commands/repeat-image-completion.js","../src/menu-items/error-menu-items.js","../src/menu-items/result-menu-items.js","../src/image-configurator-styles.js","../src/image-configurator-params-config.js","../src/image-configurator-params.js","../src/image-configurator.js","../src/image-configurator-popup.js","../src/copilot-image-controller.js"],"sourcesContent":["import type { CopilotImageController } from 'ai.copilot.copilot-image-controller';\n\nexport type BaseCommandOptions = {\n\tcopilotImageController: CopilotImageController;\n}\n\nexport class BaseCommand\n{\n\tcopilotImageController: CopilotImageController;\n\tconstructor(options: BaseCommandOptions)\n\t{\n\t\tthis.copilotImageController = options.copilotImageController;\n\t}\n\n\texecute(): void\n\t{\n\t\tthrow new Error('You must implement this method!');\n\t}\n}\n","import { Dom } from 'main.core';\nimport type { CopilotInput } from 'ai.copilot';\nimport type { BaseCommandOptions } from './base-command';\nimport { BaseCommand } from './base-command';\n\ntype CancelImageCommandOptions = {\n\tinputField: CopilotInput;\n\tcopilotContainer: HTMLElement;\n} | BaseCommandOptions;\n\nexport class CancelImageCommand extends BaseCommand\n{\n\t#inputField: CopilotInput;\n\t#copilotContainer: HTMLElement;\n\n\tconstructor(options: CancelImageCommandOptions)\n\t{\n\t\tsuper(options);\n\n\t\tthis.#copilotContainer = options.copilotContainer;\n\t\tthis.#inputField = options.inputField;\n\t}\n\n\texecute()\n\t{\n\t\tthis.copilotImageController.emit('cancel');\n\t\tthis.copilotImageController.destroyAllMenus();\n\t\tthis.copilotImageController.showImageConfigurator();\n\t\tthis.#inputField.clearErrors();\n\t\tthis.#inputField.clear();\n\t\tthis.#inputField.enable();\n\t\tDom.removeClass(this.#copilotContainer, '--error');\n\t\t// this.#selectedCommand = null;\n\t\t// this.#resultStack = [];\n\t\tthis.#inputField.focus();\n\t\tthis.copilotImageController.getAnalytics().sendEventCancel();\n\t}\n}\n","import { BaseCommand } from './base-command';\n\nexport class PlaceImageUnderCommand extends BaseCommand\n{\n\texecute()\n\t{\n\t\tthis.copilotImageController.emit('place-under');\n\t}\n}\n","import { BaseCommand } from './base-command';\n\nexport class PlaceImageAboveCommand extends BaseCommand\n{\n\texecute()\n\t{\n\t\tthis.copilotImageController.emit('place-above');\n\t}\n}\n","import { BaseEvent } from 'main.core.events';\nimport { BaseCommand } from './base-command';\n\nexport type saveEventData = {\n\timageUrl: string | null;\n}\n\nexport class SaveImageCommand extends BaseCommand\n{\n\texecute()\n\t{\n\t\tthis.copilotImageController.emit('save', new BaseEvent({\n\t\t\tdata: {\n\t\t\t\timageUrl: this.copilotImageController.getResultImageUrl(),\n\t\t\t},\n\t\t}));\n\n\t\tthis.copilotImageController.getAnalytics().sendEventSave();\n\t}\n}\n","import { BaseCommand } from './base-command';\n\nexport class RepeatImageCompletion extends BaseCommand\n{\n\texecute()\n\t{\n\t\tthis.copilotImageController.completions();\n\t}\n}\n","import type { CopilotImageController } from 'ai.copilot.copilot-image-controller';\nimport type { CopilotInput, CopilotMenuItem } from 'ai.copilot';\nimport { Loc } from 'main.core';\nimport { RepeatImageCompletion, CancelImageCommand } from '../menu-items-commands/index';\n\ntype CopilotErrorMenuItemsOptions = {\n\tcopilotImageController: CopilotImageController;\n\tinputField: CopilotInput;\n\tcopilotContainer: HTMLElement;\n}\n\nexport class ImageConfiguratorErrorMenuItems\n{\n\tstatic getMenuItems(options: CopilotErrorMenuItemsOptions): CopilotMenuItem[]\n\t{\n\t\tconst copilotImageController = options.copilotImageController;\n\t\tconst inputField = options.inputField;\n\t\tconst copilotContainer = options.copilotContainer;\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tcode: 'repeat',\n\t\t\t\ttext: Loc.getMessage('AI_COPILOT_COMMAND_REPEAT'),\n\t\t\t\ticon: 'left-semicircular-anticlockwise-arrow-1',\n\t\t\t\tnotHighlight: true,\n\t\t\t\tcommand: new RepeatImageCompletion({\n\t\t\t\t\tcopilotImageController,\n\t\t\t\t}),\n\t\t\t},\n\t\t\t{\n\t\t\t\tcode: 'cancel',\n\t\t\t\ttext: Loc.getMessage('AI_COPILOT_COMMAND_CANCEL'),\n\t\t\t\ticon: 'cross-45',\n\t\t\t\tnotHighlight: true,\n\t\t\t\tcommand: new CancelImageCommand({\n\t\t\t\t\tcopilotImageController,\n\t\t\t\t\tinputField,\n\t\t\t\t\tcopilotContainer,\n\t\t\t\t}),\n\t\t\t},\n\t\t];\n\t}\n}\n","import type { CopilotImageController } from 'ai.copilot.copilot-image-controller';\nimport type { CopilotInput, CopilotMenuItem } from 'ai.copilot';\nimport { Loc } from 'main.core';\nimport { Main as IconSetMain, Actions as IconSetActions } from 'ui.icon-set.api.core';\nimport {\n\tSaveImageCommand,\n\tPlaceImageAboveCommand,\n\tPlaceImageUnderCommand,\n\tCancelImageCommand,\n\tRepeatImageCompletion,\n} from '../menu-items-commands/index';\n\ntype CopilotErrorMenuItemsOptions = {\n\tcopilotImageController: CopilotImageController;\n\tinputField: CopilotInput;\n\tuseInsertAboveAndUnderMenuItems: boolean;\n}\n\nexport class ImageConfiguratorResultMenuItems\n{\n\tstatic getMenuItems(options: CopilotErrorMenuItemsOptions): CopilotMenuItem[]\n\t{\n\t\tconst copilotImageController = options?.copilotImageController;\n\t\tconst inputField = options.inputField;\n\t\tconst useAboveAndUnderTextMenuItems = options.useInsertAboveAndUnderMenuItems;\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tcode: 'save',\n\t\t\t\ttext: Loc.getMessage('AI_COPILOT_IMAGE_RESULT_MENU_SAVE'),\n\t\t\t\ticon: IconSetMain.CHECK,\n\t\t\t\tnotHighlight: true,\n\t\t\t\tcommand: new SaveImageCommand({\n\t\t\t\t\tcopilotImageController,\n\t\t\t\t}),\n\t\t\t},\n\t\t\tuseAboveAndUnderTextMenuItems\n\t\t\t\t? {\n\t\t\t\t\tcode: 'place_above',\n\t\t\t\t\ttext: Loc.getMessage('AI_COPILOT_IMAGE_RESULT_MENU_PLACE_ABOVE_TEXT'),\n\t\t\t\t\ticon: IconSetActions.ARROW_TOP,\n\t\t\t\t\tnotHighlight: true,\n\t\t\t\t\tcommand: new PlaceImageAboveCommand({\n\t\t\t\t\t\tcopilotImageController,\n\t\t\t\t\t}),\n\t\t\t\t} : null,\n\t\t\tuseAboveAndUnderTextMenuItems\n\t\t\t\t? {\n\t\t\t\t\tcode: 'place_under',\n\t\t\t\t\ttext: Loc.getMessage('AI_COPILOT_IMAGE_RESULT_MENU_PLACE_UNDER_TEXT'),\n\t\t\t\t\ticon: IconSetActions.ARROW_DOWN,\n\t\t\t\t\tnotHighlight: true,\n\t\t\t\t\tcommand: new PlaceImageUnderCommand({\n\t\t\t\t\t\tcopilotImageController,\n\t\t\t\t\t}),\n\t\t\t\t} : null,\n\t\t\t{\n\t\t\t\tcode: 'repeat',\n\t\t\t\ttext: Loc.getMessage('AI_COPILOT_IMAGE_RESULT_MENU_REPEAT'),\n\t\t\t\ticon: IconSetActions.LEFT_SEMICIRCULAR_ANTICLOCKWISE_ARROW_1,\n\t\t\t\tnotHighlight: true,\n\t\t\t\tcommand: new RepeatImageCompletion({\n\t\t\t\t\tcopilotImageController,\n\t\t\t\t}),\n\t\t\t},\n\t\t\t{\n\t\t\t\tseparator: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tcode: 'cancel',\n\t\t\t\ttext: Loc.getMessage('AI_COPILOT_IMAGE_RESULT_MENU_CANCEL'),\n\t\t\t\ticon: IconSetActions.CROSS_45,\n\t\t\t\tnotHighlight: true,\n\t\t\t\tcommand: new CancelImageCommand({\n\t\t\t\t\tcopilotImageController,\n\t\t\t\t\tinputField,\n\t\t\t\t}),\n\t\t\t},\n\t\t].filter((item) => Boolean(item));\n\t}\n}\n","import { Tag, Loc, Event, Dom } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nimport './css/image-configurator-styles.css';\n\ntype StyleItem = {\n\ttitle: string;\n\tvalue: string;\n\tclassNameModifier: string;\n}\n\nconst styleItems: StyleItem[] = [\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_NONE'),\n\t\tvalue: 'None',\n\t\tclassNameModifier: 'none',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_CINEMATIC_DEFAULT'),\n\t\tvalue: 'cinematic-default',\n\t\tclassNameModifier: 'cinematic-default',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_SAI_CINEMATIC'),\n\t\tvalue: 'sai-cinematic',\n\t\tclassNameModifier: 'sai-cinematic',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_SAI_ENHANCE'),\n\t\tvalue: 'sai-enhance',\n\t\tclassNameModifier: 'sai-enhance',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_SAI_LINE_ART'),\n\t\tvalue: 'sai-line art',\n\t\tclassNameModifier: 'sai-line-art',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_SAI_PHOTOGRAPHIC'),\n\t\tvalue: 'sai-photographic',\n\t\tclassNameModifier: 'sai-photographic',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_SAI_TEXTURE'),\n\t\tvalue: 'sai-texture',\n\t\tclassNameModifier: 'sai-texture',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_ADS_ADVERTISING'),\n\t\tvalue: 'ads-advertising',\n\t\tclassNameModifier: 'ads-advertising',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_ADS_AUTOMOTIVE'),\n\t\tvalue: 'ads-automotive',\n\t\tclassNameModifier: 'ads-automotive',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_ADS_CORPORATE'),\n\t\tvalue: 'ads-corporate',\n\t\tclassNameModifier: 'ads-corporate',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_ADS_FASHION_EDITORIAL'),\n\t\tvalue: 'ads-fashion editorial',\n\t\tclassNameModifier: 'ads-fashion-editorial',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_ADS_FOOD_PHOTOGRAPHY'),\n\t\tvalue: 'ads-food photography',\n\t\tclassNameModifier: 'ads-food-photography',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_ADS_LUXURY'),\n\t\tvalue: 'ads-luxury',\n\t\tclassNameModifier: 'ads-luxury',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_ADS_REAL_ESTATE'),\n\t\tvalue: 'ads-real-estate',\n\t\tclassNameModifier: 'ads-real-estate',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_ADS_RETAIL'),\n\t\tvalue: 'ads-retail',\n\t\tclassNameModifier: 'ads-retail',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_ABSTRACT'),\n\t\tvalue: 'artstyle-abstract',\n\t\tclassNameModifier: 'artstyle-abstract',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_ABSTRACT_EXPRESSIONISM'),\n\t\tvalue: 'artstyle-abstract expressionism',\n\t\tclassNameModifier: 'artstyle-abstract-expressionism',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_ART_DECO'),\n\t\tvalue: 'artstyle-art deco',\n\t\tclassNameModifier: 'artstyle-art-deco',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_ART_NOUVEAU'),\n\t\tvalue: 'artstyle-art nouveau',\n\t\tclassNameModifier: 'artstyle-art-nouveau',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_CONSTRUCTIVIST'),\n\t\tvalue: 'artstyle-constructivist',\n\t\tclassNameModifier: 'artstyle-constructivist',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_CUBIST'),\n\t\tvalue: 'artstyle-cubist',\n\t\tclassNameModifier: 'artstyle-cubist',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_EXPRESSIONIST'),\n\t\tvalue: 'artstyle-expressionist',\n\t\tclassNameModifier: 'artstyle-expressionist',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_GRAFFITI'),\n\t\tvalue: 'artstyle-graffiti',\n\t\tclassNameModifier: 'artstyle-graffiti',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_HYPERREALISM'),\n\t\tvalue: 'artstyle-hyperrealism',\n\t\tclassNameModifier: 'artstyle-hyperrealism',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_IMPRESSIONIST'),\n\t\tvalue: 'artstyle-impressionist',\n\t\tclassNameModifier: 'artstyle-impressionist',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_POINTILLISM'),\n\t\tvalue: 'artstyle-pointillism',\n\t\tclassNameModifier: 'artstyle-pointillism',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_POP_ART'),\n\t\tvalue: 'artstyle-pop art',\n\t\tclassNameModifier: 'artstyle-pop-art',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_PSYCHEDELIC'),\n\t\tvalue: 'artstyle-psychedelic',\n\t\tclassNameModifier: 'artstyle-psychedelic',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_RENAISSANCE'),\n\t\tvalue: 'artstyle-renaissance',\n\t\tclassNameModifier: 'artstyle-renaissance',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_STEAMPUNK'),\n\t\tvalue: 'artstyle-steampunk',\n\t\tclassNameModifier: 'artstyle-steampunk',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_SURREALIST'),\n\t\tvalue: 'artstyle-surrealist',\n\t\tclassNameModifier: 'artstyle-surrealist',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_TYPOGRAPHY'),\n\t\tvalue: 'artstyle-typography',\n\t\tclassNameModifier: 'artstyle-typography',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_WATERCOLOR'),\n\t\tvalue: 'artstyle-watercolor',\n\t\tclassNameModifier: 'artstyle-watercolor',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_MISK_MINIMALIST'),\n\t\tvalue: 'misc-minimalist',\n\t\tclassNameModifier: 'misc-minimalist',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_PAPERCRAFT_COLLAGE'),\n\t\tvalue: 'papercraft-collage',\n\t\tclassNameModifier: 'papercraft-collage',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_PAPERCRAFT_PAPERCUT_COLLAGE'),\n\t\tvalue: 'papercraft-papercut collage',\n\t\tclassNameModifier: 'papercraft-papercut-collage',\n\t},\n\t{\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_STYLE_PHOTO_HDR'),\n\t\tvalue: 'photo-hdr',\n\t\tclassNameModifier: 'photo-hdr',\n\t},\n];\n\nconst ImageConfiguratorStylesEvents = Object.freeze({\n\tselect: 'select',\n});\n\ntype renderStyleItemOptions = {\n\tvalue: string;\n\ttitle: string;\n\tclassNameModifier: string;\n}\n\nexport class ImageConfiguratorStyles extends EventEmitter\n{\n\t#mainStylesCount: number = styleItems.length;\n\t#currentMainStylesCount: number = 9;\n\t#selectedStyle: string | null = null;\n\t#isExpanded: boolean = false;\n\t#styleList: HTMLElement | null = null;\n\t#container: HTMLElement | null = null;\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\n\t\tthis.#selectedStyle = styleItems[0].value;\n\t\tthis.setEventNamespace('AI.Copilot.ImageConfiguratorStyles');\n\t}\n\n\tgetSelectedStyle(): string\n\t{\n\t\treturn this.#selectedStyle;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container = Tag.render`\n\t\t\t<div class=\"ai__image-configurator-styles\">\n\t\t\t\t${this.#renderHeader()}\n\t\t\t\t${this.#renderStylesList()}\n\t\t\t</div>\n\t\t`;\n\n\t\trequestAnimationFrame(() => {\n\t\t\tconst styleListStyles = getComputedStyle(this.#styleList);\n\t\t\tconst paddingTop = styleListStyles.getPropertyValue('padding-top');\n\t\t\tconst paddingBottom = styleListStyles.getPropertyValue('padding-bottom');\n\t\t\tconst padding = parseFloat(paddingTop) + parseFloat(paddingBottom);\n\n\t\t\tDom.style(this.#styleList, 'height', `${this.#styleList.offsetHeight - padding + 4}px`);\n\t\t});\n\n\t\treturn this.#container;\n\t}\n\n\t#renderHeader(): HTMLElement\n\t{\n\t\tconst expandListBtn = this.#isShowExpandBtn() ? this.#renderExpandListBtn() : null;\n\n\t\treturn Tag.render`\n\t\t\t<header class=\"ai__image-configurator-styles_header\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"ai__image-configurator-styles_title\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('AI_COPILOT_IMAGE_POPULAR_STYLES')}\"\n\t\t\t\t>\n\t\t\t\t\t${Loc.getMessage('AI_COPILOT_IMAGE_POPULAR_STYLES')}\n\t\t\t\t</div>\n\t\t\t\t${expandListBtn}\n\t\t\t</header>\n\t\t`;\n\t}\n\n\t#isShowExpandBtn(): boolean\n\t{\n\t\treturn this.#mainStylesCount > this.#currentMainStylesCount;\n\t}\n\n\t#renderExpandListBtn(): HTMLElement\n\t{\n\t\tconst expandListBtn = Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"ai__image-configurator-styles_all-styles\"\n\t\t\t\ttitle=\"${Loc.getMessage('AI_COPILOT_IMAGE_ALL_STYLES')}\"\n\t\t\t>\n\t\t\t\t${Loc.getMessage('AI_COPILOT_IMAGE_ALL_STYLES')}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(expandListBtn, 'click', () => {\n\t\t\tthis.#isExpanded = !this.#isExpanded;\n\n\t\t\tif (this.#isExpanded)\n\t\t\t{\n\t\t\t\tDom.addClass(this.#styleList, '--expanded');\n\t\t\t\tthis.#currentMainStylesCount = Object.values(styleItems).length;\n\t\t\t\tthis.#styleList.innerHTML = '';\n\t\t\t\tthis.#styleList.append(...this.#renderStyleItems());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.#styleList, '--expanded');\n\t\t\t}\n\t\t});\n\n\t\treturn expandListBtn;\n\t}\n\n\t#renderStylesList(): HTMLElement\n\t{\n\t\tthis.#styleList = Tag.render`\n\t\t\t<div class=\"ai__image-configurator-styles_list\">\n\t\t\t\t${this.#renderStyleItems()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#styleList;\n\t}\n\n\t#renderStyleItems(): HTMLElement[]\n\t{\n\t\treturn styleItems.slice(0, this.#currentMainStylesCount).map((styleItem) => {\n\t\t\treturn this.#renderStyleItem(styleItem);\n\t\t});\n\t}\n\n\t#renderStyleItem(options: renderStyleItemOptions): HTMLElement\n\t{\n\t\tconst radioButton = Tag.render`\n\t\t\t<input\n\t\t\t\t${options.value === this.#selectedStyle ? 'checked' : ''}\n\t\t\t\tid=\"${options.value}\"\n\t\t\t\tname=\"ai__image-configurator-style\"\n\t\t\t\ttype=\"radio\"\n\t\t\t\tclass=\"ai__image-configurator-style_item-radio-btn\"\n\t\t\t/>\n\t\t`;\n\t\tconst item = Tag.render`\n\t\t\t<div title=\"${options.title}\" class=\"ai__image-configurator-styles_item --style-${options.classNameModifier}\">\n\t\t\t\t${radioButton}\n\t\t\t\t<label for=\"${options.value}\" class=\"ai__image-configurator-styles_item-inner\">\n\t\t\t\t\t<div class=\"ai__image-configurator-styles_item-title\">${options.title}</div>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(radioButton, 'input', () => {\n\t\t\tthis.#selectedStyle = options.value;\n\t\t\tthis.emit(ImageConfiguratorStylesEvents.select, new BaseEvent({\n\t\t\t\tdata: options.value,\n\t\t\t}));\n\t\t});\n\n\t\treturn item;\n\t}\n}\n","import { Loc } from 'main.core';\nimport { Editor } from 'ui.icon-set.api.core';\n\nexport type ImageConfiguratorParam = {\n\ttitle: string;\n\ticon: string;\n\toptions?: ImageConfiguratorParamOption[];\n}\n\nexport type ImageConfiguratorParamOption = {\n\ttitle: string,\n\tvalue: string,\n}\n\nexport type ImageConfiguratorParamsCurrentValues = {\n\tformat: string;\n\tlight: string;\n\tcomposition: string;\n}\n\nexport const params: {[code: string]: ImageConfiguratorParam} = {\n\tformat: {\n\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_FORMAT_OPTION_TITLE'),\n\t\ticon: Editor.INCERT_IMAGE,\n\t\toptions: [\n\t\t\t{\n\t\t\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_FORMAT_OPTION_SQUARE'),\n\t\t\t\tvalue: 'square',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_FORMAT_OPTION_PORTRAIT'),\n\t\t\t\tvalue: 'portrait',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_FORMAT_OPTION_LANDSCAPE'),\n\t\t\t\tvalue: 'landscape',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_FORMAT_OPTION_WIDE'),\n\t\t\t\tvalue: 'wide',\n\t\t\t},\n\t\t],\n\t},\n\t// light: {\n\t// \ticon: Editor.INCERT_IMAGE,\n\t// \ttitle: Loc.getMessage('AI_COPILOT_IMAGE_LIGHT_OPTION_TITLE'),\n\t// \toptions: [\n\t// \t\t{\n\t// \t\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_LIGHT_OPTION_COMMON'),\n\t// \t\t\tvalue: 'common',\n\t// \t\t},\n\t// \t],\n\t// },\n\t// composition: {\n\t// \ticon: Editor.INCERT_IMAGE,\n\t// \ttitle: Loc.getMessage('AI_COPILOT_IMAGE_COMPOSITION_OPTION_TITLE'),\n\t// \toptions: [\n\t// \t\t{\n\t// \t\t\ttitle: Loc.getMessage('AI_COPILOT_IMAGE_COMPOSITION_OPTION_COMMON'),\n\t// \t\t\tvalue: 'common',\n\t// \t\t},\n\t// \t],\n\t// },\n};\n","import { Tag, Event, Dom } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport type { MenuItemOptions, MenuOptions } from 'main.popup';\nimport { Menu, MenuItem } from 'main.popup';\nimport { Icon, Actions, Main } from 'ui.icon-set.api.core';\n\nimport './css/image-configurator-params.css';\n\nimport { params } from './image-configurator-params-config';\nimport type {\n\tImageConfiguratorParam,\n\tImageConfiguratorParamOption,\n\tImageConfiguratorParamsCurrentValues,\n} from './image-configurator-params-config';\n\ntype ImageConfiguratorParamsOptions = {};\n\nexport class ImageConfiguratorParams extends EventEmitter\n{\n\t#container: HTMLElement | null;\n\t#currentValues: ImageConfiguratorParamsCurrentValues;\n\t#openOptionsMenu: Menu | null;\n\n\tconstructor(options: ImageConfiguratorParamsOptions)\n\t{\n\t\tsuper(options);\n\n\t\tconst data = {\n\t\t\tformat: params.format.options[0].value,\n\t\t\tlight: params.light?.options[0].value,\n\t\t\tcomposition: params.composition?.options[0].value,\n\t\t};\n\n\t\tconst handler = {\n\t\t\tset: (target: ImageConfiguratorParamsCurrentValues, property, value) => {\n\t\t\t\tReflect.set(target, property, value);\n\n\t\t\t\tif (this.#container)\n\t\t\t\t{\n\t\t\t\t\tconst option = params[property].options.find((currentOption) => currentOption.value === value);\n\n\t\t\t\t\tconst optionElem = this.#container.querySelector(`#ai__copilot-image-params-item-${property}`);\n\n\t\t\t\t\tif (optionElem)\n\t\t\t\t\t{\n\t\t\t\t\t\toptionElem.innerText = option.title;\n\n\t\t\t\t\t\tDom.attr(optionElem, 'title', option.title);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t};\n\n\t\tthis.#currentValues = new Proxy(data, handler);\n\n\t\tthis.setEventNamespace('AI.Copilot.ImageParams');\n\t}\n\n\tgetCurrentValues(): ImageConfiguratorParamsCurrentValues\n\t{\n\t\treturn { ...this.#currentValues };\n\t}\n\n\tisContainsTarget(target: HTMLElement): boolean\n\t{\n\t\treturn this.#container?.contains(target)\n\t\t\t|| this.#openOptionsMenu?.getPopupWindow()?.getPopupContainer()?.contains(target);\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container = Tag.render`\n\t\t\t<div class=\"ai__copilot-image-params\">\n\t\t\t\t${this.#renderParams(params)}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#container;\n\t}\n\n\t#renderParams(parameters: ImageConfiguratorParam[]): HTMLElement[]\n\t{\n\t\treturn Object.entries(parameters).map(([parameterName, parameter]) => {\n\t\t\treturn this.#renderParam(parameter, parameterName);\n\t\t});\n\t}\n\n\t#renderParam(options: ImageConfiguratorParam, parameterName): HTMLElement\n\t{\n\t\tconst selectedOption = options.options.find((option) => option.value === this.#currentValues[parameterName]);\n\t\tconst icon = new Icon({\n\t\t\tsize: 24,\n\t\t\ticon: options.icon,\n\t\t\tcolor: '#8E52EC',\n\t\t});\n\n\t\tconst rightChevronIcon = new Icon({\n\t\t\tsize: 16,\n\t\t\ticon: Actions.CHEVRON_RIGHT,\n\t\t\tcolor: getComputedStyle(document.body).getPropertyValue('--ui-color-base-50'),\n\t\t});\n\n\t\tconst param = Tag.render`\n\t\t\t<div class=\"ai__copilot-image-params-item\">\n\t\t\t\t<div class=\"ai__copilot-image-params-item_title\">\n\t\t\t\t\t<div class=\"ai__copilot-image-params-item_title-icon\">\n\t\t\t\t\t\t${icon.render()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ai__copilot-image-params-item_title-text\"\n\t\t\t\t\t\ttitle=\"${options.title}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${options.title}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div ref=\"value\" class=\"ai__copilot-image-params-item_value\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tid=\"ai__copilot-image-params-item-${parameterName}\"\n\t\t\t\t\t\tclass=\"ai__copilot-image-params-item_value-text\"\n\t\t\t\t\t\ttitle=\"${selectedOption.title}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${selectedOption.title}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ai__copilot-image-params-item_value-arrow-icon\">\n\t\t\t\t\t\t${rightChevronIcon.render()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(param.root, 'click', () => {\n\t\t\tif (this.#openOptionsMenu)\n\t\t\t{\n\t\t\t\tthis.#openOptionsMenu.close();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#showOptionsMenu(param.value, options.options, parameterName);\n\t\t\t}\n\t\t});\n\n\t\treturn param.root;\n\t}\n\n\t#showOptionsMenu(bindElement: HTMLElement, options: ImageConfiguratorParam[], parameterName): void\n\t{\n\t\tthis.#openOptionsMenu = new Menu({\n\t\t\t...this.#getMenuOptions(bindElement, options, parameterName),\n\t\t});\n\n\t\tthis.#openOptionsMenu.show();\n\t}\n\n\t#getMenuOptions(\n\t\tbindElement: HTMLElement,\n\t\timageConfiguratorParams: ImageConfiguratorParam[],\n\t\tparameterName: string,\n\t): MenuOptions\n\t{\n\t\tconst position = Dom.getPosition(bindElement);\n\n\t\treturn {\n\t\t\tbindElement: {\n\t\t\t\ttop: position.top - 6,\n\t\t\t\tleft: position.right + 18,\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\tminWidth: 200,\n\t\t\titems: this.#getMenuItemsFromOptions(imageConfiguratorParams, parameterName),\n\t\t\tevents: {\n\t\t\t\tonPopupAfterClose: () => {\n\t\t\t\t\tthis.#openOptionsMenu = null;\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\t#getMenuItemsFromOptions(options: ImageConfiguratorParamOption[], parameterName: string): MenuItemOptions[]\n\t{\n\t\treturn options.map((option): MenuItemOptions => {\n\t\t\tconst isSelectedOption = option.value === this.#currentValues[parameterName];\n\n\t\t\treturn {\n\t\t\t\tid: option.value,\n\t\t\t\ttext: option.title,\n\t\t\t\thtml: this.#getMenuItemHtml(option.title, isSelectedOption),\n\t\t\t\tonclick: this.#handleMenuItemClick(parameterName, option.value),\n\t\t\t};\n\t\t});\n\t}\n\n\t#getMenuItemHtml(title: string, isSelected: boolean): string\n\t{\n\t\tconst selectedIcon = new Icon({\n\t\t\tsize: 18,\n\t\t\ticon: Main.CHECK,\n\t\t\tcolor: getComputedStyle(document.body).getPropertyValue('--ui-color-link-primary-base'),\n\t\t});\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ai__copilot-image-params-popup-item\">\n\t\t\t\t<span class=\"ai__copilot-image-params-popup-item_title\">${title}</span>\n\t\t\t\t${isSelected ? selectedIcon.render() : null}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#handleMenuItemClick(parameterName: string, parameterValue): Function\n\t{\n\t\treturn (e: PointerEvent, menuItem: MenuItem): void => {\n\t\t\tthis.#currentValues[parameterName] = parameterValue;\n\n\t\t\tmenuItem.getMenuWindow().close();\n\t\t\tthis.#openOptionsMenu = null;\n\t\t};\n\t}\n}\n","import { Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nimport './css/image-configurator.css';\n\nimport { ImageConfiguratorStyles } from './image-configurator-styles';\nimport { ImageConfiguratorParams } from './image-configurator-params';\nimport type { ImageConfiguratorParamsCurrentValues } from './image-configurator-params-config';\n\ntype ImageConfiguratorOptions = {}\n\nexport type getParamsResult = {\n\tstyle: string;\n} | ImageConfiguratorParamsCurrentValues;\n\nexport class ImageConfigurator extends EventEmitter\n{\n\t#container: HTMLElement;\n\t#imageConfiguratorStyles: ImageConfiguratorStyles;\n\t#imageConfiguratorParams: ImageConfiguratorParams;\n\n\tconstructor(options: ImageConfiguratorOptions)\n\t{\n\t\tsuper(options);\n\n\t\tthis.setEventNamespace('AI.Copilot.ImageConfigurator');\n\t}\n\n\tgetParams(): getParamsResult\n\t{\n\t\treturn {\n\t\t\tstyle: this.#imageConfiguratorStyles.getSelectedStyle(),\n\t\t\t...this.#imageConfiguratorParams.getCurrentValues(),\n\t\t};\n\t}\n\n\tisContainsTarget(target: HTMLElement): boolean\n\t{\n\t\treturn this.#container?.contains(target) || this.#imageConfiguratorParams?.isContainsTarget(target);\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container = Tag.render`\n\t\t\t<div class=\"ai__copilot-image-configurator\">\n\t\t\t\t<div class=\"ai__copilot-image-configurator_styles\">\n\t\t\t\t\t${this.#renderImageStyles()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ai__copilot-image-configurator_params\">\n\t\t\t\t\t${this.#renderImageParams()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#container;\n\t}\n\n\t#renderImageStyles(): HTMLElement\n\t{\n\t\tthis.#imageConfiguratorStyles = new ImageConfiguratorStyles({});\n\n\t\treturn this.#imageConfiguratorStyles.render();\n\t}\n\n\t#renderImageParams(): HTMLElement\n\t{\n\t\tthis.#imageConfiguratorParams = new ImageConfiguratorParams({});\n\n\t\treturn this.#imageConfiguratorParams.render();\n\t}\n}\n","import { Tag, Loc, Event } from 'main.core';\nimport { Popup } from 'main.popup';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Icon, Actions } from 'ui.icon-set.api.core';\nimport { Button } from 'ui.buttons';\n\nimport { ImageConfigurator } from './image-configurator';\nimport './css/image-configurator-popup.css';\n\ntype ImageConfiguratorPopupOffset = {\n\ttop: number;\n\tleft: number;\n}\n\ntype ImageConfiguratorPopupOptions = {\n\tbindElement: HTMLElement,\n\tpopupId: string;\n\tpopupOffset?: ImageConfiguratorPopupOffset;\n\twithoutBackBtn: boolean;\n}\n\ntype ImageConfiguration = {\n\tstyle: string;\n\tformat: string;\n}\n\nexport const ImageConfiguratorPopupEvents = Object.freeze({\n\tcompletions: 'completions',\n\tback: 'back',\n});\n\nexport class ImageConfiguratorPopup extends EventEmitter\n{\n\t#bindElement: HTMLElement | null = null;\n\t#popup: Popup | null = null;\n\t#popupOffset: ImageConfiguratorPopupOffset;\n\t#popupId: string;\n\t#imageConfigurator: ImageConfigurator;\n\t#withoutBackBtn: boolean;\n\n\tconstructor(options: ImageConfiguratorPopupOptions)\n\t{\n\t\tsuper(options);\n\n\t\tthis.#popupId = options.popupId || String(Math.random());\n\t\tthis.#bindElement = options.bindElement;\n\t\tthis.#popupOffset = options.popupOffset;\n\t\tthis.#withoutBackBtn = options.withoutBackBtn === true;\n\n\t\tthis.setEventNamespace('AI.Copilot:ImagePopup');\n\t}\n\n\tgetPopupId(): string\n\t{\n\t\treturn this.#popupId;\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\treturn this.#popup;\n\t}\n\n\tshow(): void\n\t{\n\t\tif (this.#popup === null)\n\t\t{\n\t\t\tthis.#createPopup();\n\t\t}\n\n\t\tthis.#popup.show();\n\t}\n\n\thide(): void\n\t{\n\t\tthis.#popup?.close();\n\t}\n\n\tdestroy(): void\n\t{\n\t\tthis.#popup?.destroy();\n\n\t\tthis.#popup = null;\n\t}\n\n\tisShown(): boolean\n\t{\n\t\treturn this.#popup.isShown();\n\t}\n\n\tisContainsTarget(target: HTMLElement): boolean\n\t{\n\t\treturn this.#popup?.getPopupContainer()?.contains(target) || this.#imageConfigurator?.isContainsTarget(target);\n\t}\n\n\tadjustPosition(): void\n\t{\n\t\tthis.#popup?.adjustPosition({\n\t\t\tforceBindPosition: true,\n\t\t});\n\t}\n\n\tgetImageConfiguration(): ImageConfiguration\n\t{\n\t\treturn this.#imageConfigurator.getParams();\n\t}\n\n\t#createPopup(): Popup\n\t{\n\t\tthis.#popup = new Popup({\n\t\t\tid: this.#popupId,\n\t\t\tbindElement: this.#bindElement,\n\t\t\tcacheable: true,\n\t\t\twidth: 258,\n\t\t\tpadding: 0,\n\t\t\tcontent: this.#renderPopupContent(),\n\t\t});\n\n\t\tthis.#popup.setOffset({\n\t\t\toffsetTop: this.#popupOffset?.top,\n\t\t\toffsetLeft: this.#popupOffset?.left,\n\t\t});\n\t}\n\n\t#renderPopupContent(): HTMLElement\n\t{\n\t\tthis.#imageConfigurator = new ImageConfigurator({});\n\n\t\tconst button = new Button({\n\t\t\tcolor: Button.Color.AI,\n\t\t\ttext: Loc.getMessage('AI_COPILOT_IMAGE_POPUP_GENERATE_BTN'),\n\t\t\tround: true,\n\t\t\tnoCaps: true,\n\t\t\tonclick: () => {\n\t\t\t\tthis.emit(ImageConfiguratorPopupEvents.completions, new BaseEvent({\n\t\t\t\t\tdata: this.#imageConfigurator.getParams(),\n\t\t\t\t}));\n\t\t\t},\n\t\t});\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ai__copilot-image-configurator-popup-content\">\n\t\t\t\t<header class=\"ai__copilot-image-configurator-popup-content_header\">\n\t\t\t\t\t${this.#renderBackBtnIfNeeded()}\n\t\t\t\t\t<div class=\"ai__copilot-image-configurator-popup-content_title\">\n\t\t\t\t\t\t${Loc.getMessage('AI_COPILOT_IMAGE_POPUP_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\t\t\t\t<div class=\"ai__copilot-image-configurator-popup-content_params\">\n\t\t\t\t\t${this.#imageConfigurator.render()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ai__copilot-image-configurator-popup-content_footer\">\n\t\t\t\t\t${button.render()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderBackBtnIfNeeded(): HTMLElement\n\t{\n\t\tif (this.#withoutBackBtn)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst backBtnIcon = new Icon({\n\t\t\tsize: 24,\n\t\t\tcolor: getComputedStyle(document.body).getPropertyValue('--ui-color-base-90'),\n\t\t\ticon: Actions.CHEVRON_LEFT,\n\t\t});\n\n\t\tconst backBtnIconElem = backBtnIcon.render();\n\n\t\tEvent.bind(backBtnIconElem, 'click', () => {\n\t\t\tthis.emit(ImageConfiguratorPopupEvents.back, new BaseEvent());\n\t\t});\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ai__copilot-image-configurator-popup-content_back-btn\">\n\t\t\t\t${backBtnIconElem}\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Engine, Text as TextPayload } from 'ai.engine';\nimport { Dom, Loc } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Popup } from 'main.popup';\nimport { AjaxErrorHandler } from 'ai.ajax-error-handler';\nimport type { CopilotAnalytics } from '../../src/copilot-analytics';\nimport { ImageConfiguratorErrorMenuItems } from './menu-items/error-menu-items';\nimport { ImageConfiguratorResultMenuItems } from './menu-items/result-menu-items';\nimport { ImageConfiguratorPopup, ImageConfiguratorPopupEvents } from './image-configurator-popup';\nimport type { CopilotInput, CopilotInputEvents, CopilotMenu } from 'ai.copilot';\n\nexport type saveEventData = {\n\timageUrl: string | null;\n}\n\ntype CopilotImageControllerOptions = {\n\tinputField: CopilotInput;\n\tcopilotContainer: HTMLElement;\n\tengine: Engine;\n\tcopilotInputEvents: CopilotInputEvents;\n\tcopilotMenu: CopilotMenu;\n\tpopupWithoutBackBtn: boolean;\n\tuseInsertAboveAndUnderMenuItems: boolean;\n\tanalytics: CopilotAnalytics;\n}\n\nexport class CopilotImageController extends EventEmitter\n{\n\t#analytics: CopilotAnalytics;\n\t#copilotContainer: HTMLElement;\n\t#inputField: CopilotInput;\n\t#engine: Engine;\n\t#imageConfiguratorPopup: ImageConfiguratorPopup;\n\t#errorMenu: CopilotMenu;\n\t#resultMenu: CopilotMenu;\n\t#resultImageUrl: string | null;\n\t#copilotInputEvents: CopilotInputEvents;\n\t#CopilotMenu: CopilotMenu;\n\t#popupWithoutBackBtn: boolean;\n\t#currentGenerateRequestId: number;\n\t#useInsertAboveAndUnderTextMenuItems: boolean;\n\n\t#inputFieldCancelLoadingEventHandler: Function;\n\t#inputFieldSubmitEventHandler: Function;\n\t#inputFieldAdjustHeightEventHandler: Function;\n\n\tconstructor(options: CopilotImageControllerOptions)\n\t{\n\t\tsuper(options);\n\n\t\tthis.setEventNamespace('AI.CopilotImage');\n\n\t\tthis.#resultImageUrl = null;\n\t\tthis.#inputField = options.inputField;\n\t\tthis.#copilotContainer = options.copilotContainer;\n\t\tthis.#engine = options.engine;\n\t\tthis.#copilotInputEvents = options.copilotInputEvents;\n\t\tthis.#CopilotMenu = options.copilotMenu;\n\t\tthis.#popupWithoutBackBtn = options.popupWithoutBackBtn === true;\n\t\tthis.#useInsertAboveAndUnderTextMenuItems = options.useInsertAboveAndUnderMenuItems;\n\t\tthis.#analytics = options.analytics;\n\n\t\tthis.#inputFieldSubmitEventHandler = this.#handleInputFieldSubmitEvent.bind(this);\n\t\tthis.#inputFieldCancelLoadingEventHandler = this.#handleInputFieldCancelLoadingEvent.bind(this);\n\t\tthis.#inputFieldAdjustHeightEventHandler = this.#handleInputFieldAdjustHeightEvent.bind(this);\n\t}\n\n\tsetCopilotContainer(copilotContainer: HTMLElement)\n\t{\n\t\tthis.#copilotContainer = copilotContainer;\n\t}\n\n\tgetResultImageUrl(): string | null\n\t{\n\t\treturn this.#resultImageUrl;\n\t}\n\n\tisContainsTarget(target: HTMLElement): boolean\n\t{\n\t\tconst isImageConfiguratorPopup = this.#imageConfiguratorPopup?.isContainsTarget(target);\n\t\tconst isErrorMenu = this.#errorMenu?.contains(target);\n\t\tconst isResultMenu = this.#resultMenu?.contains(target);\n\n\t\treturn isImageConfiguratorPopup || isErrorMenu || isResultMenu;\n\t}\n\n\tshowImageConfigurator(): void\n\t{\n\t\tif (!this.#imageConfiguratorPopup)\n\t\t{\n\t\t\tthis.#initImageConfiguratorPopup();\n\t\t}\n\n\t\tthis.#imageConfiguratorPopup.show();\n\t}\n\n\tshowMenu(): void\n\t{\n\t\tthis.#resultMenu?.show();\n\t\tthis.#errorMenu?.show();\n\t\tthis.#imageConfiguratorPopup?.show();\n\t}\n\n\t#initImageConfiguratorPopup(): void\n\t{\n\t\tthis.#imageConfiguratorPopup = new ImageConfiguratorPopup({\n\t\t\tbindElement: this.#copilotContainer,\n\t\t\tpopupId: 'ai-image-configuration-popup',\n\t\t\tpopupOffset: {\n\t\t\t\ttop: 8,\n\t\t\t},\n\t\t\twithoutBackBtn: this.#popupWithoutBackBtn,\n\t\t});\n\n\t\tthis.#imageConfiguratorPopup.subscribe(ImageConfiguratorPopupEvents.completions, (e: BaseEvent) => {\n\t\t\tconst { style, format } = e.getData();\n\n\t\t\tthis.#setPayload({\n\t\t\t\tstyle,\n\t\t\t\tformat,\n\t\t\t});\n\n\t\t\tthis.completions();\n\t\t});\n\n\t\tthis.#imageConfiguratorPopup.subscribe(ImageConfiguratorPopupEvents.back, () => {\n\t\t\tthis.#unsubscribeFromInputFieldEvents();\n\t\t\tthis.emit('back');\n\t\t});\n\t}\n\n\tgetAnalytics(): CopilotAnalytics\n\t{\n\t\tconst usedTextInput = this.#inputField.usedTextInput();\n\t\tconst usedVoiceRecord = this.#inputField.usedVoiceRecord();\n\n\t\tif (usedTextInput && usedVoiceRecord)\n\t\t{\n\t\t\tthis.#analytics.setContextTypeFromTextAndAudio();\n\t\t}\n\t\telse if (usedTextInput)\n\t\t{\n\t\t\tthis.#analytics.setContextTypeFromText();\n\t\t}\n\t\telse if (usedVoiceRecord)\n\t\t{\n\t\t\tthis.#analytics.setContextTypeFromAudio();\n\t\t}\n\n\t\tthis.#analytics.setCategoryImage();\n\t\tthis.#analytics.setTypeImageNew();\n\n\t\treturn this.#analytics;\n\t}\n\n\tstart(): void\n\t{\n\t\tthis.showImageConfigurator();\n\t\tthis.#subscribeToInputFieldEvents();\n\t}\n\n\tfinish(): void\n\t{\n\t\tthis.#currentGenerateRequestId = -1;\n\t\tthis.destroyAllMenus();\n\t\tthis.#unsubscribeFromInputFieldEvents();\n\t}\n\n\tisShown(): boolean\n\t{\n\t\treturn this.#imageConfiguratorPopup.isShown();\n\t}\n\n\tgetOpenMenuPopup(): Popup | null\n\t{\n\t\treturn this.#errorMenu?.getPopup()\n\t\t\t\t|| this.#resultMenu?.getPopup()\n\t\t\t\t|| this.#imageConfiguratorPopup?.getPopup()\n\t\t\t\t|| null;\n\t}\n\n\thideAllMenus(): void\n\t{\n\t\tthis.#imageConfiguratorPopup?.hide();\n\t\tthis.#resultMenu?.hide();\n\t\tthis.#errorMenu?.hide();\n\t}\n\n\tdestroyAllMenus(): void\n\t{\n\t\tthis.#errorMenu?.close();\n\t\tthis.#resultMenu?.close();\n\t\tthis.#imageConfiguratorPopup?.destroy();\n\n\t\tthis.#errorMenu = null;\n\t\tthis.#resultMenu = null;\n\t\tthis.#imageConfiguratorPopup = null;\n\t}\n\n\tadjustMenusPosition(): void\n\t{\n\t\tthis.#imageConfiguratorPopup?.adjustPosition();\n\t\tthis.#resultMenu?.adjustPosition();\n\t\tthis.#errorMenu?.adjustPosition();\n\t}\n\n\tasync completions(): void\n\t{\n\t\tthis.destroyAllMenus();\n\t\tDom.removeClass(this.#copilotContainer, '--error');\n\t\tthis.#inputField.startGenerating();\n\n\t\ttry\n\t\t{\n\t\t\tconst id = Math.round(Math.random() * 10000);\n\n\t\t\tthis.#currentGenerateRequestId = id;\n\n\t\t\tconst res = await this.#engine.imageCompletions();\n\n\t\t\tif (this.#currentGenerateRequestId !== id)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.#resultImageUrl = JSON.parse(res.data.result)[0];\n\t\t\tthis.#inputField.finishGenerating();\n\t\t\tthis.#showResultMenu();\n\n\t\t\tthis.emit('completion-result', new BaseEvent({\n\t\t\t\tdata: {\n\t\t\t\t\timageUrl: this.#resultImageUrl,\n\t\t\t\t},\n\t\t\t}));\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tthis.#inputField.finishGenerating();\n\t\t\tthis.#handleCompletionsError(error);\n\t\t}\n\t}\n\n\t#subscribeToInputFieldEvents(): void\n\t{\n\t\tthis.#inputField.subscribe(this.#copilotInputEvents.cancelLoading, this.#inputFieldCancelLoadingEventHandler);\n\t\tthis.#inputField.subscribe(this.#copilotInputEvents.submit, this.#inputFieldSubmitEventHandler);\n\t\tthis.#inputField.subscribe(this.#copilotInputEvents.adjustHeight, this.#inputFieldAdjustHeightEventHandler);\n\t}\n\n\t#unsubscribeFromInputFieldEvents(): void\n\t{\n\t\tthis.#inputField.unsubscribe(this.#copilotInputEvents.cancelLoading, this.#inputFieldCancelLoadingEventHandler);\n\t\tthis.#inputField.unsubscribe(this.#copilotInputEvents.submit, this.#inputFieldSubmitEventHandler);\n\t\tthis.#inputField.unsubscribe(this.#copilotInputEvents.adjustHeight, this.#inputFieldAdjustHeightEventHandler);\n\t}\n\n\t#handleCompletionsError(error): void\n\t{\n\t\tconst firstError = error?.errors?.[0];\n\n\t\tif (firstError && firstError?.code === 'LIMIT_IS_EXCEEDED_BAAS')\n\t\t{\n\t\t\tthis.#inputField.disable();\n\t\t}\n\t\telse if (firstError && (\n\t\t\tfirstError.code === 'LIMIT_IS_EXCEEDED_MONTHLY'\n\t\t\t|| firstError.code === 'LIMIT_IS_EXCEEDED_DAILY'\n\t\t\t|| firstError.code === 'SERVICE_IS_NOT_AVAILABLE_BY_TARIFF'\n\t\t))\n\t\t{\n\t\t\tthis.emit('close');\n\t\t}\n\t\telse if (firstError)\n\t\t{\n\t\t\tDom.addClass(this.#copilotContainer, '--error');\n\t\t\tthis.#showErrorMenu();\n\n\t\t\tthis.#inputField.setErrors([{\n\t\t\t\tcode: firstError.code,\n\t\t\t\tmessage: firstError.message,\n\t\t\t}]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#inputField.setErrors([{\n\t\t\t\tcode: -1,\n\t\t\t\tmessage: Loc.getMessage('AI_COPILOT_IMAGE_GENERATION_ERROR'),\n\t\t\t}]);\n\t\t}\n\n\t\tAjaxErrorHandler.handleImageGenerateError({\n\t\t\tbaasOptions: {\n\t\t\t\tbindElement: this.#inputField.getContainer().querySelector('.ai__copilot_input-field-baas-point'),\n\t\t\t\tcontext: this.#engine.getContextId(),\n\t\t\t\tuseAngle: false,\n\t\t\t},\n\t\t\terrorCode: firstError?.code,\n\t\t});\n\t}\n\n\t#setPayload(options: { style: string, format: string }): void\n\t{\n\t\tconst payload = new TextPayload({\n\t\t\tprompt: this.#inputField.getValue(),\n\t\t});\n\n\t\tpayload.setMarkers({\n\t\t\tstyle: options.style,\n\t\t\tformat: options.format,\n\t\t});\n\n\t\tthis.#engine.setPayload(payload);\n\n\t\tthis.#engine.setAnalyticParameters({\n\t\t\ttype: this.getAnalytics().getType(),\n\t\t\tc_sub_section: this.getAnalytics().getCSubSection(),\n\t\t\tc_section: this.getAnalytics().getCSection(),\n\t\t\tc_element: this.getAnalytics().getCElement(),\n\t\t});\n\n\t\tthis.getAnalytics()\n\t\t\t.setP1('prompt', options.style)\n\t\t\t.setP2('format', options.format);\n\t}\n\n\t#handleInputFieldSubmitEvent(): void\n\t{\n\t\tif (!this.#imageConfiguratorPopup?.isShown() || !this.#inputField.getValue()?.trim())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst { style, format } = this.#imageConfiguratorPopup.getImageConfiguration();\n\n\t\tthis.#setPayload({\n\t\t\tstyle,\n\t\t\tformat,\n\t\t});\n\n\t\tthis.completions();\n\t}\n\n\t#handleInputFieldCancelLoadingEvent(): void\n\t{\n\t\tthis.#currentGenerateRequestId = -1;\n\t\tthis.#inputField.finishGenerating();\n\t\tthis.#inputField.focus();\n\t\tthis.showImageConfigurator();\n\t}\n\n\t#handleInputFieldAdjustHeightEvent(): void\n\t{\n\t\tthis.#resultMenu?.adjustPosition();\n\t\tthis.#errorMenu?.adjustPosition();\n\t\tthis.#imageConfiguratorPopup?.adjustPosition();\n\t}\n\n\t#showResultMenu(): void\n\t{\n\t\tif (!this.#resultMenu)\n\t\t{\n\t\t\tthis.#initResultMenu();\n\t\t}\n\n\t\tthis.#resultMenu.open();\n\t}\n\n\t#initResultMenu(): void\n\t{\n\t\tthis.#resultMenu = new this.#CopilotMenu({\n\t\t\tbindElement: this.#copilotContainer,\n\t\t\toffsetTop: 8,\n\t\t\toffsetLeft: 0,\n\t\t\titems: ImageConfiguratorResultMenuItems.getMenuItems({\n\t\t\t\tcopilotImageController: this,\n\t\t\t\tinputField: this.#inputField,\n\t\t\t\tuseInsertAboveAndUnderMenuItems: this.#useInsertAboveAndUnderTextMenuItems,\n\t\t\t}),\n\t\t\tkeyboardControlOptions: {\n\t\t\t\tclearHighlightAfterType: false,\n\t\t\t\tcanGoOutFromTop: false,\n\t\t\t\thighlightFirstItemAfterShow: true,\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t});\n\n\t\tthis.#resultMenu.setBindElement(this.#copilotContainer, {\n\t\t\tleft: 0,\n\t\t\ttop: 8,\n\t\t});\n\t}\n\n\t#showErrorMenu(): void\n\t{\n\t\tif (!this.#errorMenu)\n\t\t{\n\t\t\tthis.#initErrorMenu();\n\t\t}\n\n\t\tthis.#errorMenu.setBindElement(this.#copilotContainer, {\n\t\t\ttop: 8,\n\t\t\tleft: 0,\n\t\t});\n\n\t\tthis.#errorMenu?.open();\n\t}\n\n\t#initErrorMenu(): void\n\t{\n\t\tthis.#errorMenu = new this.#CopilotMenu({\n\t\t\tbindElement: this.#copilotContainer,\n\t\t\toffsetTop: 8,\n\t\t\titems: ImageConfiguratorErrorMenuItems.getMenuItems({\n\t\t\t\tcopilotImageController: this,\n\t\t\t\tinputField: this.#inputField,\n\t\t\t\tcopilotContainer: this.#copilotContainer,\n\t\t\t}),\n\t\t\tkeyboardControlOptions: {\n\t\t\t\tcanGoOutFromTop: false,\n\t\t\t\thighlightFirstItemAfterShow: true,\n\t\t\t\tclearHighlightAfterType: false,\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t});\n\t}\n}\n"],"names":["BaseCommand","constructor","options","copilotImageController","execute","Error","CancelImageCommand","copilotContainer","inputField","emit","destroyAllMenus","showImageConfigurator","clearErrors","clear","enable","Dom","removeClass","focus","getAnalytics","sendEventCancel","PlaceImageUnderCommand","PlaceImageAboveCommand","SaveImageCommand","BaseEvent","data","imageUrl","getResultImageUrl","sendEventSave","RepeatImageCompletion","completions","ImageConfiguratorErrorMenuItems","getMenuItems","code","text","Loc","getMessage","icon","notHighlight","command","ImageConfiguratorResultMenuItems","useAboveAndUnderTextMenuItems","useInsertAboveAndUnderMenuItems","IconSetMain","CHECK","IconSetActions","ARROW_TOP","ARROW_DOWN","LEFT_SEMICIRCULAR_ANTICLOCKWISE_ARROW_1","separator","CROSS_45","filter","item","Boolean","styleItems","title","value","classNameModifier","ImageConfiguratorStylesEvents","Object","freeze","select","ImageConfiguratorStyles","EventEmitter","length","setEventNamespace","getSelectedStyle","render","Tag","requestAnimationFrame","styleListStyles","getComputedStyle","paddingTop","getPropertyValue","paddingBottom","padding","parseFloat","style","offsetHeight","expandListBtn","Event","bind","addClass","values","innerHTML","append","slice","map","styleItem","radioButton","params","format","Editor","INCERT_IMAGE","ImageConfiguratorParams","light","composition","handler","set","target","property","Reflect","option","find","currentOption","optionElem","querySelector","innerText","attr","Proxy","getCurrentValues","isContainsTarget","contains","getPopupWindow","getPopupContainer","parameters","entries","parameterName","parameter","selectedOption","Icon","size","color","rightChevronIcon","Actions","CHEVRON_RIGHT","document","body","param","root","close","bindElement","Menu","show","imageConfiguratorParams","position","getPosition","top","left","right","cacheable","minWidth","items","events","onPopupAfterClose","isSelectedOption","id","html","onclick","isSelected","selectedIcon","Main","parameterValue","e","menuItem","getMenuWindow","ImageConfigurator","getParams","ImageConfiguratorPopupEvents","back","ImageConfiguratorPopup","popupId","String","Math","random","popupOffset","withoutBackBtn","getPopupId","getPopup","hide","destroy","isShown","adjustPosition","forceBindPosition","getImageConfiguration","Popup","width","content","setOffset","offsetTop","offsetLeft","button","Button","Color","AI","round","noCaps","backBtnIcon","CHEVRON_LEFT","backBtnIconElem","CopilotImageController","engine","copilotInputEvents","copilotMenu","popupWithoutBackBtn","analytics","setCopilotContainer","isImageConfiguratorPopup","isErrorMenu","isResultMenu","showMenu","usedTextInput","usedVoiceRecord","setContextTypeFromTextAndAudio","setContextTypeFromText","setContextTypeFromAudio","setCategoryImage","setTypeImageNew","start","finish","getOpenMenuPopup","hideAllMenus","adjustMenusPosition","startGenerating","res","imageCompletions","JSON","parse","result","finishGenerating","error","subscribe","getData","cancelLoading","submit","adjustHeight","unsubscribe","firstError","errors","disable","setErrors","message","AjaxErrorHandler","handleImageGenerateError","baasOptions","getContainer","context","getContextId","useAngle","errorCode","payload","TextPayload","prompt","getValue","setMarkers","setPayload","setAnalyticParameters","type","getType","c_sub_section","getCSubSection","c_section","getCSection","c_element","getCElement","setP1","setP2","trim","open","keyboardControlOptions","clearHighlightAfterType","canGoOutFromTop","highlightFirstItemAfterShow","setBindElement"],"mappings":"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"}