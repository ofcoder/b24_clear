this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};(function(e,s,t,l,a,i,r,o,n,d,c,b){"use strict";let v=e=>e,p,h;var L=babelHelpers.classPrivateFieldLooseKey("layout");var P=babelHelpers.classPrivateFieldLooseKey("props");var u=babelHelpers.classPrivateFieldLooseKey("titleNode");var B=babelHelpers.classPrivateFieldLooseKey("descriptionNode");var F=babelHelpers.classPrivateFieldLooseKey("createListItem");class g{constructor(e){Object.defineProperty(this,F,{value:H});Object.defineProperty(this,L,{writable:true,value:void 0});Object.defineProperty(this,P,{writable:true,value:void 0});Object.defineProperty(this,u,{writable:true,value:void 0});Object.defineProperty(this,B,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,u)[u]=n.Tag.render(p||(p=v`
			<span class="sign-blank-selector__list_item-title"></span>
		`));babelHelpers.classPrivateFieldLooseBase(this,B)[B]=n.Tag.render(h||(h=v`
			<span class="sign-blank-selector__list_item-info"></span>
		`));this.setProps(e);babelHelpers.classPrivateFieldLooseBase(this,L)[L]=babelHelpers.classPrivateFieldLooseBase(this,F)[F]()}getLayout(){return babelHelpers.classPrivateFieldLooseBase(this,L)[L]}setTitle(e=""){babelHelpers.classPrivateFieldLooseBase(this,u)[u].textContent=e;babelHelpers.classPrivateFieldLooseBase(this,u)[u].title=e;this.setProps({...this.getProps(),title:e})}setDescription(e=""){babelHelpers.classPrivateFieldLooseBase(this,B)[B].textContent=e;babelHelpers.classPrivateFieldLooseBase(this,B)[B].title=e;this.setProps({...this.getProps(),description:e})}getProps(){return babelHelpers.classPrivateFieldLooseBase(this,P)[P]}setProps(e){babelHelpers.classPrivateFieldLooseBase(this,P)[P]=e}}function H(){const{title:e,description:s,modifier:t}=this.getProps();this.setTitle(e);this.setDescription(s);return n.Dom.create("div",{attrs:{className:`sign-blank-selector__list_item --${t}`},children:[babelHelpers.classPrivateFieldLooseBase(this,u)[u],babelHelpers.classPrivateFieldLooseBase(this,B)[B]]})}let y=e=>e,f,m,_,S;var E=babelHelpers.classPrivateFieldLooseKey("placeholder");var T=babelHelpers.classPrivateFieldLooseKey("preview");var O=babelHelpers.classPrivateFieldLooseKey("loader");class k extends g{constructor(e){super({...e,modifier:"blank"});Object.defineProperty(this,E,{writable:true,value:void 0});Object.defineProperty(this,T,{writable:true,value:void 0});Object.defineProperty(this,O,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,E)[E]=n.Tag.render(f||(f=y`<div class="sign-blank-selector__list_item-status"></div>`));babelHelpers.classPrivateFieldLooseBase(this,T)[T]=n.Tag.render(m||(m=y`
			<div class="sign-blank-selector__list_item-preview" hidden>
				<img
					onload="${0}"
				/>
			</div>
		`),(()=>{babelHelpers.classPrivateFieldLooseBase(this,T)[T].hidden=false;babelHelpers.classPrivateFieldLooseBase(this,E)[E].hidden=true}));babelHelpers.classPrivateFieldLooseBase(this,O)[O]=new r.Loader({size:30,target:babelHelpers.classPrivateFieldLooseBase(this,E)[E]});const s=this.getLayout();n.Dom.prepend(babelHelpers.classPrivateFieldLooseBase(this,E)[E],s);n.Dom.prepend(babelHelpers.classPrivateFieldLooseBase(this,T)[T],s)}setAvatarWithDescription(e,s){this.setDescription(e);this.setProps({...this.getProps(),userAvatarUrl:s});const t=s?n.Tag.render(_||(_=y`
				<img class="sign-blank-selector__list_item-info-avatar" src="${0}" />
			`),s):n.Tag.render(S||(S=y`
				<span class="sign-blank-selector__list_item-info-avatar ui-icon ui-icon-common-user">
					<i></i>
				</span>
			`));const{lastElementChild:l}=this.getLayout();n.Dom.prepend(t,l)}select(){n.Dom.addClass(this.getLayout(),"--active")}deselect(){n.Dom.removeClass(this.getLayout(),"--active");this.getLayout().blur()}remove(){n.Dom.remove(this.getLayout())}setId(e){this.getLayout().dataset.id=e}setReady(e){if(!e){babelHelpers.classPrivateFieldLooseBase(this,O)[O].show();return}const s=this.getLayout();s.tabIndex="0";babelHelpers.classPrivateFieldLooseBase(this,O)[O].hide();n.Dom.addClass(s,"--loaded")}setPreview(e){if(e){babelHelpers.classPrivateFieldLooseBase(this,T)[T].firstElementChild.src=e}}}let w=e=>e,C;var I=babelHelpers.classPrivateFieldLooseKey("cache");var K=babelHelpers.classPrivateFieldLooseKey("setOptions");var D=babelHelpers.classPrivateFieldLooseKey("getOptions");var A=babelHelpers.classPrivateFieldLooseKey("getApi");var N=babelHelpers.classPrivateFieldLooseKey("getBlankSelector");var j=babelHelpers.classPrivateFieldLooseKey("getTagSelector");var R=babelHelpers.classPrivateFieldLooseKey("resetBlankSelector");class U extends d.EventEmitter{constructor(e){var s;super();Object.defineProperty(this,R,{value:W});Object.defineProperty(this,j,{value:G});Object.defineProperty(this,N,{value:$});Object.defineProperty(this,A,{value:X});Object.defineProperty(this,D,{value:M});Object.defineProperty(this,K,{value:x});Object.defineProperty(this,I,{writable:true,value:new n.Cache.MemoryCache});this.setEventNamespace("BX.Sign.BlankSelector.BlankField");this.subscribeFromOptions(e==null?void 0:e.events);babelHelpers.classPrivateFieldLooseBase(this,K)[K](e);const t=e==null?void 0:(s=e.data)==null?void 0:s.blankId;if(n.Type.isStringFilled(t)||n.Type.isNumber(t)){babelHelpers.classPrivateFieldLooseBase(this,A)[A]().getBlankById(e.data.blankId).then((({id:e,title:s})=>{babelHelpers.classPrivateFieldLooseBase(this,j)[j]().addTag({id:e,title:s,entityId:"blank"})}))}}getLayout(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I].remember("layout",(()=>{const e=n.Tag.render(C||(C=w`
				<div class="sign-blank-selector-field">
				</div>
			`));babelHelpers.classPrivateFieldLooseBase(this,j)[j]().renderTo(e);return e}))}renderTo(e){if(n.Type.isDomNode(e)){n.Dom.append(this.getLayout(),e)}}}function x(e){babelHelpers.classPrivateFieldLooseBase(this,I)[I].set("options",e)}function M(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I].get("options",{})}function X(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I].remember("api",(()=>new c.Api))}function $(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I].remember("blankSelector",(()=>new ke({...babelHelpers.classPrivateFieldLooseBase(this,D)[D]().selectorOptions,events:{toggleSelection:e=>{const{id:s,title:t,selected:l}=e.getData();const a=babelHelpers.classPrivateFieldLooseBase(this,j)[j]();if(l){a.addTag({id:s,title:t,entityId:"blank"});a.showAddButton();this.emit("onSelect",e);return}if(a.getTags().length===0){a.showAddButton()}this.emit("onCancel")},onSliderClose:()=>{const e=babelHelpers.classPrivateFieldLooseBase(this,j)[j]();if(e.getTags().length===0){e.showAddButton()}babelHelpers.classPrivateFieldLooseBase(this,R)[R]()}}})))}function G(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I].remember("tagSelector",(()=>new b.TagSelector({id:n.Text.getRandom(),multiple:false,showTextBox:false,addButtonCaption:n.Loc.getMessage("SIGN_BLANK_SELECTOR_FIELD_ADD_BUTTON_LABEL"),tagMaxWidth:500,events:{onAddButtonClick:()=>{babelHelpers.classPrivateFieldLooseBase(this,N)[N]().openInSlider();babelHelpers.classPrivateFieldLooseBase(this,j)[j]().hideTextBox()},onAfterTagRemove:()=>{babelHelpers.classPrivateFieldLooseBase(this,j)[j]().hideTextBox();babelHelpers.classPrivateFieldLooseBase(this,j)[j]().showAddButton();this.emit("onRemove")}}})))}function W(){babelHelpers.classPrivateFieldLooseBase(this,I)[I].delete("blankSelector")}let V=e=>e,z,Y,q,J,Q,Z;const ee={controller:"sign.upload.blankUploadController",acceptedFileTypes:[".jpg",".jpeg",".png",".pdf",".doc",".docx",".rtf",".odt"],multiple:true,autoUpload:false,maxFileSize:50*1024*1024,maxFileCount:100,imageMaxFileSize:10*1024*1024,maxTotalFileSize:50*1024*1024};const se={id:"qwerty",padding:20,offsetLeft:40,offsetTop:-12,angle:true,darkMode:true,width:300,autoHide:true,cacheable:false,bindOptions:{position:"bottom"}};var te=babelHelpers.classPrivateFieldLooseKey("cache");var le=babelHelpers.classPrivateFieldLooseKey("blanks");var ae=babelHelpers.classPrivateFieldLooseKey("tileWidget");var ie=babelHelpers.classPrivateFieldLooseKey("tileWidgetContainer");var re=babelHelpers.classPrivateFieldLooseKey("uploadButtonsContainer");var oe=babelHelpers.classPrivateFieldLooseKey("relatedTarget");var ne=babelHelpers.classPrivateFieldLooseKey("blanksContainer");var de=babelHelpers.classPrivateFieldLooseKey("page");var ce=babelHelpers.classPrivateFieldLooseKey("loadMoreButton");var be=babelHelpers.classPrivateFieldLooseKey("api");var ve=babelHelpers.classPrivateFieldLooseKey("config");var pe=babelHelpers.classPrivateFieldLooseKey("checkForFilesValid");var he=babelHelpers.classPrivateFieldLooseKey("onFileBeforeAdd");var Le=babelHelpers.classPrivateFieldLooseKey("getImagesLimit");var Pe=babelHelpers.classPrivateFieldLooseKey("onFileAdd");var ue=babelHelpers.classPrivateFieldLooseKey("onFileRemove");var Be=babelHelpers.classPrivateFieldLooseKey("onUploadStart");var Fe=babelHelpers.classPrivateFieldLooseKey("toggleTileVisibility");var ge=babelHelpers.classPrivateFieldLooseKey("createUploadButtons");var He=babelHelpers.classPrivateFieldLooseKey("resumeUploading");var ye=babelHelpers.classPrivateFieldLooseKey("loadBlanks");var fe=babelHelpers.classPrivateFieldLooseKey("setupBlank");var me=babelHelpers.classPrivateFieldLooseKey("normalizeTitle");var _e=babelHelpers.classPrivateFieldLooseKey("addBlank");var Se=babelHelpers.classPrivateFieldLooseKey("setSaveButtonIntoSlider");var Ee=babelHelpers.classPrivateFieldLooseKey("disableSaveButtonIntoSlider");var Te=babelHelpers.classPrivateFieldLooseKey("enableSaveButtonIntoSlider");var Oe=babelHelpers.classPrivateFieldLooseKey("getSaveButtonIntoSlider");class ke extends d.EventEmitter{constructor(e){var s;super();Object.defineProperty(this,Oe,{value:Ve});Object.defineProperty(this,Te,{value:We});Object.defineProperty(this,Ee,{value:Ge});Object.defineProperty(this,Se,{value:$e});Object.defineProperty(this,_e,{value:Xe});Object.defineProperty(this,me,{value:Me});Object.defineProperty(this,fe,{value:xe});Object.defineProperty(this,ye,{value:Ue});Object.defineProperty(this,He,{value:Re});Object.defineProperty(this,ge,{value:je});Object.defineProperty(this,Fe,{value:Ne});Object.defineProperty(this,Be,{value:Ae});Object.defineProperty(this,ue,{value:De});Object.defineProperty(this,Pe,{value:Ke});Object.defineProperty(this,Le,{value:Ie});Object.defineProperty(this,he,{value:Ce});Object.defineProperty(this,pe,{value:we});Object.defineProperty(this,te,{writable:true,value:new n.Cache.MemoryCache});Object.defineProperty(this,le,{writable:true,value:void 0});Object.defineProperty(this,ae,{writable:true,value:void 0});Object.defineProperty(this,ie,{writable:true,value:void 0});Object.defineProperty(this,re,{writable:true,value:void 0});Object.defineProperty(this,oe,{writable:true,value:void 0});Object.defineProperty(this,ne,{writable:true,value:void 0});Object.defineProperty(this,de,{writable:true,value:void 0});Object.defineProperty(this,ce,{writable:true,value:void 0});Object.defineProperty(this,be,{writable:true,value:void 0});Object.defineProperty(this,ve,{writable:true,value:void 0});this.setEventNamespace("BX.Sign.V2.BlankSelector");this.subscribeFromOptions((s=e==null?void 0:e.events)!=null?s:{});babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]=e;this.selectedBlankId=0;babelHelpers.classPrivateFieldLooseBase(this,le)[le]=new Map;babelHelpers.classPrivateFieldLooseBase(this,de)[de]=0;const t=babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]();const l=n.Tag.render(z||(z=V`
			<label class="sign-blank-selector__list_drag-area-label">
				${0}
			</label>
		`),n.Loc.getMessage("SIGN_BLANK_SELECTOR_DRAG_AREA"));const r={slots:{afterDropArea:{computed:{title:()=>n.Loc.getMessage("SIGN_BLANK_SELECTOR_CLEAR_ALL")},methods:{clear:()=>{this.clearFiles({removeFromServer:false})}},template:`\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass="sign-blank-selector__tile-widget_clear-btn"\n\t\t\t\t\t\t\t:title="title"\n\t\t\t\t\t\t\t@click="clear()"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t`}}};babelHelpers.classPrivateFieldLooseBase(this,re)[re]=n.Tag.render(Y||(Y=V`
			<div class="sign-blank-selector__list --with-buttons">
				${0}
				${0}
			</div>
		`),t,l);babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=new a.TileWidget({...ee,...e.uploaderOptions,dropElement:babelHelpers.classPrivateFieldLooseBase(this,re)[re],browseElement:[...t,l],events:{[i.UploaderEvent.BEFORE_FILES_ADD]:e=>babelHelpers.classPrivateFieldLooseBase(this,he)[he](e),[i.UploaderEvent.FILE_ADD]:e=>babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](e),[i.UploaderEvent.FILE_REMOVE]:e=>babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](e),[i.UploaderEvent.UPLOAD_START]:e=>babelHelpers.classPrivateFieldLooseBase(this,Be)[Be](e)}},r);babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]=null;n.Event.bind(document,"mousedown",(e=>{babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]=e.target}));babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]=n.Tag.render(q||(q=V`
			<div
				class="sign-blank-selector__list"
				onfocusin="${0}"
				onclick="${0}"
			></div>
		`),(({target:e})=>{this.selectBlank(Number(e.dataset.id))}),(({target:e,ctrlKey:s,metaKey:t})=>{if(s||t){this.resetSelectedBlank(Number(e.dataset.id),babelHelpers.classPrivateFieldLooseBase(this,oe)[oe])}}));babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]=n.Tag.render(J||(J=V`
			<div class="sign-blank-selector__tile-widget"></div>
		`));babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=n.Tag.render(Q||(Q=V`
			<div class="sign-blank-selector__load-more --hidden">
				<span onclick="${0}">
					${0}
				</span>
			</div>
		`),(()=>babelHelpers.classPrivateFieldLooseBase(this,ye)[ye](babelHelpers.classPrivateFieldLooseBase(this,de)[de]+1)),n.Loc.getMessage("SIGN_BLANK_SELECTOR_LOAD_MORE"));babelHelpers.classPrivateFieldLooseBase(this,be)[be]=new c.Api}async createBlank(){const e=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].getUploader();const s=e.getFiles();const[t]=s;await babelHelpers.classPrivateFieldLooseBase(this,He)[He]();const l=t.getCustomData(t.getId());try{var a;const e=s.map((e=>e.getServerFileId()));const t=await babelHelpers.classPrivateFieldLooseBase(this,be)[be].createBlank(e,(a=babelHelpers.classPrivateFieldLooseBase(this,ve)[ve].type)!=null?a:null);babelHelpers.classPrivateFieldLooseBase(this,fe)[fe]({...t,userName:n.Loc.getMessage("SIGN_BLANK_SELECTOR_CREATED_MYSELF")},l);return t.id}catch(e){l.remove();throw e}}resetSelectedBlank(e,s){const t=babelHelpers.classPrivateFieldLooseBase(this,le)[le].get(this.selectedBlankId);t==null?void 0:t.deselect();this.selectedBlankId=0;this.emit("toggleSelection",{selected:false});babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]()}modifyBlankTitle(e,s){const t=babelHelpers.classPrivateFieldLooseBase(this,le)[le].get(e);t.setTitle(s)}hasBlank(e){return babelHelpers.classPrivateFieldLooseBase(this,le)[le].has(e)}getBlank(e){return babelHelpers.classPrivateFieldLooseBase(this,le)[le].get(e)}async loadBlankById(e){const s=await babelHelpers.classPrivateFieldLooseBase(this,be)[be].getBlankById(e);if(!this.hasBlank(e)){const e=new k({title:s.title});babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](s,e)}}selectBlank(e){if(e!==this.selectedBlankId){this.resetSelectedBlank()}this.selectedBlankId=e;babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe](false);const s=babelHelpers.classPrivateFieldLooseBase(this,le)[le].get(e);const{title:t}=s.getProps();s.select();this.emit("toggleSelection",{id:e,selected:true,title:babelHelpers.classPrivateFieldLooseBase(this,me)[me](t)})}deleteBlank(e){const s=babelHelpers.classPrivateFieldLooseBase(this,le)[le].get(e);if(s){babelHelpers.classPrivateFieldLooseBase(this,le)[le].delete(e);s.remove()}}clearFiles(e){const s=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].getUploader();s.removeFiles(e)}isFilesReadyForUpload(){if(babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].getUploader().getFiles().length===0){return false}return babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].getUploader().getFiles().every((e=>e.getErrors().length<=0))}getLayout(){var e;babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].renderTo(babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]);babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe](false);const s=(e=babelHelpers.classPrivateFieldLooseBase(this,ve)[ve].canUploadNewBlank)!=null?e:true;const t=n.Tag.render(Z||(Z=V`
			<div class="sign-blank-selector">
				<p class="sign-blank-selector__add-title">
					${0}
				</p>
				${0}
				${0}
				<p class="sign-blank-selector__templates_title">
					${0}
				</p>
				${0}
				${0}
			</div>
		`),n.Loc.getMessage("SIGN_BLANK_SELECTOR_ADD_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,ie)[ie],s?babelHelpers.classPrivateFieldLooseBase(this,re)[re]:"",n.Loc.getMessage("SIGN_BLANK_SELECTOR_RECENT_TEMPLATES_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,ne)[ne],babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]);if(babelHelpers.classPrivateFieldLooseBase(this,de)[de]===0){babelHelpers.classPrivateFieldLooseBase(this,ye)[ye](1)}return t}openInSlider(){const e=n.Reflection.getClass("BX.SidePanel");if(!n.Type.isNil(e)){e.Instance.open("v2-blank-selector",{width:628,cacheable:false,events:{onClose:()=>{this.emit("onSliderClose")}},contentCallback:()=>l.Layout.createContent({extensions:["sign.v2.blank-selector"],title:n.Loc.getMessage("SIGN_BLANK_SELECTOR_SLIDER_TITLE"),content:()=>this.getLayout(),buttons:({cancelButton:s,SaveButton:t})=>{babelHelpers.classPrivateFieldLooseBase(this,Se)[Se](new t({text:n.Loc.getMessage("SIGN_BLANK_SELECTOR_SLIDER_SELECT_BLANK_BUTTON_LABEL"),onclick:()=>{e.Instance.close()}}));babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]();return[babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe](),s]}})})}}}function we(e){const s=e=>e.getType().includes("image/");const t=e.every((e=>s(e)));const l=e.every((e=>ee.acceptedFileTypes.includes(`.${e.getExtension()}`)));if(!l||e.length>1&&!t){return false}const a=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].getUploader();const i=a.getFiles();const r=i.length;const o=babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]();if(r===0&&e.length===1){return true}const n=i.every((e=>s(e)));return t&&n&&o-r>=e.length}function Ce(e){const{files:s}=e.getData();const l=babelHelpers.classPrivateFieldLooseBase(this,pe)[pe](s);if(l){return}let a=babelHelpers.classPrivateFieldLooseBase(this,re)[re].firstElementChild;if(n.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,re)[re],"--hidden")){const{$refs:{container:e}}=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].getRootComponent();a=e.firstElementChild}const i=new t.Popup({...se,bindElement:a,content:n.Loc.getMessage("SIGN_BLANK_SELECTOR_UPLOAD_HINT",{"%imageCountLimit%":babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]()})});i.show();e.preventDefault()}function Ie(){var e,s,t,l;return n.Type.isInteger(parseInt((e=babelHelpers.classPrivateFieldLooseBase(this,ve)[ve])==null?void 0:(s=e.uploaderOptions)==null?void 0:s.maxFileCount,10))?(t=babelHelpers.classPrivateFieldLooseBase(this,ve)[ve])==null?void 0:(l=t.uploaderOptions)==null?void 0:l.maxFileCount:ee.maxFileCount}function Ke(e){const s=e.data.file.getName();babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe](true);this.resetSelectedBlank();this.emit("addFile",{title:babelHelpers.classPrivateFieldLooseBase(this,me)[me](s)})}function De(e){this.emit("removeFile");const s=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].getUploader();const t=s.getFiles();if(t.length===0){babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe](false);this.emit("clearFiles")}}function Ae(){const e=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].getUploader();const[s]=e.getFiles();const t=s.getName();const l=s.getId();const a=new k({title:t});a.setReady(false);n.Dom.prepend(a.getLayout(),babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]);s.setCustomData(l,a)}function Ne(e){const s="--hidden";if(e){n.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,ie)[ie],s);n.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,re)[re],s);return}n.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,ie)[ie],s);n.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,re)[re],s);this.clearFiles({removeFromServer:false})}function je(){const e={img:{title:n.Loc.getMessage("SIGN_BLANK_SELECTOR_CREATE_NEW_PIC"),description:"jpeg, png"},pdf:{title:n.Loc.getMessage("SIGN_BLANK_SELECTOR_NEW_PDF"),description:"Adobe Acrobat"},doc:{title:n.Loc.getMessage("SIGN_BLANK_SELECTOR_NEW_DOC"),description:"doc, docx"}};const s=Object.entries(e);return s.map((([e,{title:s,description:t}])=>{const l=new g({title:s,description:t,modifier:e});return l.getLayout()}))}async function Re(){const e=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].getUploader();const s=e.getFiles();e.setMaxParallelUploads(s.length);const t=new Promise((s=>{e.subscribeOnce("onUploadComplete",s)}));e.start();await t}async function Ue(e){const s=new r.Loader({target:babelHelpers.classPrivateFieldLooseBase(this,ne)[ne],size:80,mode:"custom"});s.show();try{var t;const s=await babelHelpers.classPrivateFieldLooseBase(this,be)[be].loadBlanks(e,(t=babelHelpers.classPrivateFieldLooseBase(this,ve)[ve].type)!=null?t:null);const l=10;if(s.length<l){n.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,ce)[ce],"--hidden")}else{n.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,ce)[ce],"--hidden")}if(s.length>0){s.forEach((e=>{if(this.hasBlank(e.id)){return}const{title:s}=e;const t=new k({title:s});babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](e,t)}));babelHelpers.classPrivateFieldLooseBase(this,de)[de]=e}}catch{n.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,ce)[ce],"--hidden")}s.destroy()}function xe(e,t){const{id:l,previewUrl:a,userAvatarUrl:i,userName:r,dateCreate:o}=e;const n=o?new Date(o):new Date;const d=`${r}, ${s.DateTimeFormat.format("j M. Y",n)}`;t.setId(l);t.setReady(true);t.setPreview(a);t.setAvatarWithDescription(d,i);babelHelpers.classPrivateFieldLooseBase(this,le)[le].set(l,t)}function Me(e){const s=ee.acceptedFileTypes.find((s=>e.endsWith(s)));if(!s){return e}const t=e.lastIndexOf(s);return e.slice(0,t)}function Xe(e,s){babelHelpers.classPrivateFieldLooseBase(this,fe)[fe](e,s);n.Dom.append(s.getLayout(),babelHelpers.classPrivateFieldLooseBase(this,ne)[ne])}function $e(e){babelHelpers.classPrivateFieldLooseBase(this,te)[te].set("saveButton",e)}function Ge(){const e=babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]();e==null?void 0:e.setDisabled(true)}function We(){const e=babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]();e==null?void 0:e.setDisabled(false)}function Ve(){return babelHelpers.classPrivateFieldLooseBase(this,te)[te].get("saveButton")}e.BlankField=U;e.BlankSelector=ke})(this.BX.Sign.V2=this.BX.Sign.V2||{},BX.Main,BX.Main,BX.UI.SidePanel,BX.UI.Uploader,BX.UI.Uploader,BX,BX,BX,BX.Event,BX.Sign.V2,BX.UI.EntitySelector);
//# sourceMappingURL=blank-selector.bundle.map.js